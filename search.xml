<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>butterfly主题魔改</title>
      <link href="/article/aef1abdc.html"/>
      <url>/article/aef1abdc.html</url>
      
        <content type="html"><![CDATA[<h2 id="butterfly主题魔改css"><a href="#butterfly主题魔改css" class="headerlink" title="butterfly主题魔改css"></a>butterfly主题魔改css</h2><p>在source目录下新建 <code>css/custom.css</code> 文件，在 <code>_config.butterfly.yml</code> 文件中引入</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p>以下样式可以根据自己喜欢随意增删</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 自定义字体 字体放在source/fonts/目录下 */</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;PingFang&#x27;</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;../../fonts/PingFang-Bold.ttf&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 页脚透明 */</span></span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*页脚自定义字段字体颜色*/</span></span><br><span class="line"><span class="comment">/* 也就是配置文件里的footer_custom_text */</span></span><br><span class="line"><span class="selector-class">.footer_custom_text</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#00c4b6</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 版权链接去掉下划线 */</span></span><br><span class="line"><span class="selector-class">.layout_post</span> <span class="selector-class">.post-copyright</span> <span class="selector-class">.post-copyright-info</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*移动端优化：去除归档、标签、最新文章、公告、、只保留网站统计*/</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">800px</span>) &#123;</span><br><span class="line">    <span class="selector-id">#aside_content</span> <span class="selector-tag">div</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:last-child</span>) &#123;</span><br><span class="line">        <span class="attribute">display</span>: none;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 滚动条 */</span></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">    width: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">    background-color: <span class="number">#e58a8a</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(<span class="number">45deg</span>, <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.4</span>) <span class="number">25%</span>, transparent <span class="number">25%</span>, transparent <span class="number">50%</span>, <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.4</span>) <span class="number">50%</span>, <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.4</span>) <span class="number">75%</span>, transparent <span class="number">75%</span>, transparent);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">2em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-corner &#123;</span><br><span class="line">    background-color: transparent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-moz-selection &#123;</span><br><span class="line">    color: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#e58a8a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 侧边栏天气时钟去掉背景色 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span><span class="selector-class">.aside-content</span> &gt; <span class="selector-class">.sticky_layout</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-clock</span> &gt; <span class="selector-class">.card-glass</span> &gt; <span class="selector-class">.card-background</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: unset;</span><br><span class="line">    <span class="attribute">box-shadow</span>: unset;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 透明度修改 */</span></span><br><span class="line"><span class="comment">/* 首页文章卡片 */</span></span><br><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 首页侧栏卡片 */</span></span><br><span class="line"><span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文章页面正文背景 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 分页页面 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#page</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 归档页面 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#archive</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 标签页面 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#tag</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 分类页面 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#category</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标样式修改 */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: <span class="built_in">url</span>(<span class="string">https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/img/default.cur</span>),</span><br><span class="line">    default;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span>,</span><br><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: <span class="built_in">url</span>(<span class="string">https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/img/pointer.cur</span>),</span><br><span class="line">    default;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 搜索框圆角 */</span></span><br><span class="line"><span class="selector-class">.search-dialog</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="更换-Twikoo-评论"><a href="#更换-Twikoo-评论" class="headerlink" title="更换 Twikoo 评论"></a>更换 Twikoo 评论</h2><p><a href="https://blog.zhheo.com/p/2e6bbbd0.html">https://blog.zhheo.com/p/2e6bbbd0.html</a></p><h2 id="在首页增加今日诗词侧边栏小组件"><a href="#在首页增加今日诗词侧边栏小组件" class="headerlink" title="在首页增加今日诗词侧边栏小组件"></a>在首页增加今日诗词侧边栏小组件</h2><p>在node_modules中找到butterfly依赖，然后在 <code>layout\includes\widget\</code> 下新增 <code>card_poem.pug</code> 文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#card-poem.card-widget</span><br><span class="line">    #poem_sentence</span><br><span class="line">    #poem_info</span><br><span class="line">        #poem_dynasty</span><br><span class="line">        #poem_author</span><br><span class="line">script(src=&#x27;https://cdn.jsdelivr.net/gh/zhheo/JS-Heo@main/poem/jinrishici.js&#x27;, charset=&#x27;utf-8&#x27;)</span><br><span class="line">script(type=&#x27;text/javascript&#x27;).</span><br><span class="line">    jinrishici.load(function(result) &#123;</span><br><span class="line">        var sentence = document.querySelector(&quot;#poem_sentence&quot;)</span><br><span class="line">        var author = document.querySelector(&quot;#poem_author&quot;)</span><br><span class="line">        var dynasty = document.querySelector(&quot;#poem_dynasty&quot;)</span><br><span class="line"></span><br><span class="line">        var sentenceText = result.data.content</span><br><span class="line">        sentenceText = sentenceText.substr(0, sentenceText.length - 1);</span><br><span class="line">        sentence.innerHTML = sentenceText</span><br><span class="line">        dynasty.innerHTML = result.data.origin.dynasty</span><br><span class="line">        author.innerHTML = result.data.origin.author + &#x27;《&#x27; + result.data.origin.title + &#x27;》&#x27;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在同目录的 <code>index.pug</code> 文件你要想的引入地方引入即可。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!=partial(&#x27;includes/widget/card_poem&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br></pre></td></tr></table></figure><p>最后在 <code>_config.butterfly.yml</code> 文件中引入如下 css 链接：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">  <span class="comment"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;&gt;</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">type=&quot;text/css&quot;</span> <span class="string">href=&quot;https://cdn.jsdelivr.net/gh/zhheo/JS-Heo@main/mainColor/heoMainColor.css&quot;&gt;</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">type=&quot;text/css&quot;</span> <span class="string">href=&quot;https://cdn.jsdelivr.net/gh/zhheo/JS-Heo@main/poem/poem.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><h2 id="嵌入哔哩哔哩视频"><a href="#嵌入哔哩哔哩视频" class="headerlink" title="嵌入哔哩哔哩视频"></a>嵌入哔哩哔哩视频</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=<span class="string">&quot;position: relative; width: 100%; height: 0; padding-bottom: 75%;&quot;</span>&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;//player.bilibili.com/player.html?aid=206890880&amp;bvid=BV1Ah411z7Po&amp;cid=378344365&amp;page=1&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">framespacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">allowfullscreen</span>=<span class="string">&quot;true&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position:absolute; height: 100%; width: 100%;&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>效果如下：</p><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">    <iframe src="//player.bilibili.com/player.html?aid=206890880&bvid=BV1Ah411z7Po&cid=378344365&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"> </iframe></div>]]></content>
      
      
      <categories>
          
          <category> 杂记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>若依前后端分离项目部署</title>
      <link href="/article/28cee05f.html"/>
      <url>/article/28cee05f.html</url>
      
        <content type="html"><![CDATA[<h2 id="1、安装redis"><a href="#1、安装redis" class="headerlink" title="1、安装redis"></a>1、安装redis</h2><h3 id="1、搜索redis镜像"><a href="#1、搜索redis镜像" class="headerlink" title="1、搜索redis镜像"></a>1、搜索redis镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search redis</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638552.png" alt="img"></p><h3 id="2、拉取最新版本的redis镜像"><a href="#2、拉取最新版本的redis镜像" class="headerlink" title="2、拉取最新版本的redis镜像"></a>2、拉取最新版本的redis镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull redis:latest</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638808.png" alt="img"></p><h3 id="3、查看镜像"><a href="#3、查看镜像" class="headerlink" title="3、查看镜像"></a>3、查看镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638544.png" alt="img"></p><h3 id="4、启动镜像"><a href="#4、启动镜像" class="headerlink" title="4、启动镜像"></a>4、启动镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --name redis -p 6379:6379 redis</span><br></pre></td></tr></table></figure><p>使用<code>docker ps</code>查看正在运行的容器</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638685.png" alt="img"></p><h3 id="5、进入redis容器"><a href="#5、进入redis容器" class="headerlink" title="5、进入redis容器"></a>5、进入redis容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it redis /bin/bash</span><br><span class="line">redis-cli</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638579.png" alt="img"></p><h3 id="6、使用AnotherRedisDestopManager连接redis"><a href="#6、使用AnotherRedisDestopManager连接redis" class="headerlink" title="6、使用AnotherRedisDestopManager连接redis"></a>6、使用<a href="https://github.com/qishibo/AnotherRedisDesktopManager/releases">AnotherRedisDestopManager</a>连接redis</h3><p>如果连接报错，请确保服务器的安全组中开启6379端口。</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081639887.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638719.png" alt="img"></p><h2 id="2、安装nodejs"><a href="#2、安装nodejs" class="headerlink" title="2、安装nodejs"></a>2、安装nodejs</h2><h3 id="1、进入官网下载最新的nodejs"><a href="#1、进入官网下载最新的nodejs" class="headerlink" title="1、进入官网下载最新的nodejs"></a>1、进入官网下载最新的<a href="https://npm.taobao.org/mirrors/node/v14.15.5/">nodejs</a></h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081639399.png" alt="img"></p><h3 id="2、下载完之后通过xftp上传压缩包到服务器"><a href="#2、下载完之后通过xftp上传压缩包到服务器" class="headerlink" title="2、下载完之后通过xftp上传压缩包到服务器"></a>2、下载完之后通过xftp上传压缩包到服务器</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081639290.png" alt="img"></p><h3 id="3、解压并移动文件夹到-data-service目录"><a href="#3、解压并移动文件夹到-data-service目录" class="headerlink" title="3、解压并移动文件夹到/data/service目录"></a>3、解压并移动文件夹到<code>/data/service</code>目录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf node-v14.15.5-linux-x64.tar.gz</span><br><span class="line">mv node-v14.15.5-linux-x64 /data/service</span><br><span class="line">cd /data/service</span><br><span class="line">ll</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638038.png" alt="img"></p><h3 id="4、配置环境变量"><a href="#4、配置环境变量" class="headerlink" title="4、配置环境变量"></a>4、配置环境变量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export NODEJS_HOME=/data/service/node-v14.15.5-linux-x64</span><br><span class="line">export PATH=$PATH:$NODEJS_HOME/bin</span><br></pre></td></tr></table></figure><p>使环境变量生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>检查是否配置成功</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638101.png" alt="img"></p><h3 id="5、设置npm镜像源"><a href="#5、设置npm镜像源" class="headerlink" title="5、设置npm镜像源"></a>5、设置npm镜像源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#设置淘宝镜像源</span><br><span class="line">npm config set registry https://registry.npm.taobao.org</span><br><span class="line">#升级npm</span><br><span class="line">npm -g install npm</span><br><span class="line">#查看npm配置</span><br><span class="line">npm config list</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638186.png" alt="img"></p><h3 id="6、安装yarn以及设置镜像源"><a href="#6、安装yarn以及设置镜像源" class="headerlink" title="6、安装yarn以及设置镜像源"></a>6、安装yarn以及设置镜像源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#安装yarn</span><br><span class="line">npm install -g yarn</span><br><span class="line">#查看版本号</span><br><span class="line">yarn -v</span><br><span class="line">#设置淘宝镜像源</span><br><span class="line">yarn config set registry https://registry.npm.taobao.org -g</span><br><span class="line">yarn config set sass_binary_site http://cdn.npm.taobao.org/dist/node-sass -g</span><br><span class="line">#查看yarn配置</span><br><span class="line">yarn config list</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081639808.png" alt="img"></p><h2 id="3、安装nginx"><a href="#3、安装nginx" class="headerlink" title="3、安装nginx"></a>3、安装nginx</h2><h3 id="1、进入官网下载最新的稳定版ngnix"><a href="#1、进入官网下载最新的稳定版ngnix" class="headerlink" title="1、进入官网下载最新的稳定版ngnix"></a>1、进入官网下载最新的稳定版<a href="https://nginx.org/download/">ngnix</a></h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638225.png" alt="img"></p><h3 id="2、下载完之后通过xftp上传压缩包到服务器-1"><a href="#2、下载完之后通过xftp上传压缩包到服务器-1" class="headerlink" title="2、下载完之后通过xftp上传压缩包到服务器"></a>2、下载完之后通过xftp上传压缩包到服务器</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081639451.png" alt="img"></p><h3 id="3、解压编译安装nginx"><a href="#3、解压编译安装nginx" class="headerlink" title="3、解压编译安装nginx"></a>3、解压编译安装nginx</h3><p>首先安装依赖</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc pcre-devel zlib-devel openssl openssl-devel</span><br><span class="line">cd /data/tmp</span><br><span class="line">tar zxvf nginx-1.18.0.tar.gz</span><br><span class="line">cd nginx-1.18.0</span><br><span class="line">./configure --prefix=/data/service/ngnix</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h3 id="4、启动ngnix"><a href="#4、启动ngnix" class="headerlink" title="4、启动ngnix"></a>4、启动ngnix</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#启动ngnix</span><br><span class="line">/data/service/ngnix/sbin/nginx</span><br><span class="line">#停止ngnix</span><br><span class="line">/data/service/ngnix/sbin/nginx -s quit</span><br><span class="line">#重启ngnix</span><br><span class="line">/data/service/ngnix/sbin/nginx -s reload</span><br></pre></td></tr></table></figure><p>如果访问不成功，请确保服务器的安全组中开启80端口。</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638549.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081639533.png" alt="img"></p><h2 id="4、运行项目准备"><a href="#4、运行项目准备" class="headerlink" title="4、运行项目准备"></a>4、运行项目准备</h2><h3 id="1、拉取代码"><a href="#1、拉取代码" class="headerlink" title="1、拉取代码"></a>1、拉取代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /data/gitee</span><br><span class="line">git clone git@gitee.com:y_project/RuoYi-Vue.git</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638328.png" alt="img"></p><h3 id="2、创建数据库以及数据库表"><a href="#2、创建数据库以及数据库表" class="headerlink" title="2、创建数据库以及数据库表"></a>2、创建数据库以及数据库表</h3><p>使用navicat连接，创建数据库 <code>ry-vue</code> 以及执行 <code>quartz.sql</code> 和 <code>ry_20210210.sql</code> 脚本。</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081639429.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638692.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638074.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638789.png" alt="img"></p><h3 id="3、修改项目配置"><a href="#3、修改项目配置" class="headerlink" title="3、修改项目配置"></a>3、修改项目配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /data/gitee/RuoYi-Vue/ruoyi-admin/src/main/resources/</span><br><span class="line">#修改application.yml的项目启动端口号与文件上传路径</span><br><span class="line">vim application.yml</span><br><span class="line">#修改application-druid.yml的数据源</span><br><span class="line">vim application-druid.yml</span><br><span class="line">profile: /data/tmp</span><br><span class="line">port: 18081</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638321.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 主库数据源</span><br><span class="line">master:</span><br><span class="line">url: jdbc:mysql://localhost:3306/ry-vue?useUnicode=true&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span><br><span class="line">username: root</span><br><span class="line">password: 123456</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638648.png" alt="img"></p><h3 id="4、将项目打成jar包"><a href="#4、将项目打成jar包" class="headerlink" title="4、将项目打成jar包"></a>4、将项目打成jar包</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /data/gitee/RuoYi-Vue/</span><br><span class="line">mvn clean install -pl com.ruoyi:ruoyi-admin -am</span><br></pre></td></tr></table></figure><h3 id="5、启动后端项目"><a href="#5、启动后端项目" class="headerlink" title="5、启动后端项目"></a>5、启动后端项目</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/app/ruoyi-vue</span><br><span class="line">cp /data/gitee/RuoYi-Vue/ruoyi-admin/target/ruoyi-admin.jar /data/app/ruoyi-vue/ruoyi-admin.jar</span><br><span class="line">cd /data/app/ruoyi-vue/</span><br><span class="line">#后台启动项目</span><br><span class="line">nohup java -jar ruoyi-admin.jar &amp;</span><br><span class="line">#查看项目运行日志</span><br><span class="line">tail -f nohup.out</span><br></pre></td></tr></table></figure><p>如果查看日志的时候，出现18081端口被使用，则表示还有其他应用占用了该端口，关闭应用之后再重新启动即可。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#列出后台进程</span><br><span class="line">ps -ef | grep java</span><br><span class="line">#杀死进程</span><br><span class="line">kill -9 pid</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081640303.png" alt="img"></p><h3 id="6、启动前端项目"><a href="#6、启动前端项目" class="headerlink" title="6、启动前端项目"></a>6、启动前端项目</h3><h4 id="1、下载依赖并打包"><a href="#1、下载依赖并打包" class="headerlink" title="1、下载依赖并打包"></a>1、下载依赖并打包</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd /data/gitee/RuoYi-Vue/ruoyi-ui</span><br><span class="line">#下载依赖</span><br><span class="line">yarn install</span><br><span class="line"># 打包正式环境</span><br><span class="line">yarn run build:prod</span><br><span class="line"></span><br><span class="line">mkdir /data/app/ruoyi-ui</span><br><span class="line">mv dist/* /data/app/ruoyi-ui/</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638123.png" alt="img"></p><h4 id="2、配置ngnix配置文件"><a href="#2、配置ngnix配置文件" class="headerlink" title="2、配置ngnix配置文件"></a>2、配置ngnix配置文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vim /data/service/ngnix/conf/nginx.conf</span><br><span class="line">location / &#123;</span><br><span class="line">  root   /data/app/ruoyi-ui;</span><br><span class="line">  try_files $uri $uri/ /index.html;</span><br><span class="line">  index index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line">       </span><br><span class="line">location /prod-api/ &#123;</span><br><span class="line">  proxy_set_header Host $http_host;</span><br><span class="line">  proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">  proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">  proxy_pass http://localhost:18081/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3、访问项目"><a href="#3、访问项目" class="headerlink" title="3、访问项目"></a>3、访问<a href="http://120.78.177.161/login?redirect=/index">项目</a></h4><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638514.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> 杂记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 若依 </tag>
            
            <tag> 部署 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>若依前后端不分离项目部署</title>
      <link href="/article/2e2b64e6.html"/>
      <url>/article/2e2b64e6.html</url>
      
        <content type="html"><![CDATA[<h2 id="1、下载安装xshell与xftp"><a href="#1、下载安装xshell与xftp" class="headerlink" title="1、下载安装xshell与xftp"></a>1、下载安装<a href="https://www.netsarang.com/zh/xshell/">xshell</a>与<a href="https://www.netsarang.com/zh/xftp/">xftp</a></h2><p>用于连接阿里云服务器以及上传文件到服务器。</p><h2 id="2、新建目录"><a href="#2、新建目录" class="headerlink" title="2、新建目录"></a>2、新建目录</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#tmp存放临时安装包</span><br><span class="line">mkdir -p /data/tmp</span><br><span class="line">#service存放软件环境</span><br><span class="line">mkdir -p /data/service</span><br><span class="line">#gitee存放代码版本控制库</span><br><span class="line">mkdir -p /data/gitee</span><br></pre></td></tr></table></figure><h2 id="3、安装jdk"><a href="#3、安装jdk" class="headerlink" title="3、安装jdk"></a>3、安装jdk</h2><h3 id="1、jdk1-8百度云下载"><a href="#1、jdk1-8百度云下载" class="headerlink" title="1、jdk1.8百度云下载"></a>1、<a href="https://blog.csdn.net/qq_42767455/article/details/105724208">jdk1.8百度云</a>下载</h3><h3 id="2、下载完成之后通过xftp上传压缩包到服务器"><a href="#2、下载完成之后通过xftp上传压缩包到服务器" class="headerlink" title="2、下载完成之后通过xftp上传压缩包到服务器"></a>2、下载完成之后通过xftp上传压缩包到服务器</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631415.png" alt="img"></p><h3 id="3、解压并移动文件夹到-data-service目录"><a href="#3、解压并移动文件夹到-data-service目录" class="headerlink" title="3、解压并移动文件夹到/data/service目录"></a>3、解压并移动文件夹到/data/service目录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk-8u261-linux-x64.tar.gz</span><br><span class="line">mv jdk1.8.0_261 /data/service</span><br><span class="line">cd /data/service</span><br><span class="line">ll</span><br></pre></td></tr></table></figure><h3 id="4、配置环境变量"><a href="#4、配置环境变量" class="headerlink" title="4、配置环境变量"></a>4、配置环境变量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export JAVA_HOME=/data/service/jdk1.8.0_261</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br></pre></td></tr></table></figure><p>使环境变量生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>检查是否配置成功</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631280.png" alt="img"></p><h2 id="4、安装maven"><a href="#4、安装maven" class="headerlink" title="4、安装maven"></a>4、安装maven</h2><h3 id="1、进入官网下载最新的maven"><a href="#1、进入官网下载最新的maven" class="headerlink" title="1、进入官网下载最新的maven"></a>1、进入官网下载最新的<a href="http://maven.apache.org/download.cgi">maven</a></h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631170.png" alt="img"></p><h3 id="2、下载完之后通过xftp上传压缩包到服务器"><a href="#2、下载完之后通过xftp上传压缩包到服务器" class="headerlink" title="2、下载完之后通过xftp上传压缩包到服务器"></a>2、下载完之后通过xftp上传压缩包到服务器</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631300.png" alt="img"></p><h3 id="3、解压并移动文件夹到-data-service目录-1"><a href="#3、解压并移动文件夹到-data-service目录-1" class="headerlink" title="3、解压并移动文件夹到/data/service目录"></a>3、解压并移动文件夹到<code>/data/service</code>目录</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf apache-maven-3.6.3-bin.tar.gz</span><br><span class="line">mv apache-maven-3.6.3 /data/service</span><br><span class="line">cd /data/service</span><br><span class="line">ll</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631294.png" alt="img"></p><h3 id="4、配置环境变量-1"><a href="#4、配置环境变量-1" class="headerlink" title="4、配置环境变量"></a>4、配置环境变量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export MAVEN_HOME=/data/service/apache-maven-3.6.3</span><br><span class="line">export PATH=$PATH:$MAVEN_HOME/bin</span><br></pre></td></tr></table></figure><p>使环境变量生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>检查是否配置成功</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn -v</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631134.png" alt="img"></p><h3 id="5、配置本地仓库地址与阿里云镜像"><a href="#5、配置本地仓库地址与阿里云镜像" class="headerlink" title="5、配置本地仓库地址与阿里云镜像"></a>5、配置本地仓库地址与<a href="https://maven.aliyun.com/mvn/guide">阿里云镜像</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vim /data/service/apache-maven-3.6.3/conf/setting.xml</span><br><span class="line"></span><br><span class="line">#配置本地仓库</span><br><span class="line">&lt;localRepository&gt;/data/service/apache-maven-3.6.3/repository&lt;/localRepository&gt;</span><br><span class="line"></span><br><span class="line">#配置阿里云镜像</span><br><span class="line">&lt;mirror&gt;</span><br><span class="line">  &lt;id&gt;aliyunmaven&lt;/id&gt;</span><br><span class="line">  &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;</span><br><span class="line">  &lt;name&gt;阿里云公共仓库&lt;/name&gt;</span><br><span class="line">  &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt;</span><br><span class="line">&lt;/mirror&gt;</span><br></pre></td></tr></table></figure><h2 id="5、安装git"><a href="#5、安装git" class="headerlink" title="5、安装git"></a>5、安装git</h2><h3 id="1、进入官网下载git"><a href="#1、进入官网下载git" class="headerlink" title="1、进入官网下载git"></a>1、进入官网下载<a href="https://mirrors.edge.kernel.org/pub/software/scm/git/">git</a></h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631281.png" alt="img"></p><h3 id="2、下载完之后通过xftp上传压缩包到服务器-1"><a href="#2、下载完之后通过xftp上传压缩包到服务器-1" class="headerlink" title="2、下载完之后通过xftp上传压缩包到服务器"></a>2、下载完之后通过xftp上传压缩包到服务器</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631681.png" alt="img"></p><h3 id="3、解压编译安装git"><a href="#3、解压编译安装git" class="headerlink" title="3、解压编译安装git"></a>3、解压编译安装git</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum -y groupinstall &quot;Development Tools&quot;</span><br><span class="line">yum install wget unzip gettext-devel openssl-devel perl-CPAN perl-devel zlib-devel libcurl-devel expat-devel -y</span><br><span class="line">cd /data/tmp</span><br><span class="line">tar zxvf git-2.18.0.tar.gz</span><br><span class="line">cd git-2.18.0</span><br><span class="line">./configure --prefix=/data/service/git</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h3 id="4、配置环境变量-2"><a href="#4、配置环境变量-2" class="headerlink" title="4、配置环境变量"></a>4、配置环境变量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export GIT_HOME=/data/service/git</span><br><span class="line">export PATH=$PATH:$GIT_HOME/bin</span><br></pre></td></tr></table></figure><p>使环境变量生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>检查是否配置成功</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631828.png" alt="img"></p><h3 id="5、生成-添加SSH公钥"><a href="#5、生成-添加SSH公钥" class="headerlink" title="5、生成/添加SSH公钥"></a>5、<a href="https://gitee.com/help/articles/4181#article-header0">生成/添加SSH公钥</a></h3><h4 id="1、生成公钥"><a href="#1、生成公钥" class="headerlink" title="1、生成公钥"></a>1、生成公钥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;15019474951@163.com&quot;</span><br><span class="line">cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><h4 id="2、添加公钥到gitte"><a href="#2、添加公钥到gitte" class="headerlink" title="2、添加公钥到gitte"></a>2、添加公钥到<a href="https://gitee.com/profile/sshkeys">gitte</a></h4><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631927.png" alt="img"></p><h4 id="3、验证"><a href="#3、验证" class="headerlink" title="3、验证"></a>3、验证</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@gitee.com</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631920.png" alt="img"></p><h3 id="6、拉取ruoyi代码"><a href="#6、拉取ruoyi代码" class="headerlink" title="6、拉取ruoyi代码"></a>6、拉取<a href="https://gitee.com/y_project/RuoYi?_from=gitee_search">ruoyi</a>代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /data/gitee</span><br><span class="line">git clone git@gitee.com:y_project/RuoYi.git</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081632404.png" alt="img"></p><h2 id="6、安装docker"><a href="#6、安装docker" class="headerlink" title="6、安装docker"></a>6、安装<a href="https://docs.docker.com/engine/install/centos/">docker</a></h2><h3 id="1、卸载旧版本"><a href="#1、卸载旧版本" class="headerlink" title="1、卸载旧版本"></a>1、卸载旧版本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631900.png" alt="img"></p><h3 id="2、安装依赖"><a href="#2、安装依赖" class="headerlink" title="2、安装依赖"></a>2、安装依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure><h3 id="3、添加源"><a href="#3、添加源" class="headerlink" title="3、添加源"></a>3、添加源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><h3 id="4、安装最新的containerd和docker"><a href="#4、安装最新的containerd和docker" class="headerlink" title="4、安装最新的containerd和docker"></a>4、安装最新的containerd和docker</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install docker-ce docker-ce-cli containerd.io -y</span><br></pre></td></tr></table></figure><p>如果安装途中报错，可以进行手动安装新版本的containerd.io</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y https://mirrors.aliyun.com/docker-ce/linux/centos/7/x86_64/edge/Packages/containerd.io-1.2.6-3.3.el7.x86_64.rpm</span><br><span class="line">yum install docker-ce docker-ce-cli -y</span><br></pre></td></tr></table></figure><h3 id="5、启动docker并配置开机自启"><a href="#5、启动docker并配置开机自启" class="headerlink" title="5、启动docker并配置开机自启"></a>5、启动docker并配置开机自启</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 启动docker</span><br><span class="line">sudo systemctl start docker</span><br><span class="line"># 开机自启</span><br><span class="line">sudo systemctl enable docker</span><br></pre></td></tr></table></figure><h3 id="6、检测docker版本"><a href="#6、检测docker版本" class="headerlink" title="6、检测docker版本"></a>6、检测docker版本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker -v</span><br></pre></td></tr></table></figure><h3 id="7、配置阿里云镜像加速器"><a href="#7、配置阿里云镜像加速器" class="headerlink" title="7、配置阿里云镜像加速器"></a>7、配置阿里云<a href="https://cr.console.aliyun.com/cn-shenzhen/instances/mirrors">镜像加速器</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://plb9xzjh.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure><h2 id="7、安装mysql"><a href="#7、安装mysql" class="headerlink" title="7、安装mysql"></a>7、安装mysql</h2><h3 id="1、搜索mysql镜像"><a href="#1、搜索mysql镜像" class="headerlink" title="1、搜索mysql镜像"></a>1、搜索mysql镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search mysql</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1554080/1614084313743-d34506d7-d3a1-4e9e-911e-69235fe40a0a.png" alt="img"></p><h3 id="2、拉取mysql5-7镜像"><a href="#2、拉取mysql5-7镜像" class="headerlink" title="2、拉取mysql5.7镜像"></a>2、拉取mysql5.7镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql:5.7</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1554080/1614084218408-3315d8a7-0bbf-4118-b8b9-37ed5569ed01.png" alt="img"></p><h3 id="3、查看镜像"><a href="#3、查看镜像" class="headerlink" title="3、查看镜像"></a>3、查看镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631183.png" alt="img"></p><h3 id="4、创建配置文件"><a href="#4、创建配置文件" class="headerlink" title="4、创建配置文件"></a>4、创建配置文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/docker/mysql/conf</span><br><span class="line">cd /data/docker/mysql/conf</span><br><span class="line">vim my.cnf</span><br></pre></td></tr></table></figure><p>my.cnf 文件内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">character-set-server=utf8</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br></pre></td></tr></table></figure><h3 id="5、启动镜像"><a href="#5、启动镜像" class="headerlink" title="5、启动镜像"></a>5、启动镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 3306:3306 --name mysql -v /data/docker/mysql/conf:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7</span><br></pre></td></tr></table></figure><p>使用<code>docker ps</code>查看正在运行的容器</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631439.png" alt="img"></p><h3 id="6、进入mysql容器"><a href="#6、进入mysql容器" class="headerlink" title="6、进入mysql容器"></a>6、进入mysql容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it mysql bash</span><br><span class="line">mysql -uroot -p123456</span><br><span class="line">show databases;</span><br><span class="line"># 退出</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631524.png" alt="img"></p><h3 id="7、使用navicat连接mysql"><a href="#7、使用navicat连接mysql" class="headerlink" title="7、使用navicat连接mysql"></a>7、使用navicat连接mysql</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081632763.png" alt="img"></p><p>如果连接报错，请确保服务器的安全组中开启3306端口。</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631352.png" alt="img"></p><p>进入mysql容器，设置root账户密码为123456并且允许任何ip访问mysql服务器。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it mysql bash</span><br><span class="line">mysql -uroot -p123456</span><br><span class="line">use ruoyi;</span><br><span class="line">grant all privileges on *.* to root@&quot;%&quot; identified by &quot;123456&quot;;</span><br><span class="line">flush privileges;</span><br><span class="line">exit</span><br><span class="line">exit</span><br><span class="line"># 重启mysql服务</span><br><span class="line">sudo docker restart mysql</span><br></pre></td></tr></table></figure><h3 id="8、运行项目准备"><a href="#8、运行项目准备" class="headerlink" title="8、运行项目准备"></a>8、运行项目准备</h3><h4 id="1、创建数据库以及数据库表"><a href="#1、创建数据库以及数据库表" class="headerlink" title="1、创建数据库以及数据库表"></a>1、创建数据库以及数据库表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#复制需要执行的sql文件到docker的映射目录中</span><br><span class="line">cp /data/gitee/RuoYi/sql/quartz.sql /data/docker/mysql/conf/</span><br><span class="line">cp /data/gitee/RuoYi/sql/ry_20210210.sql /data/docker/mysql/conf/</span><br><span class="line">#进入docker容器中，执行sql文件</span><br><span class="line">docker exec -it mysql env LANG=C.UTF-8 bash</span><br><span class="line">#连接mysql</span><br><span class="line">mysql -uroot -p123456</span><br><span class="line">#创建数据库ruoyi</span><br><span class="line">create database if not exists ruoyi character set=&#x27;utf8&#x27;;</span><br><span class="line">#进入数据库，执行sql文件</span><br><span class="line">use ruoyi;</span><br><span class="line">source /etc/mysql/conf.d/quartz.sql;</span><br><span class="line">source /etc/mysql/conf.d/ry_20210210.sql;</span><br><span class="line">#显示创建的表</span><br><span class="line">show tables;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631419.png" alt="img"></p><h4 id="2、修改项目配置"><a href="#2、修改项目配置" class="headerlink" title="2、修改项目配置"></a>2、修改项目配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /data/gitee/RuoYi/ruoyi-admin/src/main/resources/</span><br><span class="line">#修改application.yml的项目启动端口号与文件上传路径</span><br><span class="line">vim application.yml</span><br><span class="line">#修改application-druid.yml的数据源</span><br><span class="line">vim application-druid.yml</span><br><span class="line">profile: /data/tmp</span><br><span class="line">port: 18081</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081632238.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 主库数据源</span><br><span class="line">master:</span><br><span class="line">url: jdbc:mysql://localhost:3306/ruoyi?useUnicode=true&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span><br><span class="line">username: root</span><br><span class="line">password: 123456</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081632012.png" alt="img"></p><h4 id="3、将项目打成jar包"><a href="#3、将项目打成jar包" class="headerlink" title="3、将项目打成jar包"></a>3、将项目打成jar包</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /data/gitee/RuoYi/</span><br><span class="line">mvn install</span><br></pre></td></tr></table></figure><h4 id="4、启动项目"><a href="#4、启动项目" class="headerlink" title="4、启动项目"></a>4、启动项目</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/app/ruoyi-admin</span><br><span class="line">cp /data/gitee/RuoYi/ruoyi-admin/target/ruoyi-admin.jar /data/app/ruoyi-admin/ruoyi-admin.jar</span><br><span class="line">cd /data/app/ruoyi-admin/</span><br><span class="line">#后台启动项目</span><br><span class="line">nohup java -jar ruoyi-admin.jar &amp;</span><br><span class="line">#查看项目运行日志</span><br><span class="line">tail -f nohup.out</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631236.png" alt="img"></p><h4 id="5、访问项目"><a href="#5、访问项目" class="headerlink" title="5、访问项目"></a>5、访问项目</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://120.78.177.161:18081/</span><br></pre></td></tr></table></figure><p>如果访问不成功，请在服务器的安全组中开启18081端口。</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631367.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631755.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> 杂记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 若依 </tag>
            
            <tag> 部署 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
