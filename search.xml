<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Validation</title>
      <link href="/article/59f158be.html"/>
      <url>/article/59f158be.html</url>
      
        <content type="html"><![CDATA[<p><a href="https://beanvalidation.org/2.0/">beanvalidation</a>æ˜¯ä¸€ç§è§„èŒƒï¼Œ<a href="http://hibernate.org/validator/documentation/">hibernate-validator</a>æ˜¯å®ƒçš„æœ€ä½³å®ç°ã€‚</p><h2 id="å¸¸ç”¨æ³¨è§£"><a href="#å¸¸ç”¨æ³¨è§£" class="headerlink" title="å¸¸ç”¨æ³¨è§£"></a>å¸¸ç”¨æ³¨è§£</h2><p><code>beanvalidation</code> æ‰€æœ‰æ³¨è§£åœ¨ <code>javax.validation.constraints</code> åŒ…ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109101453612.png" alt="img"></p><p><code>hibernate-validator</code> æ‰€æœ‰æ³¨è§£åœ¨ <code>org.hibernate.validator.constraints</code> åŒ…ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109101453301.png" alt="img"></p><h2 id="å¸¸ç”¨æ³¨è§£è§£é‡Š"><a href="#å¸¸ç”¨æ³¨è§£è§£é‡Š" class="headerlink" title="å¸¸ç”¨æ³¨è§£è§£é‡Š"></a>å¸¸ç”¨æ³¨è§£è§£é‡Š</h2><table><thead><tr><th><strong>çº¦æŸæ³¨è§£</strong></th><th><strong>è¯¦ç»†ä¿¡æ¯</strong></th></tr></thead><tbody><tr><td><code>@Null</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º <code>null</code></td></tr><tr><td><code>@NotNull</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸ä¸º <code>null</code></td></tr><tr><td><code>@AssertTrue</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º <code>true</code></td></tr><tr><td><code>@AssertFalse</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º <code>false</code></td></tr><tr><td><code>@Min(value)</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼</td></tr><tr><td><code>@Max(value)</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼</td></tr><tr><td><code>@DecimalMin(value)</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼</td></tr><tr><td><code>@DecimalMax(value)</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼</td></tr><tr><td><code>@Size(max, min)</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…</td></tr><tr><td><code>@Digits (integer, fraction)</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»åœ¨å¯æ¥å—çš„èŒƒå›´å†…</td></tr><tr><td><code>@Past</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¥æœŸ</td></tr><tr><td><code>@Future</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¥æœŸ</td></tr><tr><td><code>@Pattern(value)</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼</td></tr><tr><td><code>@Email</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ç”µå­é‚®ç®±åœ°å€</td></tr><tr><td><code>@Length</code></td><td>è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…</td></tr><tr><td><code>@NotEmpty</code></td><td>è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„å¿…é¡»éç©º</td></tr><tr><td><code>@Range</code></td><td>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»åœ¨åˆé€‚çš„èŒƒå›´å†…</td></tr></tbody></table><h2 id="çº¦æŸä¸æ ¡éªŒå™¨ç±»çš„ç»‘å®šåŸç†"><a href="#çº¦æŸä¸æ ¡éªŒå™¨ç±»çš„ç»‘å®šåŸç†" class="headerlink" title="çº¦æŸä¸æ ¡éªŒå™¨ç±»çš„ç»‘å®šåŸç†"></a>çº¦æŸä¸æ ¡éªŒå™¨ç±»çš„ç»‘å®šåŸç†</h2><p>åœ¨ <code>org.hibernate.validator.internal.metadata.core.ConstraintHelper</code> ç±»ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109101453661.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109101454498.png" alt="img"></p><ul><li>ä»ä¸Šè¿°ä¸¤å¹…å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒNotEmptyæ³¨è§£å¯ä»¥æ ¡éªŒå­—ç¬¦ä¸²ï¼Œé›†åˆï¼ŒMapï¼Œæ•°ç»„ç±»å‹çš„å±æ€§ï¼Œè€Œä¸ºäº†æ»¡è¶³ä¸€ä¸ªæ³¨è§£å¯ä»¥æ ¡éªŒå¤šç§ç±»å‹çš„æ•°æ®ï¼Œæ‰€æœ‰éœ€è¦ä¸ºè¿™ä¸ªæ³¨è§£é€‚é…å¤šä¸ªå¯¹åº”çš„æ ¡éªŒå™¨ã€‚</li><li>æ³¨è§£åç§°æ˜¯xxxï¼Œé‚£ä¹ˆæ ¡éªŒå™¨çš„åç§°å°±æ˜¯xxxValidatorã€‚</li></ul><h2 id="è‡ªå®šä¹‰æ¶ˆæ¯æ¨¡æ¿"><a href="#è‡ªå®šä¹‰æ¶ˆæ¯æ¨¡æ¿" class="headerlink" title="è‡ªå®šä¹‰æ¶ˆæ¯æ¨¡æ¿"></a>è‡ªå®šä¹‰æ¶ˆæ¯æ¨¡æ¿</h2><p>æ¶ˆæ¯æ¨¡æ¿ä¸­å¯ä»¥ä½¿ç”¨ el è¡¨è¾¾å¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@NotNull(groups = &#123;Update.class&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;åå­—ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Min(value = 18, message = &quot;å¹´é¾„å°äº&#123;value&#125;,ä¸å¾—è¿›å…¥&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ†ç»„æ ¡éªŒ"><a href="#åˆ†ç»„æ ¡éªŒ" class="headerlink" title="åˆ†ç»„æ ¡éªŒ"></a>åˆ†ç»„æ ¡éªŒ</h2><p>æ³¨è§£ä¸Šä¸åŒºåˆ†ç»„çš„è¯ï¼Œä¼šä½¿ç”¨é»˜è®¤çš„ç»„ï¼š<code>javax.validation.groups.Default</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@NotNull(groups = &#123;Update.class&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;åå­—ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Min(value = 18, message = &quot;å¹´é¾„å°äº&#123;value&#125;,ä¸å¾—è¿›å…¥&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Insert</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Update</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç‰¹åˆ«æ³¨æ„çš„åœ°æ–¹<strong><strong>ï¼š</strong></strong>å¦‚æœä½¿ç”¨äº†æŸä¸ªç»„è¿›è¡Œæ ¡éªŒçš„è¯ï¼Œé‚£ä¹ˆé»˜è®¤çš„ç»„å°±ä¸ä¼šè¿›è¡Œæ ¡éªŒ****ã€‚</strong>å°±æ¯”å¦‚æ ¡éªŒ Update ç»„ï¼Œé‚£ä¹ˆå°±ç®— name åå­—ä¸ºç©ºä¹Ÿä¸ä¼šå†æ ¡éªŒã€‚å¦‚æœæƒ³åœ¨å¯¹æŸä¸ªç»„è¿›è¡Œæ ¡éªŒï¼Œé»˜è®¤çš„ç»„åŒæ—¶è¢«æ ¡éªŒçš„è¯ï¼Œå¯ä»¥è®© <strong>åˆ†ç»„æ¥å£ç»§æ‰¿ Default æ¥å£å³å¯****ã€‚</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@NotNull(groups = &#123;Update.class&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;åå­—ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Min(value = 18, message = &quot;å¹´é¾„å°äº&#123;value&#125;,ä¸å¾—è¿›å…¥&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Insert</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Update</span> <span class="keyword">extends</span> <span class="title">Default</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="çº§è”æ ¡éªŒ"><a href="#çº§è”æ ¡éªŒ" class="headerlink" title="çº§è”æ ¡éªŒ"></a>çº§è”æ ¡éªŒ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Grade</span> </span>&#123;</span><br><span class="line">    <span class="meta">@NotBlank</span></span><br><span class="line">    <span class="keyword">private</span> String no;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@NotNull(groups = &#123;Update.class&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;åå­—ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Min(value = 18, message = &quot;å¹´é¾„å°äº&#123;value&#125;,ä¸å¾—è¿›å…¥&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;å¹´çº§ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@Valid</span></span><br><span class="line">    <span class="keyword">private</span> Grade grade;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Insert</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Update</span> <span class="keyword">extends</span> <span class="title">Default</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>è¢«å¼•ç”¨å¯¹è±¡åŠ ä¸Š @valid æ³¨è§£æ‰èƒ½å®Œæˆçº§è”æ ¡éªŒ</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨æ ¡éªŒ User å¯¹è±¡é‡Œçš„å±æ€§çš„æ—¶å€™ï¼Œèƒ½ä¸€èµ·æ ¡éªŒ Grade å¯¹è±¡ã€‚</p><h2 id="è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™"><a href="#è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™" class="headerlink" title="è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™"></a>è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@NotNull(groups = &#123;Update.class&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;åå­—ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Min(value = 18, message = &quot;å¹´é¾„å°äº&#123;value&#125;,ä¸å¾—è¿›å…¥&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;å¹´çº§ä¸èƒ½ä¸ºç©º&quot;)</span></span><br><span class="line">    <span class="meta">@Valid</span></span><br><span class="line">    <span class="keyword">private</span> Grade grade;</span><br><span class="line">    <span class="meta">@UserStatus</span></span><br><span class="line">    <span class="keyword">private</span> Integer userStatus;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Insert</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Update</span> <span class="keyword">extends</span> <span class="title">Default</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Constraint(validatedBy = &#123;UserStatusValidator.class&#125;)</span></span><br><span class="line"><span class="meta">@Target(&#123;FIELD&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> UserStatus &#123;</span><br><span class="line">    <span class="function">String <span class="title">message</span><span class="params">()</span> <span class="keyword">default</span> &quot;ç”¨æˆ·çŠ¶æ€ä¸æ­£ç¡®ï¼Œå€¼å¿…é¡»åœ¨1001æˆ–è€…1002æˆ–è€…1003ä¸­&quot;</span>;</span><br><span class="line"></span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    Class&lt;? extends Payload&gt;[] payload() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserStatusValidator</span> <span class="keyword">implements</span> <span class="title">ConstraintValidator</span>&lt;<span class="title">UserStatus</span>, <span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(Integer value, ConstraintValidatorContext context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (value == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Arrays.asList(<span class="number">1001</span>, <span class="number">1002</span>, <span class="number">1003</span>).contains(value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç°æœ‰çš„çº¦æŸæ³¨è§£ä¸æ»¡è¶³å®é™…é¡¹ç›®éœ€è¦æ—¶ï¼Œå¯ä»¥ä»¿ç…§ç°æœ‰çš„ <code>NotEmpty </code> æ³¨è§£å’Œ <code>NotEmptyValidatorForArray</code> æ ¡éªŒå™¨è¿›è¡Œæ”¹é€ ä»¥ä¸‹ï¼Œå°±å¯ä»¥å®ç°è‡ªå·±çš„æ ¡éªŒè§„åˆ™ã€‚</p><h2 id="Validatedè‡ªåŠ¨æ ¡éªŒ"><a href="#Validatedè‡ªåŠ¨æ ¡éªŒ" class="headerlink" title="@Validatedè‡ªåŠ¨æ ¡éªŒ"></a>@Validatedè‡ªåŠ¨æ ¡éªŒ</h2><p>åœ¨ springboot ä¸­å¯ä»¥ä½¿ç”¨åœ¨æ§åˆ¶å™¨ä¸­ç»™æ¯ä¸ªéœ€è¦è¿›è¡Œæ ¡éªŒçš„æ–¹æ³•çš„å‚æ•°å‰åŠ ä¸Š <code>@Validated</code> æ³¨è§£ï¼Œåœ¨å‚æ•°æ ¡éªŒä¸é€šè¿‡çš„æ—¶å€™ä¼šè‡ªåŠ¨æŠ›å‡º <code>BindException</code> å¼‚å¸¸ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PutMapping</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">update</span><span class="params">(<span class="meta">@Validated(&#123;User.Update.class&#125;)</span> User user)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;æ›´æ–°æˆåŠŸï¼&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç»Ÿä¸€å¼‚å¸¸å¤„ç†"><a href="#ç»Ÿä¸€å¼‚å¸¸å¤„ç†" class="headerlink" title="ç»Ÿä¸€å¼‚å¸¸å¤„ç†"></a>ç»Ÿä¸€å¼‚å¸¸å¤„ç†</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java<span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(value = BindException.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RespBean <span class="title">entityException</span><span class="params">(BindException e)</span> </span>&#123;</span><br><span class="line">        String msg = e.getBindingResult().getFieldError().getDefaultMessage();</span><br><span class="line">        <span class="keyword">return</span>  RespBean.error(HttpStatus.BAD_REQUEST.value(), msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ‚è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> validation </tag>
            
            <tag> javaå¼€å‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webç«¯æ–‡ä»¶ç›´ä¼ é˜¿é‡ŒOSS</title>
      <link href="/article/7b44e484.html"/>
      <url>/article/7b44e484.html</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€STSä¸´æ—¶æˆæƒè®¿é—®OSS"><a href="#1ã€STSä¸´æ—¶æˆæƒè®¿é—®OSS" class="headerlink" title="1ã€STSä¸´æ—¶æˆæƒè®¿é—®OSS"></a>1ã€<a href="https://help.aliyun.com/document_detail/100624.htm?spm=a2c4g.11186623.2.5.64596d13Wa7CXp#concept-xzh-nzk-2gb">STSä¸´æ—¶æˆæƒè®¿é—®OSS</a></h2><p>OSS å¯ä»¥é€šè¿‡é˜¿é‡Œäº‘STSï¼ˆSecurity Token Serviceï¼‰è¿›è¡Œä¸´æ—¶æˆæƒè®¿é—®ã€‚é€šè¿‡STSï¼Œå¯ä»¥ä¸ºç¬¬ä¸‰æ–¹åº”ç”¨æˆ–å­ç”¨æˆ·ï¼ˆå³ç”¨æˆ·èº«ä»½ç”±è‡ªå·±ç®¡ç†çš„ç”¨æˆ·ï¼‰é¢å‘ä¸€ä¸ªè‡ªå®šä¹‰æ—¶æ•ˆå’Œæƒé™çš„è®¿é—®å‡­è¯ã€‚</p><h3 id="1ã€ä½¿ç”¨åœºæ™¯"><a href="#1ã€ä½¿ç”¨åœºæ™¯" class="headerlink" title="1ã€ä½¿ç”¨åœºæ™¯"></a>1ã€ä½¿ç”¨åœºæ™¯</h3><p>å¯¹äºæ‚¨æœ¬åœ°èº«ä»½ç³»ç»Ÿæ‰€ç®¡ç†çš„ç”¨æˆ·ï¼Œä¾‹å¦‚æ‚¨çš„Appçš„ç”¨æˆ·ã€æ‚¨çš„ä¼ä¸šæœ¬åœ°è´¦å·ã€ç¬¬ä¸‰æ–¹Appçš„ç”¨æˆ·ï¼Œå°†è¿™éƒ¨åˆ†ç”¨æˆ·ç§°ä¸ºè”ç›Ÿç”¨æˆ·ã€‚æ­¤å¤–ï¼Œè”ç›Ÿç”¨æˆ·è¿˜å¯ä»¥æ˜¯æ‚¨åˆ›å»ºçš„èƒ½è®¿é—®æ‚¨çš„é˜¿é‡Œäº‘èµ„æºåº”ç”¨ç¨‹åºçš„ç”¨æˆ·ã€‚è¿™äº›è”ç›Ÿç”¨æˆ·å¯èƒ½éœ€è¦ç›´æ¥è®¿é—®OSSèµ„æºã€‚</p><p>å¯¹äºè¿™éƒ¨åˆ†è”ç›Ÿç”¨æˆ·ï¼Œé€šè¿‡é˜¿é‡Œäº‘STSæœåŠ¡ä¸ºé˜¿é‡Œäº‘è´¦å·ï¼ˆæˆ–RAMç”¨æˆ·ï¼‰æä¾›ä¸´æ—¶è®¿é—®æƒé™ç®¡ç†ã€‚æ‚¨ä¸éœ€è¦é€éœ²äº‘è´¦å·ï¼ˆæˆ–RAMç”¨æˆ·ï¼‰çš„é•¿æœŸå¯†é’¥ï¼ˆå¦‚ç™»å½•å¯†ç ã€AccessKeyï¼‰ï¼Œåªéœ€è¦ç”Ÿæˆä¸€ä¸ªä¸´æ—¶è®¿é—®å‡­è¯ç»™è”ç›Ÿç”¨æˆ·ä½¿ç”¨å³å¯ã€‚è¿™ä¸ªå‡­è¯çš„è®¿é—®æƒé™åŠæœ‰æ•ˆæœŸé™éƒ½å¯ä»¥ç”±æ‚¨è‡ªå®šä¹‰ã€‚æ‚¨ä¸éœ€è¦å…³å¿ƒæƒé™æ’¤é”€é—®é¢˜ï¼Œä¸´æ—¶è®¿é—®å‡­è¯è¿‡æœŸåä¼šè‡ªåŠ¨å¤±æ•ˆã€‚</p><p>é€šè¿‡STSç”Ÿæˆçš„ä¸´æ—¶è®¿é—®å‡­è¯åŒ…æ‹¬å®‰å…¨ä»¤ç‰Œ ï¼ˆSecurityTokenï¼‰ã€ä¸´æ—¶è®¿é—®å¯†é’¥STS AKï¼ˆAccessKeyIdå’ŒAccessKeySecretï¼‰ã€‚ä½¿ç”¨AccessKeyæ–¹æ³•ä¸æ‚¨åœ¨ä½¿ç”¨é˜¿é‡Œäº‘è´¦æˆ·æˆ–RAMç”¨æˆ·AccessKeyå‘é€è¯·æ±‚æ—¶çš„æ–¹æ³•ç›¸åŒã€‚éœ€è¦æ³¨æ„çš„æ˜¯åœ¨æ¯ä¸ªå‘OSSå‘é€çš„è¯·æ±‚ä¸­å¿…é¡»æºå¸¦å®‰å…¨ä»¤ç‰Œã€‚</p><h3 id="2ã€å®ç°åŸç†"><a href="#2ã€å®ç°åŸç†" class="headerlink" title="2ã€å®ç°åŸç†"></a>2ã€å®ç°åŸç†</h3><p>ä»¥ä¸€ä¸ªç§»åŠ¨Appä¸¾ä¾‹ã€‚å‡è®¾ä½ æ˜¯ä¸€ä¸ªç§»åŠ¨Appå¼€å‘è€…ï¼Œæ‰“ç®—ä½¿ç”¨é˜¿é‡Œäº‘OSSæœåŠ¡æ¥ä¿å­˜Appçš„ç»ˆç«¯ç”¨æˆ·æ•°æ®ï¼Œå¹¶ä¸”ä¿è¯æ¯ä¸ªAppç”¨æˆ·ä¹‹é—´çš„æ•°æ®éš”ç¦»ï¼Œæ”¾ç½®ä¸€ä¸ªAppç”¨æˆ·è·å–åˆ°å…¶ä»–Appç”¨æˆ·çš„æ•°æ®ã€‚ä½ å¯ä»¥ä½¿ç”¨STSæˆæƒç”¨æˆ·ç›´æ¥è®¿é—®OSSã€‚</p><p>ä½¿ç”¨STSæˆæƒç”¨æˆ·ç›´æ¥è®¿é—®OSSçš„æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081038954.png" alt="img"></p><ol><li>Appç”¨æˆ·ç™»å½•ã€‚Appç”¨æˆ·å’Œäº‘è´¦å·æ— å…³ï¼Œå®ƒæ˜¯Appçš„ç»ˆç«¯ç”¨æˆ·ï¼ŒAppæœåŠ¡å™¨æ”¯æŒAppç”¨æˆ·ç™»å½•ã€‚å¯¹äºæ¯ä¸ªæœ‰æ•ˆçš„Appç”¨æˆ·æ¥è¯´ï¼Œéœ€è¦AppæœåŠ¡å™¨èƒ½å®šä¹‰å‡ºæ¯ä¸ªAppç”¨æˆ·çš„æœ€å°è®¿é—®æƒé™ã€‚</li><li>AppæœåŠ¡å™¨è¯·æ±‚STSæœåŠ¡è·å–ä¸€ä¸ªå®‰å…¨ä»¤ç‰Œï¼ˆSecurityTokenï¼‰ã€‚åœ¨è°ƒç”¨STSä¹‹å‰ï¼ŒAppæœåŠ¡å™¨éœ€è¦ç¡®å®šAppç”¨æˆ·çš„æœ€å°è®¿é—®æƒé™ï¼ˆç”¨RAM Policyæ¥è‡ªå®šä¹‰æˆæƒç­–ç•¥ï¼‰ä»¥åŠå‡­è¯çš„è¿‡æœŸæ—¶é—´ã€‚ç„¶åé€šè¿‡æ‰®æ¼”è§’è‰²ï¼ˆAssumeRoleï¼‰æ¥è·å–ä¸€ä¸ªä»£è¡¨è§’è‰²èº«ä»½çš„å®‰å…¨ä»¤ç‰Œï¼ˆSecurityTokenï¼‰ã€‚</li><li>STSè¿”å›ç»™AppæœåŠ¡å™¨ä¸€ä¸ªä¸´æ—¶è®¿é—®å‡­è¯ï¼ŒåŒ…æ‹¬ä¸€ä¸ªå®‰å…¨ä»¤ç‰Œï¼ˆSecurityTokenï¼‰ã€ä¸´æ—¶è®¿é—®å¯†é’¥ï¼ˆAccessKeyIdå’ŒAccessKeySecretï¼‰ä»¥åŠè¿‡æœŸæ—¶é—´ã€‚</li><li>AppæœåŠ¡å™¨å°†ä¸´æ—¶è®¿é—®å‡­è¯è¿”å›ç»™Appå®¢æˆ·ç«¯ï¼ŒAppå®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜è¿™ä¸ªå‡­è¯ã€‚å½“å‡­è¯å¤±æ•ˆæ—¶ï¼ŒAppå®¢æˆ·ç«¯éœ€è¦å‘AppæœåŠ¡å™¨ç”³è¯·æ–°çš„ä¸´æ—¶è®¿é—®å‡­è¯ã€‚ä¾‹å¦‚ï¼Œä¸´æ—¶è®¿é—®å‡­è¯æœ‰æ•ˆæœŸä¸º1å°æ—¶ï¼Œé‚£ä¹ˆAppå®¢æˆ·ç«¯å¯ä»¥æ¯30åˆ†é’Ÿå‘AppæœåŠ¡å™¨è¯·æ±‚æ›´æ–°ä¸´æ—¶è®¿é—®å‡­è¯ã€‚</li><li>Appå®¢æˆ·ç«¯ä½¿ç”¨æœ¬åœ°ç¼“å­˜çš„ä¸´æ—¶è®¿é—®å‡­è¯å»è¯·æ±‚OSS APIã€‚OSSæ”¶åˆ°è®¿é—®è¯·æ±‚åï¼Œä¼šé€šè¿‡STSæœåŠ¡æ¥éªŒè¯è®¿é—®å‡­è¯ï¼Œæ­£ç¡®å“åº”ç”¨æˆ·è¯·æ±‚ã€‚</li></ol><h3 id="3ã€æ“ä½œæ­¥éª¤"><a href="#3ã€æ“ä½œæ­¥éª¤" class="headerlink" title="3ã€æ“ä½œæ­¥éª¤"></a>3ã€æ“ä½œæ­¥éª¤</h3><h4 id="1ã€åˆ›å»ºå­è´¦å·"><a href="#1ã€åˆ›å»ºå­è´¦å·" class="headerlink" title="1ã€åˆ›å»ºå­è´¦å·"></a>1ã€åˆ›å»ºå­è´¦å·</h4><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081039885.png" alt="img"></p><p>å¤åˆ¶ä¿å­˜ä¸€ä¸‹åˆ›å»ºç”¨æˆ·çš„accessKeyIdå’ŒaccessKeySecretï¼Œåé¢ä»£ç ä¸­ä¼šç”¨åˆ°ï¼Œç„¶åç‚¹å‡»æ·»åŠ æƒé™ï¼Œä¸ºå…¶æ·»åŠ  <code>AliyunSTSAssumeRoleAccess</code> æƒé™ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081038994.png" alt="img"></p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081038972.png" alt="img" style="zoom:50%;" /><h4 id="2ã€åˆ›å»ºæƒé™ç­–ç•¥"><a href="#2ã€åˆ›å»ºæƒé™ç­–ç•¥" class="headerlink" title="2ã€åˆ›å»ºæƒé™ç­–ç•¥"></a>2ã€åˆ›å»ºæƒé™ç­–ç•¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;Version&quot;: &quot;1&quot;,</span><br><span class="line">    &quot;Statement&quot;: [</span><br><span class="line">     &#123;</span><br><span class="line">           &quot;Effect&quot;: &quot;Allow&quot;,</span><br><span class="line">           &quot;Action&quot;: [</span><br><span class="line">             &quot;oss:PutObject&quot;</span><br><span class="line">           ],</span><br><span class="line">           &quot;Resource&quot;: [</span><br><span class="line">             &quot;acs:oss:*:*:bucketName&quot;,</span><br><span class="line">             &quot;acs:oss:*:*:bucketName/*&quot;</span><br><span class="line">           ]</span><br><span class="line">     &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081039045.png" alt="img"></p><h4 id="3ã€åˆ›å»ºè§’è‰²å¹¶è®°å½•è§’è‰²ARN"><a href="#3ã€åˆ›å»ºè§’è‰²å¹¶è®°å½•è§’è‰²ARN" class="headerlink" title="3ã€åˆ›å»ºè§’è‰²å¹¶è®°å½•è§’è‰²ARN"></a>3ã€åˆ›å»ºè§’è‰²å¹¶è®°å½•è§’è‰²ARN</h4><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081038985.png" alt="img"></p><p>ä¸ºåˆ›å»ºçš„è§’è‰²æ·»åŠ ç¬¬äºŒæ­¥åˆ›å»ºçš„è‡ªå®šä¹‰æƒé™ç­–ç•¥ï¼š</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081038156.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081038296.png" alt="img"></p><p>å¤åˆ¶ä¿å­˜åˆ›å»ºè§’è‰²çš„ARNï¼Œåé¢ä»£ç ä¸­ç”¨åˆ°ï¼š</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081039056.png" alt="img"></p><h4 id="4ã€è°ƒç”¨STSæœåŠ¡æ¥å£AssumeRoleè·å–ä¸´æ—¶è®¿é—®å‡­è¯"><a href="#4ã€è°ƒç”¨STSæœåŠ¡æ¥å£AssumeRoleè·å–ä¸´æ—¶è®¿é—®å‡­è¯" class="headerlink" title="4ã€è°ƒç”¨STSæœåŠ¡æ¥å£AssumeRoleè·å–ä¸´æ—¶è®¿é—®å‡­è¯"></a>4ã€è°ƒç”¨STSæœåŠ¡æ¥å£<a href="https://help.aliyun.com/document_detail/28763.htm#reference-clc-3sv-xdb">AssumeRole</a>è·å–ä¸´æ—¶è®¿é—®å‡­è¯</h4><h5 id="1ã€pom-xmlæ–‡ä»¶æ·»åŠ ä¾èµ–"><a href="#1ã€pom-xmlæ–‡ä»¶æ·»åŠ ä¾èµ–" class="headerlink" title="1ã€pom.xmlæ–‡ä»¶æ·»åŠ ä¾èµ–"></a>1ã€pom.xmlæ–‡ä»¶æ·»åŠ ä¾èµ–</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.aliyun&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;aliyun-java-sdk-sts&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.0.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.aliyun&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;aliyun-java-sdk-core&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;4.4.6&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h5 id="2ã€åç«¯ä»£ç å®ç°"><a href="#2ã€åç«¯ä»£ç å®ç°" class="headerlink" title="2ã€åç«¯ä»£ç å®ç°"></a>2ã€åç«¯ä»£ç å®ç°</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">@ConfigurationProperties(prefix = &quot;ali.oss&quot;)</span><br><span class="line">@Data</span><br><span class="line">public class AliOssConfig &#123;</span><br><span class="line">    private String endpoint;</span><br><span class="line">    private String accessKeyId;</span><br><span class="line">    private String accessKeySecret;</span><br><span class="line">    private String roleArn;</span><br><span class="line">    private String regionId;</span><br><span class="line">    private String bucket;</span><br><span class="line">&#125;</span><br><span class="line">ali:</span><br><span class="line">  oss:</span><br><span class="line">    endpoint: oss-cn-shenzhen.aliyuncs.com</span><br><span class="line">    access-key-id: ç”¨æˆ·çš„accessKeyId</span><br><span class="line">    access-key-secret: ç”¨æˆ·çš„accessKeySecret</span><br><span class="line">    role-arn: è§’è‰²çš„ARN</span><br><span class="line">    region-id: cn-shenzhen</span><br><span class="line">    bucket: best-favorites</span><br></pre></td></tr></table></figure><p>è°ƒç”¨<a href="https://help.aliyun.com/document_detail/28763.htm#reference-clc-3sv-xdb">AssumeRole</a>æ¥å£ä¹‹åè¿”å›ç»™å‰ç«¯çš„å¯¹è±¡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">@Builder</span><br><span class="line">public class AliOssTokenVo &#123;</span><br><span class="line">    private String region;</span><br><span class="line">    private String accessKeyId;</span><br><span class="line">    private String accessKeySecret;</span><br><span class="line">    private String stsToken;</span><br><span class="line">    private String bucket;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è·å–ä¸´æ—¶è®¿é—®å‡­è¯çš„æ–¹æ³•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> @Override</span><br><span class="line">public AliOssTokenVo getOssToken() throws ClientException &#123;</span><br><span class="line">    IClientProfile profile = DefaultProfile.getProfile(aliOssConfig.getRegionId(), aliOssConfig.getAccessKeyId(), aliOssConfig.getAccessKeySecret());</span><br><span class="line">    DefaultAcsClient client = new DefaultAcsClient(profile);</span><br><span class="line">    final AssumeRoleRequest request = new AssumeRoleRequest();</span><br><span class="line">    request.setRoleArn(aliOssConfig.getRoleArn());</span><br><span class="line">    request.setRoleSessionName(&quot;best-favorites&quot;);</span><br><span class="line">    request.setDurationSeconds(1000L);</span><br><span class="line">    AssumeRoleResponse response = client.getAcsResponse(request);</span><br><span class="line">    AssumeRoleResponse.Credentials credentials = response.getCredentials();</span><br><span class="line">    String accessKeyId = credentials.getAccessKeyId();</span><br><span class="line">    String accessKeySecret = credentials.getAccessKeySecret();</span><br><span class="line">    String securityToken = credentials.getSecurityToken();</span><br><span class="line">    return AliOssTokenVo.builder()</span><br><span class="line">        .accessKeyId(accessKeyId)</span><br><span class="line">        .accessKeySecret(accessKeySecret)</span><br><span class="line">        .stsToken(securityToken)</span><br><span class="line">        .region(&quot;oss-&quot; + aliOssConfig.getRegionId())</span><br><span class="line">        .bucket(aliOssConfig.getBucket())</span><br><span class="line">        .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3ã€å‰ç«¯ä»£ç å®ç°"><a href="#3ã€å‰ç«¯ä»£ç å®ç°" class="headerlink" title="3ã€å‰ç«¯ä»£ç å®ç°"></a>3ã€å‰ç«¯ä»£ç å®ç°</h5><p>apiï¼Œè°ƒç”¨åç«¯æ¥å£è·å–ä¸´æ—¶è®¿é—®å‡­è¯ossToken</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import service from &#x27;@/utils/request&#x27;;</span><br><span class="line"></span><br><span class="line">export const getOssToken = () =&gt; service.get(&#x27;/ali-oss/token&#x27;);</span><br></pre></td></tr></table></figure><p>store/modules/ossæ¨¡å—</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import &#123; getOssToken &#125; from &#x27;@/api/business&#x27;;</span><br><span class="line"></span><br><span class="line">const oss = &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    accessKeyId: &#x27;&#x27;,</span><br><span class="line">    accessKeySecret: &#x27;&#x27;,</span><br><span class="line">    stsToken: &#x27;&#x27;,</span><br><span class="line">    region: &#x27;&#x27;,</span><br><span class="line">    bucket: &#x27;&#x27;,</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    SET_OSS_TOKEN: (state, &#123; accessKeyId, accessKeySecret, stsToken, region, bucket &#125;) =&gt; &#123;</span><br><span class="line">      state.accessKeyId = accessKeyId;</span><br><span class="line">      state.accessKeySecret = accessKeySecret;</span><br><span class="line">      state.stsToken = stsToken;</span><br><span class="line">      state.region = region;</span><br><span class="line">      state.bucket = bucket;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    GetOssToken(&#123; commit &#125;) &#123;</span><br><span class="line">      return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        getOssToken()</span><br><span class="line">          .then(res =&gt; &#123;</span><br><span class="line">            const ossToken = res.result;</span><br><span class="line">            commit(&#x27;SET_OSS_TOKEN&#x27;, ossToken);</span><br><span class="line">            resolve(ossToken);</span><br><span class="line">          &#125;)</span><br><span class="line">          .catch(error =&gt; &#123;</span><br><span class="line">            reject(error);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default oss;</span><br></pre></td></tr></table></figure><p>ä¸Šä¼ ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;clearfix&quot;&gt;</span><br><span class="line">  &lt;a-upload</span><br><span class="line">            list-type=&quot;picture-card&quot;</span><br><span class="line">            :file-list=&quot;fileList&quot;</span><br><span class="line">            :before-upload=&quot;beforeUpload&quot;</span><br><span class="line">            :custom-request=&quot;customRequest&quot;</span><br><span class="line">            @preview=&quot;handlePreview&quot;</span><br><span class="line">            @change=&quot;handleChange&quot;</span><br><span class="line">            &gt;</span><br><span class="line">    &lt;div v-if=&quot;fileList.length &lt; 1&quot;&gt;</span><br><span class="line">      &lt;a-icon type=&quot;plus&quot; /&gt;</span><br><span class="line">      &lt;div class=&quot;ant-upload-text&quot;&gt;</span><br><span class="line">        Upload</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/a-upload&gt;</span><br><span class="line">  &lt;a-modal :visible=&quot;previewVisible&quot; :footer=&quot;null&quot; @cancel=&quot;handleCancel&quot;&gt;</span><br><span class="line">    &lt;img alt=&quot;example&quot; style=&quot;width: 100%&quot; :src=&quot;previewImage&quot; /&gt;</span><br><span class="line">  &lt;/a-modal&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">beforeUpload(file) &#123;</span><br><span class="line">  const isJpgOrPng = file.type === &#x27;image/jpeg&#x27; || file.type === &#x27;image/png&#x27;;</span><br><span class="line">  if (!isJpgOrPng) &#123;</span><br><span class="line">    this.$message.error(&#x27;åªèƒ½ä¸Šä¼ å›¾ç‰‡ï¼&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">  const isLt10M = file.size / 1024 / 1024 &lt; 10;</span><br><span class="line">  if (!isLt10M) &#123;</span><br><span class="line">    this.$message.error(&#x27;ä¸Šä¼ å›¾ç‰‡å¿…é¡»å°äº10Mï¼&#x27;);</span><br><span class="line">  &#125;</span><br><span class="line">  return isJpgOrPng &amp;&amp; isLt10M;</span><br><span class="line">&#125;,</span><br><span class="line">  async handleUpload(&#123; file &#125;) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">      let ossToken = await this.$store.dispatch(&#x27;GetOssToken&#x27;);</span><br><span class="line">      const client = new OSS(&#123;</span><br><span class="line">        accessKeyId: ossToken.accessKeyId,</span><br><span class="line">        accessKeySecret: ossToken.accessKeySecret,</span><br><span class="line">        stsToken: ossToken.stsToken,</span><br><span class="line">        region: ossToken.region,</span><br><span class="line">        bucket: ossToken.bucket,</span><br><span class="line">      &#125;);</span><br><span class="line">      let result = await client.put(file.name, file);</span><br><span class="line">      console.log(&#x27;result:&#x27;, result);</span><br><span class="line">      file.url = result.url;</span><br><span class="line">      this.fileList = [...this.fileList, file];</span><br><span class="line">      this.$emit(&#x27;uploadSuccess&#x27;, file.url);</span><br><span class="line">      this.$message.success(&#x27;æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼&#x27;);</span><br><span class="line">    &#125; catch (e) &#123;</span><br><span class="line">      console.log(e);</span><br><span class="line">      this.$message.error(&#x27;æ–‡ä»¶ä¸Šä¼ å¤±è´¥ï¼&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>ç”±äºæ˜¯ä½¿ç”¨webç«¯ç›´ä¼ ï¼Œç‚¹å‡»ä¸Šä¼ ä¹‹åå¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼Œè¯´æ˜é˜¿é‡Œäº‘osséœ€è¦é…ç½®ä¸€ä¸‹<strong>è·¨åŸŸè®¿é—®</strong></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081039833.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081038600.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081038101.png" alt="img"></p><p>ç‚¹å‡»ç¡®å®šä¹‹åï¼Œé‡æ–°ä¸Šä¼ ï¼Œå¯ä»¥çœ‹åˆ°è¿™æ—¶å°±å·²ç»ä¸Šä¼ æˆåŠŸï¼ğŸ¤—ğŸ¤—ğŸ¤—</p>]]></content>
      
      
      <categories>
          
          <category> æ‚è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaå¼€å‘ </tag>
            
            <tag> æ¡ˆä¾‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åå°„</title>
      <link href="/article/7af799fd.html"/>
      <url>/article/7af799fd.html</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€åå°„æœºåˆ¶"><a href="#1ã€åå°„æœºåˆ¶" class="headerlink" title="1ã€åå°„æœºåˆ¶"></a>1ã€åå°„æœºåˆ¶</h2><h3 id="1ã€Java-Reflection"><a href="#1ã€Java-Reflection" class="headerlink" title="1ã€Java Reflection"></a>1ã€Java Reflection</h3><ol><li>åå°„è¢«è§†ä¸º<strong>åŠ¨æ€è¯­è¨€</strong>çš„å…³é”®ï¼Œåå°„æœºåˆ¶å…è®¸ç¨‹åºåœ¨æ‰§è¡ŒæœŸé—´å€ŸåŠ©äº<strong>Reflection API</strong>å–å¾—ä»»ä½•ç±»çš„å†…éƒ¨ä¿¡æ¯(æ¯”å¦‚ï¼šæˆå‘˜å˜é‡ï¼Œæ„é€ å™¨ï¼Œæˆå‘˜æ–¹æ³•)ï¼Œå¹¶èƒ½ç›´æ¥æ“ä½œä»»æ„å¯¹è±¡çš„å†…éƒ¨å±æ€§åŠæ–¹æ³•ã€‚</li><li>åŠ è½½å®Œç±»ä¹‹åï¼Œåœ¨å †å†…å­˜ä¸­å°±äº§ç”Ÿäº†ä¸€ä¸ª<strong>Class</strong>ç±»å‹çš„å¯¹è±¡(<strong>ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªClasså¯¹è±¡)<strong>ï¼Œè¿™ä¸ªå¯¹è±¡å°±åŒ…å«äº†å®Œæ•´çš„ç±»çš„ç»“æ„ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå¯¹è±¡çœ‹åˆ°ç±»çš„ç»“æ„ã€‚è¿™ä¸ªå¯¹è±¡å°±åƒä¸€é¢é•œå­ï¼Œé€è¿‡è¿™ä¸ªé•œå­çœ‹åˆ°ç±»çš„ç»“æ„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å½¢è±¡çš„ç§°ä¹‹ä¸ºï¼š</strong>åå°„</strong>ã€‚</li></ol><h3 id="2ã€åå°„æœºåˆ¶åŸç†å›¾"><a href="#2ã€åå°„æœºåˆ¶åŸç†å›¾" class="headerlink" title="2ã€åå°„æœºåˆ¶åŸç†å›¾"></a>2ã€åå°„æœºåˆ¶åŸç†å›¾</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109100955218.png" alt="img"></p><h3 id="3ã€Javaåå°„æœºåˆ¶æä¾›çš„åŠŸèƒ½ï¼š"><a href="#3ã€Javaåå°„æœºåˆ¶æä¾›çš„åŠŸèƒ½ï¼š" class="headerlink" title="3ã€Javaåå°„æœºåˆ¶æä¾›çš„åŠŸèƒ½ï¼š"></a>3ã€Javaåå°„æœºåˆ¶æä¾›çš„åŠŸèƒ½ï¼š</h3><ol><li><p>åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±»</p></li><li><p>åœ¨è¿è¡Œæ—¶æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡</p></li><li><p>åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•</p></li><li><p>åœ¨è¿è¡Œæ—¶è·å–æ³›å‹ä¿¡æ¯</p></li><li><p>åœ¨è¿è¡Œæ—¶è°ƒç”¨ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•</p></li><li><p>åœ¨è¿è¡Œæ—¶å¤„ç†æ³¨è§£</p></li><li><p>ç”ŸæˆåŠ¨æ€ä»£ç†</p></li></ol><h3 id="4ã€åå°„ç›¸å…³çš„ä¸»è¦ç±»"><a href="#4ã€åå°„ç›¸å…³çš„ä¸»è¦ç±»" class="headerlink" title="4ã€åå°„ç›¸å…³çš„ä¸»è¦ç±»"></a>4ã€åå°„ç›¸å…³çš„ä¸»è¦ç±»</h3><ol><li><p><strong>java.lang.Class</strong>ï¼šä»£è¡¨ä¸€ä¸ªç±»ï¼Œ<strong>Class</strong>å¯¹è±¡è¡¨ç¤ºæŸä¸ªç±»åŠ è½½ååœ¨å †å†…å­˜ä¸­çš„å¯¹è±¡</p></li><li><p><strong>java.lang.reflect.Method</strong>ï¼šä»£è¡¨ç±»çš„æ–¹æ³•ï¼Œ<strong>Method</strong>å¯¹è±¡è¡¨ç¤ºæŸä¸ªç±»çš„æ–¹æ³•</p></li><li><p><strong>java.lang.reflect.Field</strong>ï¼šä»£è¡¨ç±»çš„æˆå‘˜å˜é‡ï¼Œ<strong>Field</strong>å¯¹è±¡è¡¨ç¤ºæŸä¸ªç±»çš„æˆå‘˜å˜é‡</p></li><li><p><strong>java.lang.reflect.Constructor****ï¼š</strong>ä»£è¡¨ç±»çš„æ„é€ æ–¹æ³•ï¼Œ<strong>Constructor</strong>å¯¹è±¡è¡¨ç¤ºæ„é€ å™¨</p></li></ol><h3 id="5ã€åå°„ä¼˜ç‚¹å’Œç¼ºç‚¹"><a href="#5ã€åå°„ä¼˜ç‚¹å’Œç¼ºç‚¹" class="headerlink" title="5ã€åå°„ä¼˜ç‚¹å’Œç¼ºç‚¹"></a>5ã€åå°„ä¼˜ç‚¹å’Œç¼ºç‚¹</h3><ul><li>ä¼˜ç‚¹ï¼šå¯ä»¥åŠ¨æ€çš„åˆ›å»ºå’Œä½¿ç”¨å¯¹è±¡ï¼ˆå°±æ˜¯æ¡†æ¶åº•å±‚æ ¸å¿ƒï¼‰ï¼Œä½¿ç”¨çµæ´»ï¼Œæ²¡æœ‰åå°„æœºåˆ¶ï¼Œæ¡†æ¶æŠ€æœ¯å°±å¤±å»åº•å±‚æ”¯æ’‘</li><li>ç¼ºç‚¹ï¼šä½¿ç”¨åå°„åŸºæœ¬æ˜¯è§£é‡Šæ‰§è¡Œï¼Œå¯¹æ‰§è¡Œé€Ÿåº¦æœ‰å½±å“</li></ul><h3 id="6ã€åå°„è°ƒç”¨ä¼˜åŒ–-å…³é—­è®¿é—®æ£€æŸ¥"><a href="#6ã€åå°„è°ƒç”¨ä¼˜åŒ–-å…³é—­è®¿é—®æ£€æŸ¥" class="headerlink" title="6ã€åå°„è°ƒç”¨ä¼˜åŒ–-å…³é—­è®¿é—®æ£€æŸ¥"></a>6ã€åå°„è°ƒç”¨ä¼˜åŒ–-å…³é—­è®¿é—®æ£€æŸ¥</h3><ol><li><p><strong>Methodã€Fieldã€Constructor</strong>å¯¹è±¡éƒ½æœ‰<code>setAccessible()</code>æ–¹æ³•</p></li><li><p><code>setAccessible()</code>ä½œç”¨æ˜¯å¯åŠ¨å’Œç¦ç”¨è®¿é—®å®‰å…¨æ£€æŸ¥å¼€å…³</p></li><li><p>å‚æ•°ä¸º<strong>true</strong>è¡¨ç¤ºï¼šåå°„çš„å¯¹è±¡åœ¨ä½¿ç”¨æ—¶å–æ¶ˆè®¿é—®æ£€æŸ¥ï¼Œæé«˜åå°„çš„æ•ˆç‡ï¼›å‚æ•°ä¸º<strong>false</strong>è¡¨ç¤ºï¼šåå°„çš„å¯¹è±¡æ‰§è¡Œè®¿é—®æ£€æŸ¥</p></li></ol><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109100955828.png" alt="img"></p><h2 id="2ã€ç†è§£Classç±»å¹¶è·å–Classå®ä¾‹"><a href="#2ã€ç†è§£Classç±»å¹¶è·å–Classå®ä¾‹" class="headerlink" title="2ã€ç†è§£Classç±»å¹¶è·å–Classå®ä¾‹"></a>2ã€ç†è§£Classç±»å¹¶è·å–Classå®ä¾‹</h2><h3 id="1ã€Classç±»"><a href="#1ã€Classç±»" class="headerlink" title="1ã€Classç±»"></a>1ã€Classç±»</h3><p>å¯¹è±¡ç…§é•œå­åå¯ä»¥å¾—åˆ°çš„ä¿¡æ¯ï¼šæŸä¸ªç±»çš„å±æ€§ã€æ–¹æ³•å’Œæ„é€ å™¨ã€æŸä¸ªç±»åˆ°åº•å®ç°äº†å“ªäº›æ¥å£ã€‚å¯¹äºæ¯ä¸ªç±»è€Œè¨€ï¼Œ<strong>JRE</strong>éƒ½ä¸ºå…¶ä¿ç•™ä¸€ä¸ªä¸å˜çš„<strong>Class</strong>ç±»å‹çš„å¯¹è±¡ã€‚ä¸€ä¸ª<strong>Class</strong>å¯¹è±¡åŒ…å«äº†æŸä¸ªç‰¹å®šç»“æ„(<strong>class/inteface/enum.annotation/primitive type/void/[]</strong>)<strong>çš„</strong>æœ‰å…³ä¿¡æ¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public final class Class&lt;T&gt; implements java.io.Serializable,</span><br><span class="line">                              GenericDeclaration,</span><br><span class="line">                              Type,</span><br><span class="line">                              AnnotatedElement &#123;</span><br><span class="line">    private static final int ANNOTATION= 0x00002000;</span><br><span class="line">    private static final int ENUM      = 0x00004000;</span><br><span class="line">    private static final int SYNTHETIC = 0x00001000;</span><br><span class="line"></span><br><span class="line">    private static native void registerNatives();</span><br><span class="line">    static &#123;</span><br><span class="line">        registerNatives();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">     * Private constructor. Only the Java Virtual Machine creates Class objects.   //ç§æœ‰æ„é€ å™¨ï¼Œåªæœ‰JVMæ‰èƒ½è°ƒç”¨åˆ›å»ºClasså¯¹è±¡</span><br><span class="line">     * This constructor is not used and prevents the default constructor being</span><br><span class="line">     * generated.</span><br><span class="line">     */</span><br><span class="line">    private Class(ClassLoader loader) &#123;</span><br><span class="line">        // Initialize final field for classLoader.  The initialization value of non-null</span><br><span class="line">        // prevents future JIT optimizations from assuming this final field is null.</span><br><span class="line">        classLoader = loader;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><ul><li><p><strong>Class</strong>æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªç±»ï¼Œå› æ­¤ä¹Ÿç»§æ‰¿<strong>Object</strong>ç±»</p></li><li><p><strong>Class</strong>ç±»åªå­˜åœ¨ç§æœ‰æ„é€ å‡½æ•°ï¼Œå› æ­¤<strong>Class</strong>å¯¹è±¡åªèƒ½ç”±JVMåˆ›å»ºå’ŒåŠ è½½</p></li><li><p>å¯¹äºæŸä¸ªç±»çš„<strong>Class</strong>å¯¹è±¡ï¼Œåœ¨å†…å­˜åªæœ‰ä¸€ä»½ï¼Œå› ä¸ºç±»åªåŠ è½½ä¸€æ¬¡</p></li><li><p>æ¯ä¸ªç±»çš„å®ä¾‹éƒ½ä¼šè®°å¾—è‡ªå·±æ˜¯ç”±å“ªä¸ª<strong>Class</strong>å®ä¾‹æ‰€ç”Ÿæˆ</p></li><li><p>é€šè¿‡<strong>Class</strong>å¯ä»¥å®Œæ•´åœ°å¾—åˆ°ä¸€ä¸ªç±»ä¸­åœ°æ‰€æœ‰è¢«åŠ è½½çš„ç»“æ„</p></li><li><p><strong>Class</strong>å¯¹è±¡å­˜æ”¾åœ¨å †å†…å­˜ä¸­</p></li><li><p>ç±»çš„å­—èŠ‚ç äºŒè¿›åˆ¶æ•°æ®å­˜æ”¾åœ¨æ–¹æ³•åŒºä¸­ï¼Œæœ‰çš„åœ°æ–¹æˆä¸ºç±»çš„å…ƒæ•°æ®(åŒ…æ‹¬ï¼šæ–¹æ³•ï¼Œå˜é‡åï¼Œæ–¹æ³•åï¼Œè®¿é—®æƒé™ç­‰)</p></li><li><p><strong>Class</strong>ç±»æ˜¯<strong>Reflection</strong>çš„æ ¹æºï¼Œé’ˆå¯¹ä»»ä½•ä½ æƒ³åŠ¨æ€åŠ è½½ã€è¿è¡Œçš„ç±»ï¼Œå”¯æœ‰å…ˆè·å¾—ç›¸åº”çš„<strong>Class</strong>å¯¹è±¡</p></li></ul><h3 id="2ã€å¸¸ç”¨æ–¹æ³•"><a href="#2ã€å¸¸ç”¨æ–¹æ³•" class="headerlink" title="2ã€å¸¸ç”¨æ–¹æ³•"></a>2ã€å¸¸ç”¨æ–¹æ³•</h3><table><thead><tr><th><strong>æ–¹æ³•å</strong></th><th><strong>åŠŸèƒ½è¯´æ˜</strong></th></tr></thead><tbody><tr><td>static Class forName(String name)</td><td>è¿”å›æ‰§æŒ‡å®šç±»åçš„Classå¯¹è±¡</td></tr><tr><td>Object newInstance()</td><td>è°ƒç”¨ç¼ºçœæ„é€ å‡½æ•°ï¼Œè¿”å›è¯¥Classå¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹</td></tr><tr><td>getName()</td><td>è¿”å›æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„å®ä½“(ç±»|æ¥å£|æ•°ç»„ç±»|åŸºæœ¬ç±»å‹|void)åç§°</td></tr><tr><td>Class[] getInterfaces()</td><td>è·å–å½“å‰Classå¯¹è±¡çš„æ¥å£</td></tr><tr><td>ClassLoder getClassLoder()</td><td>è¿”å›è¯¥ç±»çš„ç±»åŠ è½½å™¨</td></tr><tr><td>Class getSuperClass()</td><td>è¿”å›è¡¨ç¤ºæ­¤Classæ‰€è¡¨ç¤ºçš„å®ä½“çš„è¶…ç±»çš„Class</td></tr><tr><td>Constructor[] getConstructors()</td><td>è¿”å›ä¸€ä¸ªåŒ…å«æŸäº›Constructorå¯¹è±¡çš„æ•°ç»„</td></tr><tr><td>Field[] getDeclaredFields()</td><td>è¿”å›Fieldå¯¹è±¡çš„ä¸€ä¸ªæ•°ç»„</td></tr><tr><td>Method getMethod(String name, Classâ€¦ paramTypes)</td><td>è¿”å›ä¸€ä¸ªMethodå¯¹è±¡ï¼Œæ­¤å¯¹è±¡çš„å½¢å‚ç±»å‹ä¸ºparamType</td></tr></tbody></table><h3 id="3ã€å“ªäº›ç±»å‹æœ‰Classå¯¹è±¡"><a href="#3ã€å“ªäº›ç±»å‹æœ‰Classå¯¹è±¡" class="headerlink" title="3ã€å“ªäº›ç±»å‹æœ‰Classå¯¹è±¡"></a>3ã€å“ªäº›ç±»å‹æœ‰Classå¯¹è±¡</h3><ol><li><p>å¤–éƒ¨ç±»ã€æˆå‘˜å†…éƒ¨ç±»ã€é™æ€å†…éƒ¨ç±»ã€å±€éƒ¨å†…éƒ¨ç±»ã€åŒ¿åå†…éƒ¨ç±»</p></li><li><p>æ¥å£</p></li><li><p>æ•°ç»„</p></li><li><p>æšä¸¾</p></li><li><p>æ³¨è§£</p></li><li><p>åŸºæœ¬æ•°æ®ç±»å‹</p></li><li><p>void</p></li></ol><h3 id="4ã€è·å–Classç±»çš„å®ä¾‹"><a href="#4ã€è·å–Classç±»çš„å®ä¾‹" class="headerlink" title="4ã€è·å–Classç±»çš„å®ä¾‹"></a>4ã€è·å–Classç±»çš„å®ä¾‹</h3><ol><li> <strong>å‰æ</strong>ï¼šè‹¥å·²çŸ¥å…·ä½“çš„ç±»ï¼Œé€šè¿‡ç±»çš„classå±æ€§è·å–ï¼Œè¯¥æ–¹æ³•æœ€ä¸ºå®‰å…¨å¯é ï¼Œç¨‹åºæ€§èƒ½æœ€é«˜</li></ol><p><strong>å®ä¾‹</strong>ï¼š<code>Class clazz = String.class</code></p><ol><li> <strong>å‰æ</strong>ï¼šå·²çŸ¥æŸä¸ªç±»çš„å®ä¾‹ï¼Œè°ƒç”¨è¯¥å®ä¾‹çš„getClass()æ–¹æ³•è·å–<strong>Class</strong>å¯¹è±¡</li></ol><p><strong>å®ä¾‹</strong>ï¼š<code>Class clazz = &quot;abc&quot;.getClass()</code></p><ol><li> <strong>å‰æ****ï¼š</strong>å·²çŸ¥ä¸€ä¸ªç±»çš„å…¨ç±»åï¼Œä¸”è¯¥ç±»åœ¨ç±»è·¯å¾„ä¸‹ï¼Œå¯é€šè¿‡<strong>Class</strong>ç±»çš„é™æ€æ–¹æ³•**forName()**è·å–ï¼Œå¯èƒ½æŠ›å‡ºClassNotFoundException</li></ol><p><strong>å®ä¾‹</strong>ï¼š<code>Class clazz = Class.forName(&quot;java.lang.String&quot;)</code></p><h2 id="3ã€ç±»åŠ è½½"><a href="#3ã€ç±»åŠ è½½" class="headerlink" title="3ã€ç±»åŠ è½½"></a>3ã€ç±»åŠ è½½</h2><h3 id="1ã€åŸºæœ¬è¯´æ˜"><a href="#1ã€åŸºæœ¬è¯´æ˜" class="headerlink" title="1ã€åŸºæœ¬è¯´æ˜"></a>1ã€åŸºæœ¬è¯´æ˜</h3><p>åå°„æœºåˆ¶æ—¶Javaå®ç°åŠ¨æ€è¯­è¨€çš„å…³é”®ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡åå°„å®ç°ç±»çš„åŠ¨æ€åŠ è½½ã€‚</p><ol><li>é™æ€åŠ è½½ï¼š<strong>ç¼–è¯‘</strong>æ—¶åŠ è½½ç›¸å…³ç±»ï¼Œå¦‚æœæ²¡æœ‰åˆ™æŠ¥é”™ï¼Œä¾èµ–æ€§å¤ªå¼º</li><li>åŠ¨æ€åŠ è½½ï¼šè¿è¡Œæ—¶åŠ è½½éœ€è¦çš„ç±»ï¼Œå¦‚æœè¿è¡Œæ—¶ä¸ç”¨è¯¥ç±»ï¼Œå³ä½¿ä¸å­˜åœ¨è¯¥ç±»ï¼Œä¹Ÿä¸æŠ¥é”™ï¼Œé™ä½äº†ä¾èµ–æ€§</li></ol><h3 id="2ã€ç±»åŠ è½½è¿‡ç¨‹å›¾"><a href="#2ã€ç±»åŠ è½½è¿‡ç¨‹å›¾" class="headerlink" title="2ã€ç±»åŠ è½½è¿‡ç¨‹å›¾"></a>2ã€ç±»åŠ è½½è¿‡ç¨‹å›¾</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109100955852.png" alt="img"></p><h3 id="3ã€ç±»åŠ è½½ä¸‰ä¸ªé˜¶æ®µå®Œæˆä»»åŠ¡"><a href="#3ã€ç±»åŠ è½½ä¸‰ä¸ªé˜¶æ®µå®Œæˆä»»åŠ¡" class="headerlink" title="3ã€ç±»åŠ è½½ä¸‰ä¸ªé˜¶æ®µå®Œæˆä»»åŠ¡"></a>3ã€ç±»åŠ è½½ä¸‰ä¸ªé˜¶æ®µå®Œæˆä»»åŠ¡</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109100955874.png" alt="img"></p><h4 id="1ã€åŠ è½½é˜¶æ®µ"><a href="#1ã€åŠ è½½é˜¶æ®µ" class="headerlink" title="1ã€åŠ è½½é˜¶æ®µ"></a>1ã€åŠ è½½é˜¶æ®µ</h4><p>å°†classæ–‡ä»¶å­—èŠ‚ç å†…å®¹åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°†è¿™äº›é™æ€æ•°æ®è½¬æ¢æˆæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„<code>java.lang.Class</code>å¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºä¸­ç±»æ•°æ®çš„è®¿é—®å…¥å£ï¼ˆåŠå¼•ç”¨åœ°å€ï¼‰ã€‚æ‰€æœ‰éœ€è¦è®¿é—®å’Œä½¿ç”¨ç±»æ•°æ®åªèƒ½é€šè¿‡è¿™ä¸ªClasså¯¹è±¡ã€‚è¿™ä¸ªåŠ è½½çš„è¿‡ç¨‹éœ€è¦ç±»åŠ è½½å™¨å‚ä¸ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109100955674.png" alt="img"></p><h4 id="2ã€è¿æ¥é˜¶æ®µ"><a href="#2ã€è¿æ¥é˜¶æ®µ" class="headerlink" title="2ã€è¿æ¥é˜¶æ®µ"></a>2ã€è¿æ¥é˜¶æ®µ</h4><ol><li>éªŒè¯ï¼š</li></ol><ul><li><ul><li>ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿Classæ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨</li><li>åŒ…æ‹¬ï¼šæ–‡ä»¶æ ¼å¼éªŒè¯(æ˜¯å¦ä»¥é­”æ•° <code>oxcafebabe</code> å¼€å¤´)ã€å…ƒæ•°æ®éªŒè¯ã€å­—èŠ‚ç éªŒè¯å’Œç¬¦å·ä»¥ç”¨éªŒè¯</li></ul></li><li><ul><li>å¯ä»¥è€ƒè™‘ä½¿ç”¨ <code>-Xverify:none</code> å‚æ•°æ¥å…³é—­å¤§éƒ¨åˆ†çš„ç±»éªŒè¯æªæ–½ï¼Œç¼©çŸ­è™šæ‹Ÿæœºç±»åŠ è½½çš„æ—¶é—´</li></ul></li></ul><ol><li>å‡†å¤‡ï¼šJVM ä¼šåœ¨è¯¥é˜¶æ®µä¸ºé™æ€å˜é‡(<strong>static</strong>)åˆ†é…å†…å­˜å¹¶<strong>è®¾ç½®é»˜è®¤åˆå§‹å€¼</strong>ï¼Œè¿™äº›å˜é‡æ‰€ä½¿ç”¨çš„å†…å­˜éƒ½å°†åœ¨æ–¹æ³•åŒºä¸­è¿›è¡Œåˆ†é…</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//ç±»åŠ è½½çš„è¿æ¥é˜¶æ®µâ€”â€”å‡†å¤‡</span><br><span class="line">public class ClassLoad02 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class A &#123;</span><br><span class="line">    //å±æ€§ï¼ˆæˆå‘˜å˜é‡ï¼Œå­—æ®µï¼‰</span><br><span class="line">    //åˆ†æç±»åŠ è½½çš„è¿æ¥é˜¶æ®µâ€”â€”å‡†å¤‡ï¼Œå±æ€§æ˜¯å¦‚ä½•å¤„ç†ï¼š</span><br><span class="line">    //1. n1æ˜¯æˆå‘˜å˜é‡ï¼Œä¸æ˜¯é™æ€å˜é‡ï¼Œå› æ­¤åœ¨å‡†å¤‡é˜¶æ®µï¼Œä¸ä¼šåˆ†é…å†…å­˜</span><br><span class="line">    //2. n2æ˜¯é™æ€å˜é‡ï¼Œåˆ†é…å†…å­˜ï¼Œn2æ˜¯é»˜è®¤åˆå§‹åŒ–0ï¼Œè€Œä¸æ˜¯20</span><br><span class="line">    //3. n3æ˜¯static finalå¸¸é‡ï¼Œå’Œé™æ€å˜é‡ä¸ä¸€æ ·ï¼Œå› ä¸ºä¸€æ—¦èµ‹å€¼å°±ä¸å˜ï¼Œn3 = 30</span><br><span class="line">    public int n1 = 10;</span><br><span class="line">    public static int n2 = 20;</span><br><span class="line">    public static final int n3 = 30;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>è§£æï¼šè™šæ‹Ÿæœºå¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨(å¸¸é‡å)æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨(åœ°å€)çš„è¿‡ç¨‹</li></ol><h4 id="3ã€åˆå§‹åŒ–ï¼š"><a href="#3ã€åˆå§‹åŒ–ï¼š" class="headerlink" title="3ã€åˆå§‹åŒ–ï¼š"></a>3ã€åˆå§‹åŒ–ï¼š</h4><ul><li><ul><li>åˆ°åˆå§‹åŒ–é˜¶æ®µï¼Œæ‰çœŸæ­£å¼€å§‹æ‰§è¡Œç±»ä¸­å®šä¹‰çš„ Java ç¨‹åºä»£ç ï¼Œæ­¤é˜¶æ®µæ˜¯æ‰§è¡Œ**ç±»æ„é€ å™¨<clinit>()**æ–¹æ³•çš„è¿‡ç¨‹ã€‚</li><li><strong>ç±»æ„é€ å™¨<clinit>()æ–¹æ³•æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­æ‰€æœ‰é™æ€å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥åˆå¹¶äº§ç”Ÿçš„ã€‚</strong>(ç±»æ„é€ å™¨æ˜¯æ„é€ ç±»ä¿¡æ¯çš„ï¼Œä¸æ˜¯æ„é€ è¯¥ç±»å¯¹è±¡çš„æ„é€ å™¨)</li></ul></li><li><ul><li>å½“åˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°å…¶çˆ¶ç±»è¿˜æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶çˆ¶ç±»çš„åˆå§‹åŒ–</li><li>è™šæ‹Ÿæœºä¼šä¿è¯ä¸€ä¸ªç±»çš„**<clinit>()<strong>æ–¹æ³•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¢«æ­£ç¡®åŠ é”å’ŒåŒæ­¥ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶åŒºåˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªç±»çš„</strong><clinit>()<strong>æ–¹æ³•ï¼Œå…¶ä»–çº¿ç¨‹éƒ½éœ€è¦é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°æ´»åŠ¨çº¿ç¨‹æ‰§è¡Œ</strong><clinit>()**æ–¹æ³•å®Œæ¯•</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">//ç±»åŠ è½½åˆå§‹åŒ–é˜¶æ®µ</span><br><span class="line">public class ClassLoad03 &#123;</span><br><span class="line">    public static void main(String[] args) throws Exception &#123;</span><br><span class="line">        //1.åŠ è½½Bç±»ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„Classç±»å¯¹è±¡</span><br><span class="line">        //2.è¿æ¥ num = 0;</span><br><span class="line">        //3.åˆå§‹åŒ–é˜¶æ®µï¼šä¾æ¬¡è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„æ‰€æœ‰é™æ€å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥ï¼Œå¹¶åˆå¹¶</span><br><span class="line">        /*</span><br><span class="line">            clinit()&#123;</span><br><span class="line">                System.out.println(&quot;B é™æ€ä»£ç å—è¢«æ‰§è¡Œ&quot;);</span><br><span class="line">                //num = 300;</span><br><span class="line">                num = 100;</span><br><span class="line">            &#125;</span><br><span class="line">            åˆå¹¶ï¼šnum = 100;</span><br><span class="line">         */</span><br><span class="line"></span><br><span class="line">        //new B(); //ç±»åŠ è½½</span><br><span class="line">        //System.out.println(B.num); //100ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨ç±»çš„é™æ€å±æ€§ï¼Œä¹Ÿä¼šå¯¼è‡´ç±»çš„åŠ è½½</span><br><span class="line"></span><br><span class="line">        //åŠ è½½ç±»çš„æ—¶å€™ï¼Œæ˜¯æœ‰åŒæ­¥æœºåˆ¶æ§åˆ¶</span><br><span class="line">        /*</span><br><span class="line">            protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException &#123;</span><br><span class="line">                //æ­£å› ä¸ºæœ‰è¿™ä¸ªæœºåˆ¶ï¼Œæ‰èƒ½ä¿è¯æŸä¸ªç±»åœ¨å†…å­˜ä¸­ï¼Œåªæœ‰ä¸€ä¸ª Class å¯¹è±¡</span><br><span class="line">                synchronized (getClassLoadingLock(name)) &#123;</span><br><span class="line">                    //...</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">         */</span><br><span class="line">        B b = new B();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class B &#123;</span><br><span class="line">    static &#123;</span><br><span class="line">        System.out.println(&quot;B é™æ€ä»£ç å—è¢«æ‰§è¡Œ&quot;);</span><br><span class="line">        num = 300;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static int num = 100;</span><br><span class="line"></span><br><span class="line">    public B() &#123;</span><br><span class="line">        System.out.println(&quot;B æ„é€ å™¨è¢«æ‰§è¡Œ&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4ã€ä»€ä¹ˆæ—¶å€™å‘ç”Ÿç±»åˆå§‹åŒ–"><a href="#4ã€ä»€ä¹ˆæ—¶å€™å‘ç”Ÿç±»åˆå§‹åŒ–" class="headerlink" title="4ã€ä»€ä¹ˆæ—¶å€™å‘ç”Ÿç±»åˆå§‹åŒ–"></a>4ã€ä»€ä¹ˆæ—¶å€™å‘ç”Ÿç±»åˆå§‹åŒ–</h3><h4 id="1ã€ç±»çš„ä¸»åŠ¨å¼•ç”¨-ä¸€å®šä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ–"><a href="#1ã€ç±»çš„ä¸»åŠ¨å¼•ç”¨-ä¸€å®šä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ–" class="headerlink" title="1ã€ç±»çš„ä¸»åŠ¨å¼•ç”¨(ä¸€å®šä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ–)"></a>1ã€ç±»çš„ä¸»åŠ¨å¼•ç”¨(ä¸€å®šä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ–)</h4><ul><li><p>å½“è™šæ‹Ÿæœºå¯åŠ¨ï¼Œå…ˆåˆå§‹åŒ–<strong>main</strong>æ–¹æ³•æ‰€åœ¨çš„ç±»</p></li><li><p><strong>new</strong>ä¸€ä¸ªç±»çš„å¯¹è±¡</p></li><li><p>è°ƒç”¨ç±»çš„é™æ€æˆå‘˜(é™¤äº†finalå¸¸é‡)å’Œé™æ€æ–¹æ³•</p></li><li><p>ä½¿ç”¨<strong>java.lang.reflect</strong>åŒ…çš„æ–¹æ³•å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨</p></li><li><p>å½“åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œå¦‚æœå…¶çˆ¶ç±»æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œåˆ™å…ˆä¼šåˆå§‹åŒ–å®ƒçš„çˆ¶ç±»</p></li></ul><h4 id="2ã€ç±»çš„è¢«åŠ¨å¼•ç”¨-ä¸ä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ–"><a href="#2ã€ç±»çš„è¢«åŠ¨å¼•ç”¨-ä¸ä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ–" class="headerlink" title="2ã€ç±»çš„è¢«åŠ¨å¼•ç”¨(ä¸ä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ–)"></a>2ã€ç±»çš„è¢«åŠ¨å¼•ç”¨(ä¸ä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ–)</h4><ul><li><p>å½“è®¿é—®ä¸€ä¸ªé™æ€åŸŸæ—¶ï¼Œåªæœ‰çœŸæ­£å£°æ˜è¿™ä¸ªåŸŸçš„ç±»æ‰ä¼šè¢«åˆå§‹åŒ–</p></li><li><p>å½“é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å˜é‡ï¼Œä¸ä¼šå¯¼è‡´å­ç±»åˆå§‹åŒ–</p></li><li><p>é€šè¿‡æ•°ç»„å®šä¹‰ç±»å¼•ç”¨ï¼Œä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ–</p></li><li><p>å¼•ç”¨å¸¸é‡ä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ–(å¸¸é‡åœ¨è¿æ¥é˜¶æ®µå°±å­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­äº†)</p></li></ul><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109100955628.png" alt="img"></p><h2 id="4ã€ClassLoaderçš„ç†è§£"><a href="#4ã€ClassLoaderçš„ç†è§£" class="headerlink" title="4ã€ClassLoaderçš„ç†è§£"></a>4ã€ClassLoaderçš„ç†è§£</h2><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109100954841.png" alt="img"></p><h4 id="1ã€ç±»åŠ è½½å™¨çš„ä½œç”¨"><a href="#1ã€ç±»åŠ è½½å™¨çš„ä½œç”¨" class="headerlink" title="1ã€ç±»åŠ è½½å™¨çš„ä½œç”¨"></a>1ã€ç±»åŠ è½½å™¨çš„ä½œç”¨</h4><ul><li>ç±»åŠ è½½å™¨çš„ä½œç”¨ï¼šå°†<strong>Class</strong>æ–‡ä»¶å­—èŠ‚ç å†…å®¹åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°†è¿™äº›<strong>é™æ€æ•°æ®è½¬æ¢æˆæ–¹æ³•åŒºçš„è¿è¡Œæ—¶çš„æ•°æ®ç»“æ„</strong>ï¼Œç„¶ååœ¨å †ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„<strong>java.lang.Class</strong>å¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºä¸­ç±»æ•°æ®çš„è®¿é—®å…¥å£</li><li>ç±»ç¼“å­˜ï¼šæ ‡å‡†çš„<strong>JavaSE</strong>ç±»åŠ è½½å™¨å¯ä»¥æŒ‰è¦æ±‚æŸ¥æ‰¾ç±»ï¼Œä½†ä¸€æ—¦æŸä¸ªç±»è¢«åŠ è½½åˆ°ç±»åŠ è½½å™¨ä¸­ï¼Œå®ƒå°†ç»´æŒåŠ è½½(ç¼“å­˜)ä¸€æ®µæ—¶é—´ï¼Œä¸è¿‡<strong>jvm</strong>åƒåœ¾å›æ”¶æœºåˆ¶å¯ä»¥å›æ”¶è¿™äº›<strong>Class</strong>å¯¹è±¡</li></ul><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109100954846.png" alt="img"></p><h4 id="2ã€æœ€å¸¸ç”¨æ–¹æ³•"><a href="#2ã€æœ€å¸¸ç”¨æ–¹æ³•" class="headerlink" title="2ã€æœ€å¸¸ç”¨æ–¹æ³•"></a>2ã€æœ€å¸¸ç”¨æ–¹æ³•</h4><p><strong>getResoureAsStream(String str)ï¼š</strong>è·å–ç±»è·¯å¾„ä¸‹çš„æŒ‡å®šæ–‡ä»¶çš„è¾“å…¥æµã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">InputStream in = this.getClass().getClassLoader().getResourceAsStream(&quot;test.properties&quot;);</span><br></pre></td></tr></table></figure><h2 id="5ã€è·å–è¿è¡Œæ—¶çš„å®Œæ•´ç»“æ„"><a href="#5ã€è·å–è¿è¡Œæ—¶çš„å®Œæ•´ç»“æ„" class="headerlink" title="5ã€è·å–è¿è¡Œæ—¶çš„å®Œæ•´ç»“æ„"></a>5ã€è·å–è¿è¡Œæ—¶çš„å®Œæ•´ç»“æ„</h2><h3 id="1ã€Classç±»åŠå…¶ç”¨æ³•"><a href="#1ã€Classç±»åŠå…¶ç”¨æ³•" class="headerlink" title="1ã€Classç±»åŠå…¶ç”¨æ³•"></a>1ã€Classç±»åŠå…¶ç”¨æ³•</h3><table><thead><tr><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>forName()</td><td>è·å–Classå¯¹è±¡çš„ä¸€ä¸ªå¼•ç”¨</td></tr><tr><td>getName()</td><td>å–å…¨é™å®šçš„ç±»å(åŒ…æ‹¬åŒ…å)ï¼Œå³ç±»çš„å®Œæ•´åå­—</td></tr><tr><td>getSimpleName()</td><td>è·å–ç±»å(ä¸åŒ…æ‹¬åŒ…å)</td></tr><tr><td>isInterface()</td><td>åˆ¤æ–­Classå¯¹è±¡æ˜¯å¦æ˜¯è¡¨ç¤ºä¸€ä¸ªæ¥å£</td></tr><tr><td>getInterfaces()</td><td>è¿”å›Classå¯¹è±¡æ•°ç»„ï¼Œè¡¨ç¤ºClasså¯¹è±¡æ‰€å¼•ç”¨çš„ç±»æ‰€å®ç°çš„æ‰€æœ‰æ¥å£</td></tr><tr><td>getSupercalss()</td><td>è¿”å›Classå¯¹è±¡ï¼Œè¡¨ç¤ºClasså¯¹è±¡æ‰€å¼•ç”¨çš„ç±»æ‰€ç»§æ‰¿çš„ç›´æ¥åŸºç±»ã€‚åº”ç”¨è¯¥æ–¹æ³•å¯åœ¨è¿è¡Œæ—¶å‘ç°ä¸€ä¸ªå¯¹è±¡å®Œæ•´çš„ç»§æ‰¿ç»“æ„ã€‚</td></tr><tr><td>getAnnotations()</td><td>ä»¥Annotation[]å½¢å¼è¿”å›æ³¨è§£ä¿¡æ¯</td></tr><tr><td>newInstance()</td><td>è¿”å›ä¸€ä¸ªOjectå¯¹è±¡ï¼Œæ˜¯å®ç°â€œè™šæ‹Ÿæ„é€ å™¨â€çš„ä¸€ç§é€”å¾„ã€‚ä½¿ç”¨è¯¥æ–¹æ³•åˆ›å»ºçš„ç±»ï¼Œå¿…é¡»å¸¦æœ‰æ— å‚çš„æ„é€ å™¨ã€‚</td></tr><tr><td>getFields()</td><td>è·å¾—æ‰€æœ‰publicä¿®é¥°çš„å±æ€§ï¼ŒåŒ…å«æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„</td></tr><tr><td>getDeclaredFields()</td><td>è·å¾—æœ¬ç±»ä¸­çš„æ‰€æœ‰å±æ€§</td></tr><tr><td>getMethods()</td><td>è·å–æ‰€æœ‰pubilcä¿®é¥°çš„æ–¹æ³•ï¼ŒåŒ…å«æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„</td></tr><tr><td>getDeclaredMethods()</td><td>è·å–æœ¬ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•</td></tr><tr><td>getConstructots()</td><td>è·å–æœ¬ç±»ä¸­æ‰€æœ‰publicä¿®é¥°çš„æ„é€ å™¨</td></tr><tr><td>getDeclaredConstructors()</td><td>è·å–æœ¬ç±»ä¸­çš„æ‰€æœ‰æ„é€ å™¨</td></tr></tbody></table><h3 id="2ã€Fieldç±»åŠå…¶ç”¨æ³•"><a href="#2ã€Fieldç±»åŠå…¶ç”¨æ³•" class="headerlink" title="2ã€Fieldç±»åŠå…¶ç”¨æ³•"></a>2ã€Fieldç±»åŠå…¶ç”¨æ³•</h3><table><thead><tr><th>æ–¹æ³•è¿”å›å€¼</th><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•è¯´æ˜</th></tr></thead><tbody><tr><td>Field</td><td>getDeclaredField(String name)</td><td>è·å–æŒ‡å®šnameåç§°çš„(åŒ…å«privateä¿®é¥°çš„)å­—æ®µï¼Œä¸åŒ…æ‹¬ç»§æ‰¿çš„å­—æ®µ</td></tr><tr><td>Field[]</td><td>getDeclaredFields()</td><td>è·å–Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„æ‰€æœ‰(åŒ…å«privateä¿®é¥°çš„)å­—æ®µ,ä¸åŒ…æ‹¬ç»§æ‰¿çš„å­—æ®µ</td></tr><tr><td>Field</td><td>getField(String name)</td><td>è·å–æŒ‡å®šnameåç§°ã€å…·æœ‰publicä¿®é¥°çš„å­—æ®µï¼ŒåŒ…å«ç»§æ‰¿å­—æ®µ</td></tr><tr><td>Field[]</td><td>getFields()</td><td>è·å–ä¿®é¥°ç¬¦ä¸ºpublicçš„å­—æ®µï¼ŒåŒ…å«ç»§æ‰¿å­—æ®µ</td></tr></tbody></table><table><thead><tr><th>æ–¹æ³•è¿”å›å€¼</th><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•è¯´æ˜</th></tr></thead><tbody><tr><td>void</td><td>set(Object obj, Object value)</td><td>å°†æŒ‡å®šå¯¹è±¡å˜é‡ä¸Šæ­¤ Field å¯¹è±¡è¡¨ç¤ºçš„å­—æ®µè®¾ç½®ä¸ºæŒ‡å®šçš„æ–°å€¼ã€‚</td></tr><tr><td>Object</td><td>get(Object obj)</td><td>è¿”å›æŒ‡å®šå¯¹è±¡ä¸Šæ­¤ Field è¡¨ç¤ºçš„å­—æ®µçš„å€¼</td></tr><tr><td>Class&lt;?&gt;</td><td>getType()</td><td>è¿”å›ä¸€ä¸ª Class å¯¹è±¡ï¼Œå®ƒæ ‡è¯†äº†æ­¤Field å¯¹è±¡æ‰€è¡¨ç¤ºå­—æ®µçš„å£°æ˜ç±»å‹ã€‚</td></tr><tr><td>String</td><td>getName()</td><td>è¿”å›æ­¤ Field å¯¹è±¡è¡¨ç¤ºçš„å­—æ®µçš„åç§°</td></tr><tr><td>void</td><td>setAccessible(boolean flag)</td><td>å°†æ­¤å¯¹è±¡çš„ accessible æ ‡å¿—è®¾ç½®ä¸ºæŒ‡ç¤ºçš„å¸ƒå°”å€¼,å³è®¾ç½®å…¶å¯è®¿é—®æ€§</td></tr></tbody></table><h3 id="3ã€Methodç±»åŠå…¶ç”¨æ³•"><a href="#3ã€Methodç±»åŠå…¶ç”¨æ³•" class="headerlink" title="3ã€Methodç±»åŠå…¶ç”¨æ³•"></a>3ã€Methodç±»åŠå…¶ç”¨æ³•</h3><table><thead><tr><th>æ–¹æ³•è¿”å›å€¼</th><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•è¯´æ˜</th></tr></thead><tbody><tr><td>Method</td><td>getDeclaredMethod(String name, Class&lt;?&gt;â€¦ parameterTypes)</td><td>è¿”å›ä¸€ä¸ªæŒ‡å®šå‚æ•°çš„Methodå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åæ˜ æ­¤ Class å¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„æŒ‡å®šå·²å£°æ˜æ–¹æ³•ã€‚</td></tr><tr><td>Method[]</td><td>getDeclaredMethods()</td><td>è¿”å› Method å¯¹è±¡çš„ä¸€ä¸ªæ•°ç»„ï¼Œè¿™äº›å¯¹è±¡åæ˜ æ­¤ Class å¯¹è±¡è¡¨ç¤ºçš„ç±»æˆ–æ¥å£å£°æ˜çš„æ‰€æœ‰æ–¹æ³•ï¼ŒåŒ…æ‹¬å…¬å…±ã€ä¿æŠ¤ã€é»˜è®¤ï¼ˆåŒ…ï¼‰è®¿é—®å’Œç§æœ‰æ–¹æ³•ï¼Œä½†ä¸åŒ…æ‹¬ç»§æ‰¿çš„æ–¹æ³•ã€‚</td></tr><tr><td>Method</td><td>getMethod(String name, Class&lt;?&gt;â€¦ parameterTypes)</td><td>è¿”å›ä¸€ä¸ª Method å¯¹è±¡ï¼Œå®ƒåæ˜ æ­¤ Class å¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„æŒ‡å®šå…¬å…±æˆå‘˜æ–¹æ³•ã€‚</td></tr><tr><td>Method[]</td><td>getMethods()</td><td>è¿”å›ä¸€ä¸ªåŒ…å«æŸäº› Method å¯¹è±¡çš„æ•°ç»„ï¼Œè¿™äº›å¯¹è±¡åæ˜ æ­¤ Class å¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»æˆ–æ¥å£ï¼ˆåŒ…æ‹¬é‚£äº›ç”±è¯¥ç±»æˆ–æ¥å£å£°æ˜çš„ä»¥åŠä»è¶…ç±»å’Œè¶…æ¥å£ç»§æ‰¿çš„é‚£äº›çš„ç±»æˆ–æ¥å£ï¼‰çš„å…¬å…± member æ–¹æ³•ã€‚</td></tr></tbody></table><table><thead><tr><th>æ–¹æ³•è¿”å›å€¼</th><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•è¯´æ˜</th></tr></thead><tbody><tr><td>Object</td><td>invoke(Object obj, Objectâ€¦ args)</td><td>å¯¹å¸¦æœ‰æŒ‡å®šå‚æ•°çš„æŒ‡å®šå¯¹è±¡è°ƒç”¨ç”±æ­¤ Method å¯¹è±¡è¡¨ç¤ºçš„åº•å±‚æ–¹æ³•ã€‚</td></tr><tr><td>Class&lt;?&gt;</td><td>getReturnType()</td><td>è¿”å›ä¸€ä¸ª Class å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æè¿°äº†æ­¤ Method å¯¹è±¡æ‰€è¡¨ç¤ºçš„æ–¹æ³•çš„æ­£å¼è¿”å›ç±»å‹,å³æ–¹æ³•çš„è¿”å›ç±»å‹</td></tr><tr><td>Class&lt;?&gt;[]</td><td>getParameterTypes()</td><td>æŒ‰ç…§å£°æ˜é¡ºåºè¿”å› Class å¯¹è±¡çš„æ•°ç»„ï¼Œè¿™äº›å¯¹è±¡æè¿°äº†æ­¤ Method å¯¹è±¡æ‰€è¡¨ç¤ºçš„æ–¹æ³•çš„å½¢å‚ç±»å‹ã€‚å³è¿”å›æ–¹æ³•çš„å‚æ•°ç±»å‹ç»„æˆçš„æ•°ç»„</td></tr><tr><td>String</td><td>getName()</td><td>ä»¥ String å½¢å¼è¿”å›æ­¤ Method å¯¹è±¡è¡¨ç¤ºçš„æ–¹æ³•åç§°ï¼Œå³è¿”å›æ–¹æ³•çš„åç§°</td></tr></tbody></table><h3 id="4ã€Constructorç±»åŠå…¶ç”¨æ³•"><a href="#4ã€Constructorç±»åŠå…¶ç”¨æ³•" class="headerlink" title="4ã€Constructorç±»åŠå…¶ç”¨æ³•"></a>4ã€Constructorç±»åŠå…¶ç”¨æ³•</h3><table><thead><tr><th>æ–¹æ³•è¿”å›å€¼</th><th>æ–¹æ³•åç§°</th><th>æ–¹æ³•è¯´æ˜</th></tr></thead><tbody><tr><td>Constructor</td><td>getConstructor(Class&lt;?&gt;â€¦ parameterTypes)</td><td>è¿”å›æŒ‡å®šå‚æ•°ç±»å‹ã€å…·æœ‰publicè®¿é—®æƒé™çš„æ„é€ å‡½æ•°å¯¹è±¡</td></tr><tr><td>Constructor&lt;?&gt;[]</td><td>getConstructors()</td><td>è¿”å›æ‰€æœ‰å…·æœ‰publicè®¿é—®æƒé™çš„æ„é€ å‡½æ•°çš„Constructorå¯¹è±¡æ•°ç»„</td></tr><tr><td>Constructor</td><td>getDeclaredConstructor(Class&lt;?&gt;â€¦ parameterTypes)</td><td>è¿”å›æŒ‡å®šå‚æ•°ç±»å‹ã€æ‰€æœ‰å£°æ˜çš„ï¼ˆåŒ…æ‹¬privateï¼‰æ„é€ å‡½æ•°å¯¹è±¡</td></tr><tr><td>Constructor&lt;?&gt;[]</td><td>getDeclaredConstructor()</td><td>è¿”å›æ‰€æœ‰å£°æ˜çš„ï¼ˆåŒ…æ‹¬privateï¼‰æ„é€ å‡½æ•°å¯¹è±¡</td></tr><tr><td>T</td><td>newInstance()</td><td>è°ƒç”¨æ— å‚æ„é€ å™¨åˆ›å»ºæ­¤ Class å¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»çš„ä¸€ä¸ªæ–°å®ä¾‹ã€‚</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Annotation;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡åå°„è·å–ç±»çš„ç»“æ„ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectionUtils</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">api_02</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//å¾—åˆ°Classå¯¹è±¡</span></span><br><span class="line">        Class&lt;?&gt; personCls = Class.forName(<span class="string">&quot;com.hspedu.reflection.Person&quot;</span>);</span><br><span class="line">        <span class="comment">//getDeclaredFields:è·å–æœ¬ç±»ä¸­æ‰€æœ‰å±æ€§</span></span><br><span class="line">        <span class="comment">//è§„å®š è¯´æ˜: é»˜è®¤ä¿®é¥°ç¬¦ æ˜¯0 ï¼Œ public  æ˜¯1 ï¼Œprivate æ˜¯ 2 ï¼Œprotected æ˜¯ 4 , static æ˜¯ 8 ï¼Œfinal æ˜¯ 16</span></span><br><span class="line">        Field[] declaredFields = personCls.getDeclaredFields();</span><br><span class="line">        <span class="keyword">for</span> (Field declaredField : declaredFields) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æœ¬ç±»ä¸­æ‰€æœ‰å±æ€§=&quot;</span> + declaredField.getName()</span><br><span class="line">                    + <span class="string">&quot; è¯¥å±æ€§çš„ä¿®é¥°ç¬¦å€¼=&quot;</span> + declaredField.getModifiers()</span><br><span class="line">                    + <span class="string">&quot; è¯¥å±æ€§çš„ç±»å‹=&quot;</span> + declaredField.getType());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//getDeclaredMethods:è·å–æœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line">        Method[] declaredMethods = personCls.getDeclaredMethods();</span><br><span class="line">        <span class="keyword">for</span> (Method declaredMethod : declaredMethods) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•=&quot;</span> + declaredMethod.getName()</span><br><span class="line">                    + <span class="string">&quot; è¯¥æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦å€¼=&quot;</span> + declaredMethod.getModifiers()</span><br><span class="line">                    + <span class="string">&quot; è¯¥æ–¹æ³•è¿”å›ç±»å‹&quot;</span> + declaredMethod.getReturnType());</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è¾“å‡ºå½“å‰è¿™ä¸ªæ–¹æ³•çš„å½¢å‚æ•°ç»„æƒ…å†µ</span></span><br><span class="line">            Class&lt;?&gt;[] parameterTypes = declaredMethod.getParameterTypes();</span><br><span class="line">            <span class="keyword">for</span> (Class&lt;?&gt; parameterType : parameterTypes) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;è¯¥æ–¹æ³•çš„å½¢å‚ç±»å‹=&quot;</span> + parameterType);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//getDeclaredConstructors:è·å–æœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨</span></span><br><span class="line">        Constructor&lt;?&gt;[] declaredConstructors = personCls.getDeclaredConstructors();</span><br><span class="line">        <span class="keyword">for</span> (Constructor&lt;?&gt; declaredConstructor : declaredConstructors) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;====================&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;æœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨=&quot;</span> + declaredConstructor.getName());</span><br><span class="line"></span><br><span class="line">            Class&lt;?&gt;[] parameterTypes = declaredConstructor.getParameterTypes();</span><br><span class="line">            <span class="keyword">for</span> (Class&lt;?&gt; parameterType : parameterTypes) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;è¯¥æ„é€ å™¨çš„å½¢å‚ç±»å‹=&quot;</span> + parameterType);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç¬¬ä¸€ç»„æ–¹æ³•API</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">api_01</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//å¾—åˆ°Classå¯¹è±¡</span></span><br><span class="line">        Class&lt;?&gt; personCls = Class.forName(<span class="string">&quot;com.hspedu.reflection.Person&quot;</span>);</span><br><span class="line">        <span class="comment">//getName:è·å–å…¨ç±»å</span></span><br><span class="line">        System.out.println(personCls.getName());</span><br><span class="line">        <span class="comment">//getSimpleName:è·å–ç®€å•ç±»å</span></span><br><span class="line">        System.out.println(personCls.getSimpleName());</span><br><span class="line">        <span class="comment">//getFields:è·å–æ‰€æœ‰publicä¿®é¥°çš„å±æ€§ï¼ŒåŒ…å«æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„</span></span><br><span class="line">        Field[] fields = personCls.getFields();</span><br><span class="line">        <span class="keyword">for</span> (Field field : fields) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„å±æ€§=&quot;</span> + field.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//getDeclaredFields:è·å–æœ¬ç±»ä¸­æ‰€æœ‰å±æ€§</span></span><br><span class="line">        Field[] declaredFields = personCls.getDeclaredFields();</span><br><span class="line">        <span class="keyword">for</span> (Field declaredField : declaredFields) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æœ¬ç±»ä¸­æ‰€æœ‰å±æ€§=&quot;</span> + declaredField.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//getMethods:è·å–æ‰€æœ‰publicä¿®é¥°çš„æ–¹æ³•ï¼ŒåŒ…å«æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„</span></span><br><span class="line">        Method[] methods = personCls.getMethods();</span><br><span class="line">        <span class="keyword">for</span> (Method method : methods) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„æ–¹æ³•=&quot;</span> + method.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//getDeclaredMethods:è·å–æœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line">        Method[] declaredMethods = personCls.getDeclaredMethods();</span><br><span class="line">        <span class="keyword">for</span> (Method declaredMethod : declaredMethods) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•=&quot;</span> + declaredMethod.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//getConstructors: è·å–æ‰€æœ‰publicä¿®é¥°çš„æ„é€ å™¨ï¼ŒåŒ…å«æœ¬ç±»</span></span><br><span class="line">        Constructor&lt;?&gt;[] constructors = personCls.getConstructors();</span><br><span class="line">        <span class="keyword">for</span> (Constructor&lt;?&gt; constructor : constructors) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æœ¬ç±»çš„æ„é€ å™¨=&quot;</span> + constructor.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//getDeclaredConstructors:è·å–æœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨</span></span><br><span class="line">        Constructor&lt;?&gt;[] declaredConstructors = personCls.getDeclaredConstructors();</span><br><span class="line">        <span class="keyword">for</span> (Constructor&lt;?&gt; declaredConstructor : declaredConstructors) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨=&quot;</span> + declaredConstructor.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//getPackage:ä»¥Packageå½¢å¼è¿”å› åŒ…ä¿¡æ¯</span></span><br><span class="line">        System.out.println(personCls.getPackage());</span><br><span class="line">        <span class="comment">//getSuperClass:ä»¥Classå½¢å¼è¿”å›çˆ¶ç±»ä¿¡æ¯</span></span><br><span class="line">        Class&lt;?&gt; superclass = personCls.getSuperclass();</span><br><span class="line">        System.out.println(<span class="string">&quot;çˆ¶ç±»çš„classå¯¹è±¡=&quot;</span> + superclass);</span><br><span class="line">        <span class="comment">//getInterfaces:ä»¥Class[]å½¢å¼è¿”å›æ¥å£ä¿¡æ¯</span></span><br><span class="line">        Class&lt;?&gt;[] interfaces = personCls.getInterfaces();</span><br><span class="line">        <span class="keyword">for</span> (Class&lt;?&gt; anInterface : interfaces) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ¥å£ä¿¡æ¯=&quot;</span> + anInterface);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//getAnnotations:ä»¥Annotation[] å½¢å¼è¿”å›æ³¨è§£ä¿¡æ¯</span></span><br><span class="line">        Annotation[] annotations = personCls.getAnnotations();</span><br><span class="line">        <span class="keyword">for</span> (Annotation annotation : annotations) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;æ³¨è§£ä¿¡æ¯=&quot;</span> + annotation);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String hobby;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hi</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">A</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">A</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IA</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">IB</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Deprecated</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">A</span> <span class="keyword">implements</span> <span class="title">IA</span>, <span class="title">IB</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">int</span> age; <span class="comment">// 4 + 8 = 12</span></span><br><span class="line">    String job;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> sal;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ„é€ å™¨</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç§æœ‰çš„</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">m1</span><span class="params">(String name, <span class="keyword">int</span> age, <span class="keyword">double</span> sal)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> String <span class="title">m2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">m3</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">m4</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaå¼€å‘ </tag>
            
            <tag> åå°„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ³¨è§£</title>
      <link href="/article/a70f4376.html"/>
      <url>/article/a70f4376.html</url>
      
        <content type="html"><![CDATA[<p>æ³¨è§£æ—¶JDK1.5ç‰ˆæœ¬å¼€å§‹å¼•å…¥çš„ä¸€ä¸ªç‰¹æ€§ï¼Œç”¨äºå¯¹ä»£ç è¿›è¡Œè¯´æ˜ï¼Œå¯ä»¥å¯¹åŒ…ã€ç±»ã€æ¥å£ã€å­—æ®µã€æ–¹æ³•å‚æ•°ã€å±€éƒ¨å˜é‡ç­‰è¿›è¡Œæ³¨è§£ã€‚å®ƒä¸»è¦çš„ä½œç”¨æœ‰ä»¥ä¸‹å››æ–¹é¢ï¼š</p><ul><li><p>ç”Ÿæˆæ–‡æ¡£ï¼Œé€šè¿‡ä»£ç é‡Œæ ‡è¯†çš„å…ƒæ•°æ®ç”Ÿæˆjavadocæ–‡æ¡£ã€‚</p></li><li><p>ç¼–è¯‘æ£€æŸ¥ï¼Œé€šè¿‡ä»£ç é‡Œæ ‡è¯†çš„å…ƒæ•°æ®è®©ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸé—´è¿›è¡Œæ£€æŸ¥éªŒè¯ã€‚</p></li><li><p>ç¼–è¯‘æ—¶åŠ¨æ€å¤„ç†ï¼Œç¼–è¯‘æ—¶é€šè¿‡ä»£ç é‡Œæ ‡è¯†çš„å…ƒæ•°æ®åŠ¨æ€å¤„ç†ï¼Œä¾‹å¦‚åŠ¨æ€ç”Ÿæˆä»£ç ã€‚</p></li><li><p>è¿è¡Œæ—¶åŠ¨æ€å¤„ç†ï¼Œè¿è¡Œæ—¶é€šè¿‡ä»£ç é‡Œæ ‡è¯†çš„å…ƒæ•°æ®åŠ¨æ€å¤„ç†ï¼Œä¾‹å¦‚ä½¿ç”¨åå°„æ³¨å…¥æ¡ˆä¾‹ã€‚</p></li></ul><p>æ³¨è§£çš„å¸¸è§åˆ†ç±»ï¼š</p><ul><li><p><strong>Javaå†…ç½®æ³¨è§£æ³¨è§£ï¼Œ</strong>åŒ…æ‹¬<code>@Override</code>ã€<code>@Deprecated</code>ã€<code>@SupperssWarnings</code>ï¼Œåˆ†åˆ«ç”¨äºæ ‡æ˜é‡å†™æŸä¸ªæ–¹æ³•ã€æ ‡æ˜æŸä¸ªç±»æˆ–æ–¹æ³•è¿‡æ—¶ã€æ ‡æ˜è¦å¿½ç•¥çš„è­¦å‘Šï¼Œç”¨è¿™äº›æ³¨è§£æ ‡æ˜åç¼–è¯‘å™¨å°±ä¼šè¿›è¡Œæ£€æŸ¥ã€‚</p></li><li><p><strong>å…ƒæ³¨è§£</strong>ï¼Œå…ƒæ³¨è§£ç”¨äºå®šä¹‰æ³¨è§£çš„æ³¨è§£ï¼ŒåŒ…æ‹¬<code>@Retention</code>ã€<code>@Target</code>ã€<code>@Inherited</code>ã€<code>@Documented</code>ï¼Œåˆ†åˆ«ç”¨äºæ ‡æ˜æ³¨è§£è¢«ä¿ç•™çš„é˜¶æ®µã€æ ‡æ˜æ³¨è§£ä½¿ç”¨çš„èŒƒå›´ã€æ ‡æ˜æ³¨è§£å¯ä»¥ç»§æ‰¿ã€æ ‡æ˜æ˜¯å¦ç”Ÿæˆjavadocæ–‡æ¡£ã€‚</p></li><li><p><strong>è‡ªå®šä¹‰æ³¨è§£</strong>ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å®šä¹‰æ³¨è§£ï¼Œå¹¶å¯ä»¥ç”¨å…ƒæ³¨è§£å¯¹è‡ªå®šä¹‰æ³¨è§£è¿›è¡Œæ³¨è§£ã€‚</p></li></ul><h2 id="1ã€Javaå†…ç½®æ³¨è§£"><a href="#1ã€Javaå†…ç½®æ³¨è§£" class="headerlink" title="1ã€Javaå†…ç½®æ³¨è§£"></a>1ã€Javaå†…ç½®æ³¨è§£</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">class A&#123;</span><br><span class="line">    public void test() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class B extends A&#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">        * é‡è½½çˆ¶ç±»çš„testæ–¹æ³•</span><br><span class="line">        */</span><br><span class="line">    @Override</span><br><span class="line">    public void test() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">        * è¢«å¼ƒç”¨çš„æ–¹æ³•</span><br><span class="line">        */</span><br><span class="line">    @Deprecated</span><br><span class="line">    public void oldMethod() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">        * å¿½ç•¥å‘Šè­¦</span><br><span class="line">        * </span><br><span class="line">        * @return</span><br><span class="line">        */</span><br><span class="line">    @SuppressWarnings(&quot;rawtypes&quot;)</span><br><span class="line">    public List processList() &#123;</span><br><span class="line">        List list = new ArrayList();</span><br><span class="line">        return list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>JDK1.5 å¼€å§‹è‡ªå¸¦çš„æ ‡å‡†æ³¨è§£ï¼ŒåŒ…æ‹¬<code>@Override</code>ã€<code>@Deprecated</code>ã€<code>@SuppressWarnings</code>ï¼š</p><h3 id="1ã€-Override"><a href="#1ã€-Override" class="headerlink" title="1ã€@Override"></a>1ã€@Override</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Target(ElementType.METHOD)</span><br><span class="line">@Retention(RetentionPolicy.SOURCE)</span><br><span class="line">public @interface Override &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»å®šä¹‰å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªæ³¨è§£å¯ä»¥è¢«ç”¨æ¥ä¿®é¥°æ–¹æ³•ï¼Œå¹¶ä¸”å®ƒåªåœ¨ç¼–è¯‘æ—¶æœ‰æ•ˆï¼Œåœ¨ç¼–è¯‘åçš„classæ–‡ä»¶ä¸­ä¾¿ä¸å†å­˜åœ¨ã€‚è¿™ä¸ªæ³¨è§£çš„ä½œç”¨å°±æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨è¢«ä¿®é¥°çš„æ–¹æ³•æ˜¯é‡å†™çˆ¶ç±»ä¸­ç­¾åç›¸åŒçš„æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¼šå¯¹æ­¤åšå‡ºæ£€æŸ¥ï¼Œè‹¥å‘ç°çˆ¶ç±»ä¸­ä¸å­˜åœ¨è¿™ä¸ªæ–¹æ³•æˆ–æ˜¯å­˜åœ¨çš„æ–¹æ³•ç­¾åä¸åŒï¼Œåˆ™ä¼šæŠ¥é”™ã€‚</p><h3 id="2ã€-Deprecated"><a href="#2ã€-Deprecated" class="headerlink" title="2ã€@Deprecated"></a>2ã€@Deprecated</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Documented</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Target(value=&#123;CONSTRUCTOR, FIELD, LOCAL_VARIABLE, METHOD, PACKAGE, PARAMETER, TYPE&#125;)</span><br><span class="line">public @interface Deprecated &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»å®šä¹‰å¯ä»¥çœ‹å‡ºï¼Œå®ƒä¼šè¢«æ–‡æ¡£åŒ–ï¼Œèƒ½å¤Ÿä¿ç•™åˆ°è¿è¡Œæ—¶ï¼Œèƒ½å¤Ÿä¿®é¥°æ„é€ æ–¹æ³•ã€å±æ€§ã€å±€éƒ¨å˜é‡ã€æ–¹æ³•ã€åŒ…ã€å‚æ•°ã€ç±»å‹ã€‚è¿™ä¸ªæ³¨è§£çš„ä½œç”¨æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨è¢«ä¿®é¥°çš„ç¨‹åºå…ƒç´ å·²è¢«â€åºŸå¼ƒâ€ï¼Œä¸å†å»ºè®®ç”¨æˆ·ä½¿ç”¨ã€‚</p><h3 id="3ã€-SupressWarnings"><a href="#3ã€-SupressWarnings" class="headerlink" title="3ã€@SupressWarnings"></a>3ã€@SupressWarnings</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Target(&#123;TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE&#125;)</span><br><span class="line">@Retention(RetentionPolicy.SOURCE)</span><br><span class="line">public @interface SuppressWarnings &#123;</span><br><span class="line">    String[] value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒèƒ½å¤Ÿä¿®é¥°çš„ç¨‹åºå…ƒç´ åŒ…æ‹¬ç±»å‹ã€å±æ€§ã€æ–¹æ³•ã€å‚æ•°ã€æ„é€ å™¨ã€å±€éƒ¨å˜é‡ï¼Œåªèƒ½å­˜æ´»åœ¨æºç æ—¶ï¼Œå–å€¼ä¸ºString[]ã€‚å®ƒçš„ä½œç”¨æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨å¿½ç•¥æŒ‡å®šçš„è­¦å‘Šä¿¡æ¯ï¼Œå®ƒå¯ä»¥å–çš„å€¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><table><thead><tr><th>å‚æ•°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>all</td><td>æŠ‘åˆ¶æ‰€æœ‰è­¦å‘Š</td></tr><tr><td>boxing</td><td>æŠ‘åˆ¶è£…ç®±ã€æ‹†ç®±æ“ä½œæ—¶å€™çš„è­¦å‘Š</td></tr><tr><td>cast</td><td>æŠ‘åˆ¶æ˜ å°„ç›¸å…³çš„è­¦å‘Š</td></tr><tr><td>dep-ann</td><td>æŠ‘åˆ¶å¯ç”¨æ³¨é‡Šçš„è­¦å‘Š</td></tr><tr><td>deprecation</td><td>æŠ‘åˆ¶è¿‡æœŸæ–¹æ³•è­¦å‘Š</td></tr><tr><td>fallthrough</td><td>æŠ‘åˆ¶ç¡®åœ¨switchä¸­ç¼ºå¤±breaksçš„è­¦å‘Š</td></tr><tr><td>finally</td><td>æŠ‘åˆ¶finallyæ¨¡å—æ²¡æœ‰è¿”å›çš„è­¦å‘Š</td></tr><tr><td>hiding</td><td>æŠ‘åˆ¶ä¸éšè—å˜æ•°çš„åŒºåŸŸå˜æ•°ç›¸å…³çš„è­¦å‘Š</td></tr><tr><td>incomplete-switch</td><td>å¿½ç•¥æ²¡æœ‰å®Œæ•´çš„switchè¯­å¥</td></tr><tr><td>nls</td><td>å¿½ç•¥énlsæ ¼å¼çš„å­—ç¬¦</td></tr><tr><td>null</td><td>å¿½ç•¥å¯¹nullçš„æ“ä½œ</td></tr><tr><td>rawtype</td><td>ä½¿ç”¨genericsæ—¶å¿½ç•¥æ²¡æœ‰æŒ‡å®šç›¸åº”çš„ç±»å‹ï¼ŒæŠ‘åˆ¶æ³›å‹è­¦å‘Š</td></tr><tr><td>restriction</td><td>æŠ‘åˆ¶ä¸ä½¿ç”¨ä¸å»ºè®®æˆ–ç¦æ­¢å‚ç…§ç›¸å…³çš„è­¦å‘Š</td></tr><tr><td>serial</td><td>å¿½ç•¥åœ¨serializableç±»ä¸­æ²¡æœ‰å£°æ˜serialVersionUIDå˜é‡</td></tr><tr><td>static-access</td><td>æŠ‘åˆ¶ä¸æ­£ç¡®çš„é™æ€è®¿é—®æ–¹å¼è­¦å‘Š</td></tr><tr><td>synthetic-access</td><td>æŠ‘åˆ¶å­ç±»æ²¡æœ‰æŒ‰æœ€ä¼˜æ–¹æ³•è®¿é—®å†…éƒ¨ç±»çš„è­¦å‘Š</td></tr><tr><td>unchecked</td><td>æŠ‘åˆ¶æ²¡æœ‰è¿›è¡Œç±»å‹æ£€æŸ¥æ“ä½œçš„è­¦å‘Š</td></tr><tr><td>unqualified-field-access</td><td>æŠ‘åˆ¶æ²¡æœ‰æƒé™è®¿é—®çš„åŸŸçš„è­¦å‘Š</td></tr><tr><td>unused</td><td>æŠ‘åˆ¶æ²¡è¢«ä½¿ç”¨è¿‡çš„ä»£ç çš„è­¦å‘Š</td></tr></tbody></table><h2 id="2ã€å…ƒæ³¨è§£"><a href="#2ã€å…ƒæ³¨è§£" class="headerlink" title="2ã€å…ƒæ³¨è§£"></a>2ã€å…ƒæ³¨è§£</h2><p>ä¸Šè¿°çš„å†…ç½®æ³¨è§£çš„å®šä¹‰ä¸­ä½¿ç”¨äº†ä¸€äº›å…ƒæ³¨è§£ï¼ˆç”¨äºå®šä¹‰æ³¨è§£çš„æ³¨è§£ï¼‰ï¼Œåœ¨JDK1.5ä¸­æä¾›äº†4ä¸ªæ ‡å‡†çš„å…ƒæ³¨è§£ï¼š<code>@Target</code>ã€<code>@Retention</code>ã€<code>@Documented</code>ã€<code>@Inherited</code>ï¼Œåœ¨JDK1.8ä¸­æä¾›äº†ä¸¤ä¸ªå…ƒæ³¨è§£<code>@Repeatable</code>å’Œ<code>@Native</code>ã€‚</p><h3 id="1ã€-Target"><a href="#1ã€-Target" class="headerlink" title="1ã€@Target"></a>1ã€@Target</h3><p>Targetæ³¨è§£çš„ä½œç”¨æ˜¯ï¼šæè¿°æ³¨è§£çš„ä½¿ç”¨èŒƒå›´(å³ï¼šè¢«ä¿®é¥°çš„æ³¨è§£å¯ä»¥ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹)</p><p>Targetæ³¨è§£ç”¨æ¥è¯´æ˜é‚£äº›è¢«å®ƒæ‰€æ³¨è§£çš„æ³¨è§£ç±»å¯ä¿®é¥°çš„å¯¹è±¡èŒƒå›´ï¼šæ³¨è§£å¯ä»¥ç”¨äºä¿®é¥° packagesã€types(ç±»ã€æ¥å£ã€æšä¸¾ã€æ³¨è§£ç±»)ã€ç±»æˆå‘˜(æ–¹æ³•ã€æ„é€ æ–¹æ³•ã€æˆå‘˜å˜é‡ã€æšä¸¾å€¼)ã€æ–¹æ³•å‚æ•°å’Œæœ¬åœ°å˜é‡(å¦‚å¾ªç¯å˜é‡ã€catchå‚æ•°)ï¼Œåœ¨å®šä¹‰æ³¨è§£ç±»æ—¶ä½¿ç”¨äº† @Target èƒ½å¤Ÿæ›´åŠ æ¸…æ™°çš„çŸ¥é“å®ƒèƒ½å¤Ÿè¢«ç”¨æ¥ä¿®é¥°å“ªäº›å¯¹è±¡ï¼Œå®ƒçš„å–å€¼èŒƒå›´å®šä¹‰åœ¨ ElementType æšä¸¾ä¸­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public enum ElementType &#123;</span><br><span class="line"> </span><br><span class="line">    TYPE, // ç±»ã€æ¥å£ã€æšä¸¾ç±»</span><br><span class="line"> </span><br><span class="line">    FIELD, // æˆå‘˜å˜é‡ï¼ˆåŒ…æ‹¬ï¼šæšä¸¾å¸¸é‡ï¼‰</span><br><span class="line"> </span><br><span class="line">    METHOD, // æˆå‘˜æ–¹æ³•</span><br><span class="line"> </span><br><span class="line">    PARAMETER, // æ–¹æ³•å‚æ•°</span><br><span class="line"> </span><br><span class="line">    CONSTRUCTOR, // æ„é€ æ–¹æ³•</span><br><span class="line"> </span><br><span class="line">    LOCAL_VARIABLE, // å±€éƒ¨å˜é‡</span><br><span class="line"> </span><br><span class="line">    ANNOTATION_TYPE, // æ³¨è§£ç±»</span><br><span class="line"> </span><br><span class="line">    PACKAGE, // å¯ç”¨äºä¿®é¥°ï¼šåŒ…</span><br><span class="line"> </span><br><span class="line">    TYPE_PARAMETER, // ç±»å‹å‚æ•°ï¼ŒJDK 1.8 æ–°å¢</span><br><span class="line"> </span><br><span class="line">    TYPE_USE // ä½¿ç”¨ç±»å‹çš„ä»»ä½•åœ°æ–¹ï¼ŒJDK 1.8 æ–°å¢</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2ã€-Retention"><a href="#2ã€-Retention" class="headerlink" title="2ã€@Retention"></a>2ã€@Retention</h3><p>Retentionæ³¨è§£çš„ä½œç”¨æ˜¯ï¼šæè¿°æ³¨è§£ä¿ç•™çš„æ—¶é—´èŒƒå›´(å³ï¼šè¢«æè¿°çš„æ³¨è§£åœ¨å®ƒæ‰€ä¿®é¥°çš„ç±»ä¸­å¯ä»¥è¢«ä¿ç•™åˆ°ä½•æ—¶)</p><p>Retentionæ³¨è§£ç”¨æ¥é™å®šé‚£äº›è¢«å®ƒæ‰€æ³¨è§£çš„æ³¨è§£ç±»åœ¨æ³¨è§£åˆ°å…¶ä»–ç±»ä¸Šä»¥åï¼Œå¯è¢«ä¿ç•™åˆ°ä½•æ—¶ï¼Œä¸€å…±æœ‰ä¸‰ç§ç­–ç•¥ï¼Œå®šä¹‰åœ¨ RetentionPolicy æšä¸¾ä¸­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public enum RetentionPolicy &#123;</span><br><span class="line">    SOURCE,    // æºæ–‡ä»¶ä¿ç•™</span><br><span class="line">    CLASS,       // ç¼–è¯‘æœŸä¿ç•™ï¼Œé»˜è®¤å€¼</span><br><span class="line">    RUNTIME   // è¿è¡ŒæœŸä¿ç•™ï¼Œå¯é€šè¿‡åå°„å»è·å–æ³¨è§£ä¿¡æ¯</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3ã€-Documented"><a href="#3ã€-Documented" class="headerlink" title="3ã€@Documented"></a>3ã€@Documented</h3><p>Documentedæ³¨è§£çš„ä½œç”¨æ˜¯ï¼šæè¿°åœ¨ä½¿ç”¨ javadoc å·¥å…·ä¸ºç±»ç”Ÿæˆå¸®åŠ©æ–‡æ¡£çš„æ—¶å€™æ˜¯å¦è¦ä¿ç•™å…¶æ³¨è§£ä¿¡æ¯</p><h3 id="4ã€-Inherited"><a href="#4ã€-Inherited" class="headerlink" title="4ã€@Inherited"></a>4ã€@Inherited</h3><p>Inheritedæ³¨è§£çš„ä½œç”¨æ˜¯ï¼šè¢«å®ƒä¿®é¥°çš„ Annotation å°†å…·æœ‰ç»§æ‰¿æ€§ã€‚å¦‚æœæŸä¸ªç±»ä½¿ç”¨äº†è¢« @Inherited ä¿®é¥°çš„ Annotationï¼Œåˆ™å…¶å­ç±»å°†è‡ªåŠ¨å…·æœ‰è¯¥æ³¨è§£</p><h2 id="3ã€æ³¨è§£ä¸åå°„æ¥å£"><a href="#3ã€æ³¨è§£ä¸åå°„æ¥å£" class="headerlink" title="3ã€æ³¨è§£ä¸åå°„æ¥å£"></a>3ã€æ³¨è§£ä¸åå°„æ¥å£</h2><p>å®šä¹‰æ³¨è§£ä¹‹åï¼Œå¦‚æœè·å–æ³¨è§£ä¸­çš„å†…å®¹å‘¢ï¼Ÿåå°„åŒ… <code>java.lang.reflect</code> ä¸‹çš„ AnnotatedElement æ¥å£æä¾›è¿™äº›æ–¹æ³•ã€‚è¿™é‡Œæ³¨æ„ï¼šåªæœ‰æ³¨è§£è¢«å®šä¹‰ä¸º runtime åï¼Œè¯¥æ³¨è§£æ‰èƒ½æ˜¯è¿è¡Œæ—¶å¯è§ï¼Œå½“ class æ–‡ä»¶è¢«è£…è½½æ—¶è¢«ä¿å­˜åœ¨ class æ–‡ä»¶ä¸­çš„ annotation æ‰ä¼šè¢«è™šæ‹Ÿæœºè¯»å–</p><p>AnnotatedElement æ¥å£æ˜¯æ‰€æœ‰ç¨‹åºå…ƒç´ (Classã€Methodå’ŒConstructor)çš„çˆ¶æ¥å£ï¼Œæ‰€ä»¥ç¨‹åºé€šè¿‡åå°„è·å–äº†æŸä¸ªç±»çš„ AnnotatedElement å¯¹è±¡ä¹‹åï¼Œç¨‹åºå°±å¯ä»¥è°ƒç”¨è¯¥å¯¹è±¡çš„æ–¹æ³•æ¥è®¿é—® Annotation ä¿¡æ¯ã€‚</p><ul><li><code>boolean isAnnotationPresent(Class&lt;? extends Annotation&gt; annotationClass)</code></li></ul><p>åˆ¤æ–­è¯¥ç¨‹åºå…ƒç´ ä¸Šæ˜¯å¦åŒ…å«æŒ‡å®šç±»å‹çš„æ³¨è§£ï¼Œå­˜åœ¨åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚æ³¨æ„ï¼šæ­¤æ–¹æ³•ä¼šå¿½ç•¥æ³¨è§£å¯¹åº”çš„æ³¨è§£å®¹å™¨</p><ul><li><code>&lt;T extends Annotation&gt; T getAnnotation(Class&lt;T&gt; annotationClass)</code></li></ul><p>è¿”å›è¯¥ç¨‹åºå…ƒç´ ä¸Šå­˜åœ¨çš„ã€æŒ‡å®šç±»å‹çš„æ³¨è§£ï¼Œå¦‚æœè¯¥ç±»å‹æ³¨è§£ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›null</p><ul><li><code>Annotation[] getAnnotations()</code></li></ul><p>è¿”å›è¯¥ç¨‹åºå…ƒç´ ä¸Šå­˜åœ¨çš„æ‰€æœ‰æ³¨è§£ï¼Œè‹¥æ²¡æœ‰æ³¨è§£ï¼Œè¿”å›é•¿åº¦ä¸º0çš„æ•°ç»„</p><ul><li><code>&lt;T extends Annotation&gt; T[] getAnnotationsByType(Class&lt;T&gt; anotationClass)</code></li></ul><p>è¿”å›è¯¥ç¨‹åºå…ƒç´ ä¸Šå­˜åœ¨çš„ã€æŒ‡å®šç±»å‹çš„æ³¨è§£æ•°ç»„ã€‚æ²¡æœ‰æ³¨è§£å¯¹åº”ç±»å‹çš„æ³¨è§£æ—¶ï¼Œè¿”å›é•¿åº¦ä¸º0çš„æ•°ç»„ã€‚è¯¥æ–¹æ³•çš„è°ƒç”¨è€…å¯ä»¥éšæ„ä¿®æ”¹è¿”å›çš„æ•°ç»„ï¼Œè€Œä¸ä¼šå¯¹å…¶ä»–è°ƒç”¨è€…è¿”å›çš„æ•°ç»„äº§ç”Ÿä»»ä½•å½±å“ã€‚<code>getAnnotationsByType</code>æ–¹æ³•ä¸<code>getAnnotation</code>çš„åŒºåˆ«åœ¨äºï¼Œ<code>getAnnotationsByType</code>ä¼šæ£€æµ‹æ³¨è§£å¯¹åº”çš„é‡å¤æ³¨è§£å®¹å™¨ã€‚è‹¥ç¨‹åºå…ƒç´ ä¸ºç±»ï¼Œå½“å‰ç±»ä¸Šæ‰¾ä¸åˆ°æ³¨è§£ï¼Œä¸”è¯¥æ³¨è§£ä¸ºå¯ç»§æ‰¿çš„ï¼Œåˆ™ä¼šå»çˆ¶ç±»ä¸Šæ£€æµ‹å¯¹åº”çš„æ³¨è§£ã€‚</p><ul><li><code>&lt;T extends Annotation&gt; getDeclaredAnnotation(Class&lt;T&gt; annotationClass)</code></li></ul><p>è¿”å›ç›´æ¥å­˜åœ¨äºæ­¤å…ƒç´ ä¸Šçš„æ‰€æœ‰æ³¨è§£ã€‚ä¸æ­¤æ¥å£ä¸­çš„å…¶ä»–æ–¹æ³•ä¸åŒï¼Œè¯¥æ–¹æ³•å°†å¿½ç•¥ç»§æ‰¿çš„æ³¨è§£ã€‚å¦‚æœæ²¡æœ‰æ³¨è§£ç›´æ¥å­˜åœ¨äºæ­¤å…ƒç´ ä¸Šï¼Œåˆ™è¿”å›null</p><ul><li><code>&lt;T extends Annotation&gt; T[] getDeclaredAnnotationsByType(Class&lt;T&gt; annotationClass)</code></li></ul><p>è¿”å›ç›´æ¥å­˜åœ¨äºæ­¤å…ƒç´ ä¸Šçš„æ‰€æœ‰æ³¨è§£ã€‚äºæ­¤æ¥å£ä¸­çš„å…¶ä»–æ–¹æ³•ä¸åŒï¼Œå°†æ–¹æ³•å°†å¿½ç•¥ç»§æ‰¿çš„æ³¨é‡Š</p><ul><li><code>Annotation[] getDeclaredAnnotations()</code></li></ul><p>è¿”å›ç›´æ¥å­˜åœ¨äºæ­¤å…ƒç´ ä¸Šçš„æ‰€æœ‰æ³¨è§£ä»¥åŠæ³¨è§£å¯¹åº”çš„é‡å¤æ³¨è§£å®¹å™¨ã€‚äºæ­¤æ¥å£ä¸­çš„å…¶ä»–æ–¹æ³•ä¸åŒï¼Œè¯¥æ–¹æ³•å°†å¿½ç•¥ç»§æ‰¿çš„æ³¨è§£ã€‚å¦‚æœæ²¡æœ‰æ³¨è§£ç›´æ¥å­˜åœ¨äºæ­¤å…ƒç´ ä¸Šï¼Œåˆ™è¿”å›é•¿åº¦ä¸º0çš„æ•°ç»„ã€‚è¯¥æ–¹æ³•çš„è°ƒç”¨è€…å¯ä»¥éšæ„ä¿®æ”¹è¿”å›çš„æ•°ç»„ï¼Œè€Œä¸ä¼šå¯¹å…¶ä»–è°ƒç”¨è€…è¿”å›çš„æ•°ç»„äº§ç”Ÿä»»ä½•å½±å“ã€‚</p><h2 id="4ã€è‡ªå®šä¹‰æ³¨è§£"><a href="#4ã€è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="4ã€è‡ªå®šä¹‰æ³¨è§£"></a>4ã€è‡ªå®šä¹‰æ³¨è§£</h2><ul><li>å®šä¹‰è‡ªå·±çš„æ³¨è§£</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Target(ElementType.METHOD)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">public @interface MyMethodAnnotation &#123;</span><br><span class="line">    public String title() default &quot;&quot;;</span><br><span class="line">    public String description() default &quot;&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨æ³¨è§£</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public class TestMethodAnnotation &#123;</span><br><span class="line">    @Override</span><br><span class="line">    @MyMethodAnnotation(title = &quot;toStringMethod&quot;, description = &quot;override toString method&quot;)</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Override toString method&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Deprecated</span><br><span class="line">    @MyMethodAnnotation(title = &quot;old static method&quot;, description = &quot;deprecated old static method&quot;)</span><br><span class="line">    public static void oldMethod() &#123;</span><br><span class="line">        System.out.println(&quot;old method, don&#x27;t use it.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @SuppressWarnings(&#123;&quot;unchecked&quot;, &quot;deprecation&quot;&#125;)</span><br><span class="line">    @MyMethodAnnotation(title = &quot;test method&quot;, description = &quot;suppress warning static method&quot;)</span><br><span class="line">    public static void genericsTest() throws FileNotFoundException &#123;</span><br><span class="line">        List l = new ArrayList();</span><br><span class="line">        l.add(&quot;abc&quot;);</span><br><span class="line">        oldMethod();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç”¨åå°„æ¥å£è·å–æ³¨è§£ä¿¡æ¯</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        // è·å–æ‰€æœ‰methods</span><br><span class="line">        Method[] methods = TestMethodAnnotation.class.getClassLoader()</span><br><span class="line">                .loadClass((&quot;com.pdai.java.annotation.TestMethodAnnotation&quot;))</span><br><span class="line">                .getMethods();</span><br><span class="line"></span><br><span class="line">        // éå†</span><br><span class="line">        for (Method method : methods) &#123;</span><br><span class="line">            // æ–¹æ³•ä¸Šæ˜¯å¦æœ‰MyMethodAnnotationæ³¨è§£</span><br><span class="line">            if (method.isAnnotationPresent(MyMethodAnnotation.class)) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    // è·å–å¹¶éå†æ–¹æ³•ä¸Šçš„æ‰€æœ‰æ³¨è§£</span><br><span class="line">                    for (Annotation anno : method.getDeclaredAnnotations()) &#123;</span><br><span class="line">                        System.out.println(&quot;Annotation in Method &#x27;&quot;</span><br><span class="line">                                + method + &quot;&#x27; : &quot; + anno);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    // è·å–MyMethodAnnotationå¯¹è±¡ä¿¡æ¯</span><br><span class="line">                    MyMethodAnnotation methodAnno = method</span><br><span class="line">                            .getAnnotation(MyMethodAnnotation.class);</span><br><span class="line"></span><br><span class="line">                    System.out.println(methodAnno.title());</span><br><span class="line"></span><br><span class="line">                &#125; catch (Throwable ex) &#123;</span><br><span class="line">                    ex.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; catch (SecurityException | ClassNotFoundException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æµ‹è¯•çš„è¾“å‡º</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Annotation in Method &#x27;public static void com.pdai.java.annotation.TestMethodAnnotation.oldMethod()&#x27; : @java.lang.Deprecated()</span><br><span class="line">Annotation in Method &#x27;public static void com.pdai.java.annotation.TestMethodAnnotation.oldMethod()&#x27; : @com.pdai.java.annotation.MyMethodAnnotation(title=old static method, description=deprecated old static method)</span><br><span class="line">old static method</span><br><span class="line">Annotation in Method &#x27;public static void com.pdai.java.annotation.TestMethodAnnotation.genericsTest() throws java.io.FileNotFoundException&#x27; : @com.pdai.java.annotation.MyMethodAnnotation(title=test method, description=suppress warning static method)</span><br><span class="line">test method</span><br><span class="line">Annotation in Method &#x27;public java.lang.String com.pdai.java.annotation.TestMethodAnnotation.toString()&#x27; : @com.pdai.java.annotation.MyMethodAnnotation(title=toStringMethod, description=override toString method)</span><br><span class="line">toStringMethod</span><br></pre></td></tr></table></figure><h2 id="5ã€è‡ªå®šä¹‰æ³¨è§£å’ŒAOP-é€šè¿‡åˆ‡é¢å®ç°è§£è€¦"><a href="#5ã€è‡ªå®šä¹‰æ³¨è§£å’ŒAOP-é€šè¿‡åˆ‡é¢å®ç°è§£è€¦" class="headerlink" title="5ã€è‡ªå®šä¹‰æ³¨è§£å’ŒAOP-é€šè¿‡åˆ‡é¢å®ç°è§£è€¦"></a>5ã€è‡ªå®šä¹‰æ³¨è§£å’ŒAOP-é€šè¿‡åˆ‡é¢å®ç°è§£è€¦</h2><p>æœ€ä¸ºå¸¸è§çš„å°±æ˜¯ä½¿ç”¨ Spring AOP åˆ‡é¢å®ç°<strong>ç»Ÿä¸€çš„æ“ä½œæ—¥å¿—ç®¡ç†</strong>ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ä¸­çš„ä¾‹å­(åªå±•ç¤ºä¸»è¦ä»£ç )ï¼Œå±•ç¤ºä¸‹å¦‚ä½•é€šè¿‡æ³¨è§£å®ç°è§£è€¦çš„</p><ul><li>è‡ªå®šä¹‰Logæ³¨è§£</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">@Target(&#123; ElementType.PARAMETER, ElementType.METHOD &#125;)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Documented</span><br><span class="line">public @interface Log &#123;</span><br><span class="line">    /**</span><br><span class="line">     * æ¨¡å— </span><br><span class="line">     */</span><br><span class="line">    public String title() default &quot;&quot;;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * åŠŸèƒ½</span><br><span class="line">     */</span><br><span class="line">    public BusinessType businessType() default BusinessType.OTHER;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ“ä½œäººç±»åˆ«</span><br><span class="line">     */</span><br><span class="line">    public OperatorType operatorType() default OperatorType.MANAGE;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ˜¯å¦ä¿å­˜è¯·æ±‚çš„å‚æ•°</span><br><span class="line">     */</span><br><span class="line">    public boolean isSaveRequestData() default true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å®ç°æ—¥å¿—çš„åˆ‡é¢ï¼Œå¯¹è‡ªå®šä¹‰æ³¨è§£Logä½œåˆ‡ç‚¹è¿›è¡Œæ‹¦æˆªï¼Œå³å¯¹æ³¨è§£äº†@Logçš„æ–¹æ³•è¿›è¡Œåˆ‡ç‚¹æ‹¦æˆª</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">@Aspect</span><br><span class="line">@Component</span><br><span class="line">public class LogAspect &#123;</span><br><span class="line">    private static final Logger log = LoggerFactory.getLogger(LogAspect.class);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * é…ç½®ç»‡å…¥ç‚¹ - è‡ªå®šä¹‰æ³¨è§£çš„åŒ…è·¯å¾„</span><br><span class="line">     * </span><br><span class="line">     */</span><br><span class="line">    @Pointcut(&quot;@annotation(com.xxx.aspectj.lang.annotation.Log)&quot;)</span><br><span class="line">    public void logPointCut() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å¤„ç†å®Œè¯·æ±‚åæ‰§è¡Œ</span><br><span class="line">     *</span><br><span class="line">     * @param joinPoint åˆ‡ç‚¹</span><br><span class="line">     */</span><br><span class="line">    @AfterReturning(pointcut = &quot;logPointCut()&quot;, returning = &quot;jsonResult&quot;)</span><br><span class="line">    public void doAfterReturning(JoinPoint joinPoint, Object jsonResult) &#123;</span><br><span class="line">        handleLog(joinPoint, null, jsonResult);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ‹¦æˆªå¼‚å¸¸æ“ä½œ</span><br><span class="line">     * </span><br><span class="line">     * @param joinPoint åˆ‡ç‚¹</span><br><span class="line">     * @param e å¼‚å¸¸</span><br><span class="line">     */</span><br><span class="line">    @AfterThrowing(value = &quot;logPointCut()&quot;, throwing = &quot;e&quot;)</span><br><span class="line">    public void doAfterThrowing(JoinPoint joinPoint, Exception e) &#123;</span><br><span class="line">        handleLog(joinPoint, e, null);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected void handleLog(final JoinPoint joinPoint, final Exception e, Object jsonResult) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            // è·å¾—æ³¨è§£</span><br><span class="line">            Log controllerLog = getAnnotationLog(joinPoint);</span><br><span class="line">            if (controllerLog == null) &#123;</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // è·å–å½“å‰çš„ç”¨æˆ·</span><br><span class="line">            User currentUser = ShiroUtils.getSysUser();</span><br><span class="line"></span><br><span class="line">            // *========æ•°æ®åº“æ—¥å¿—=========*//</span><br><span class="line">            OperLog operLog = new OperLog();</span><br><span class="line">            operLog.setStatus(BusinessStatus.SUCCESS.ordinal());</span><br><span class="line">            // è¯·æ±‚çš„åœ°å€</span><br><span class="line">            String ip = ShiroUtils.getIp();</span><br><span class="line">            operLog.setOperIp(ip);</span><br><span class="line">            // è¿”å›å‚æ•°</span><br><span class="line">            operLog.setJsonResult(JSONObject.toJSONString(jsonResult));</span><br><span class="line"></span><br><span class="line">            operLog.setOperUrl(ServletUtils.getRequest().getRequestURI());</span><br><span class="line">            if (currentUser != null) &#123;</span><br><span class="line">                operLog.setOperName(currentUser.getLoginName());</span><br><span class="line">                if (StringUtils.isNotNull(currentUser.getDept())</span><br><span class="line">                        &amp;&amp; StringUtils.isNotEmpty(currentUser.getDept().getDeptName())) &#123;</span><br><span class="line">                    operLog.setDeptName(currentUser.getDept().getDeptName());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if (e != null) &#123;</span><br><span class="line">                operLog.setStatus(BusinessStatus.FAIL.ordinal());</span><br><span class="line">                operLog.setErrorMsg(StringUtils.substring(e.getMessage(), 0, 2000));</span><br><span class="line">            &#125;</span><br><span class="line">            // è®¾ç½®æ–¹æ³•åç§°</span><br><span class="line">            String className = joinPoint.getTarget().getClass().getName();</span><br><span class="line">            String methodName = joinPoint.getSignature().getName();</span><br><span class="line">            operLog.setMethod(className + &quot;.&quot; + methodName + &quot;()&quot;);</span><br><span class="line">            // è®¾ç½®è¯·æ±‚æ–¹å¼</span><br><span class="line">            operLog.setRequestMethod(ServletUtils.getRequest().getMethod());</span><br><span class="line">            // å¤„ç†è®¾ç½®æ³¨è§£ä¸Šçš„å‚æ•°</span><br><span class="line">            getControllerMethodDescription(controllerLog, operLog);</span><br><span class="line">            // ä¿å­˜æ•°æ®åº“</span><br><span class="line">            AsyncManager.me().execute(AsyncFactory.recordOper(operLog));</span><br><span class="line">        &#125; catch (Exception exp) &#123;</span><br><span class="line">            // è®°å½•æœ¬åœ°å¼‚å¸¸æ—¥å¿—</span><br><span class="line">            log.error(&quot;==å‰ç½®é€šçŸ¥å¼‚å¸¸==&quot;);</span><br><span class="line">            log.error(&quot;å¼‚å¸¸ä¿¡æ¯:&#123;&#125;&quot;, exp.getMessage());</span><br><span class="line">            exp.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è·å–æ³¨è§£ä¸­å¯¹æ–¹æ³•çš„æè¿°ä¿¡æ¯ ç”¨äºControllerå±‚æ³¨è§£</span><br><span class="line">     * </span><br><span class="line">     * @param log æ—¥å¿—</span><br><span class="line">     * @param operLog æ“ä½œæ—¥å¿—</span><br><span class="line">     * @throws Exception</span><br><span class="line">     */</span><br><span class="line">    public void getControllerMethodDescription(Log log, OperLog operLog) throws Exception &#123;</span><br><span class="line">        // è®¾ç½®actionåŠ¨ä½œ</span><br><span class="line">        operLog.setBusinessType(log.businessType().ordinal());</span><br><span class="line">        // è®¾ç½®æ ‡é¢˜</span><br><span class="line">        operLog.setTitle(log.title());</span><br><span class="line">        // è®¾ç½®æ“ä½œäººç±»åˆ«</span><br><span class="line">        operLog.setOperatorType(log.operatorType().ordinal());</span><br><span class="line">        // æ˜¯å¦éœ€è¦ä¿å­˜requestï¼Œå‚æ•°å’Œå€¼</span><br><span class="line">        if (log.isSaveRequestData()) &#123;</span><br><span class="line">            // è·å–å‚æ•°çš„ä¿¡æ¯ï¼Œä¼ å…¥åˆ°æ•°æ®åº“ä¸­ã€‚</span><br><span class="line">            setRequestValue(operLog);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è·å–è¯·æ±‚çš„å‚æ•°ï¼Œæ”¾åˆ°logä¸­</span><br><span class="line">     * </span><br><span class="line">     * @param operLog</span><br><span class="line">     * @param request</span><br><span class="line">     */</span><br><span class="line">    private void setRequestValue(OperLog operLog) &#123;</span><br><span class="line">        Map&lt;String, String[]&gt; map = ServletUtils.getRequest().getParameterMap();</span><br><span class="line">        String params = JSONObject.toJSONString(map);</span><br><span class="line">        operLog.setOperParam(StringUtils.substring(params, 0, 2000));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ˜¯å¦å­˜åœ¨æ³¨è§£ï¼Œå¦‚æœå­˜åœ¨å°±è·å–</span><br><span class="line">     */</span><br><span class="line">    private Log getAnnotationLog(JoinPoint joinPoint) throws Exception &#123;</span><br><span class="line">        Signature signature = joinPoint.getSignature();</span><br><span class="line">        MethodSignature methodSignature = (MethodSignature) signature;</span><br><span class="line">        Method method = methodSignature.getMethod();</span><br><span class="line"></span><br><span class="line">        if (method != null)</span><br><span class="line">        &#123;</span><br><span class="line">            return method.getAnnotation(Log.class);</span><br><span class="line">        &#125;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨@Logæ³¨è§£</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">@RequestMapping(&quot;/system/dept&quot;)</span><br><span class="line">public class DeptController extends BaseController &#123;</span><br><span class="line">    private String prefix = &quot;system/dept&quot;;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private IDeptService deptService;</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     * æ–°å¢ä¿å­˜éƒ¨é—¨</span><br><span class="line">     */</span><br><span class="line">    @Log(title = &quot;éƒ¨é—¨ç®¡ç†&quot;, businessType = BusinessType.INSERT)</span><br><span class="line">    @RequiresPermissions(&quot;system:dept:add&quot;)</span><br><span class="line">    @PostMapping(&quot;/add&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public AjaxResult addSave(@Validated Dept dept) &#123;</span><br><span class="line">        if (UserConstants.DEPT_NAME_NOT_UNIQUE.equals(deptService.checkDeptNameUnique(dept))) &#123;</span><br><span class="line">            return error(&quot;æ–°å¢éƒ¨é—¨&#x27;&quot; + dept.getDeptName() + &quot;&#x27;å¤±è´¥ï¼Œéƒ¨é—¨åç§°å·²å­˜åœ¨&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        return toAjax(deptService.insertDept(dept));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ä¿å­˜</span><br><span class="line">     */</span><br><span class="line">    @Log(title = &quot;éƒ¨é—¨ç®¡ç†&quot;, businessType = BusinessType.UPDATE)</span><br><span class="line">    @RequiresPermissions(&quot;system:dept:edit&quot;)</span><br><span class="line">    @PostMapping(&quot;/edit&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public AjaxResult editSave(@Validated Dept dept) &#123;</span><br><span class="line">        if (UserConstants.DEPT_NAME_NOT_UNIQUE.equals(deptService.checkDeptNameUnique(dept))) &#123;</span><br><span class="line">            return error(&quot;ä¿®æ”¹éƒ¨é—¨&#x27;&quot; + dept.getDeptName() + &quot;&#x27;å¤±è´¥ï¼Œéƒ¨é—¨åç§°å·²å­˜åœ¨&quot;);</span><br><span class="line">        &#125; else if(dept.getParentId().equals(dept.getDeptId())) &#123;</span><br><span class="line">            return error(&quot;ä¿®æ”¹éƒ¨é—¨&#x27;&quot; + dept.getDeptName() + &quot;&#x27;å¤±è´¥ï¼Œä¸Šçº§éƒ¨é—¨ä¸èƒ½æ˜¯è‡ªå·±&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        return toAjax(deptService.updateDept(dept));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * åˆ é™¤</span><br><span class="line">     */</span><br><span class="line">    @Log(title = &quot;éƒ¨é—¨ç®¡ç†&quot;, businessType = BusinessType.DELETE)</span><br><span class="line">    @RequiresPermissions(&quot;system:dept:remove&quot;)</span><br><span class="line">    @GetMapping(&quot;/remove/&#123;deptId&#125;&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public AjaxResult remove(@PathVariable(&quot;deptId&quot;) Long deptId) &#123;</span><br><span class="line">        if (deptService.selectDeptCount(deptId) &gt; 0) &#123;</span><br><span class="line">            return AjaxResult.warn(&quot;å­˜åœ¨ä¸‹çº§éƒ¨é—¨,ä¸å…è®¸åˆ é™¤&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        if (deptService.checkDeptExistUser(deptId)) &#123;</span><br><span class="line">            return AjaxResult.warn(&quot;éƒ¨é—¨å­˜åœ¨ç”¨æˆ·,ä¸å…è®¸åˆ é™¤&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        return toAjax(deptService.deleteDeptById(deptId));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ ·çš„ï¼Œä½ ä¹Ÿå¯ä»¥çœ‹åˆ°æƒé™ç®¡ç†ä¹Ÿæ˜¯é€šè¿‡ç±»ä¼¼çš„æ³¨è§£(<code>@RequirePermissions</code>)æœºåˆ¶æ¥å®ç°çš„ã€‚æ‰€ä»¥å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡æ³¨è§£+AOPæœ€ç»ˆçš„ç›®æ ‡æ˜¯ä¸ºäº†å®ç°æ¨¡å—çš„è§£è€¦ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> javaåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaå¼€å‘ </tag>
            
            <tag> æ³¨è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å…¬ä¼—å·å¼€å‘</title>
      <link href="/article/a6b8861e.html"/>
      <url>/article/a6b8861e.html</url>
      
        <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>è¦å®ç°å€ŸåŠ©å…¬ä¼—å·ç»™ç³»ç»Ÿä¸­çš„ç”¨æˆ·å‘é€é€šçŸ¥ï¼Œåˆ™è‡³å…³é‡è¦çš„ä¸€æ­¥å°±æ˜¯å°†å…¬ä¼—å·ç”¨æˆ·ä¸ç³»ç»Ÿç”¨æˆ·ç»‘å®šèµ·æ¥ã€‚è¿™æ ·åœ¨ç³»ç»Ÿä¸­éœ€è¦å‘é€é€šçŸ¥çš„æ—¶å€™ï¼Œå°±å¯ä»¥çŸ¥é“å¯¹å“ªä¸ªå…³æ³¨äº†å…¬ä¼—å·çš„ç”¨æˆ·å‘é€é€šçŸ¥ã€‚</p><h2 id="1ã€æ¥å£æµ‹è¯•å·"><a href="#1ã€æ¥å£æµ‹è¯•å·" class="headerlink" title="1ã€æ¥å£æµ‹è¯•å·"></a>1ã€<a href="https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login">æ¥å£æµ‹è¯•å·</a></h2><h3 id="1-1ã€ç™»å½•å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•å·æ¥å£"><a href="#1-1ã€ç™»å½•å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•å·æ¥å£" class="headerlink" title="1.1ã€ç™»å½•å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•å·æ¥å£"></a>1.1ã€ç™»å½•å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•å·æ¥å£</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071001729.png" alt="img"></p><h3 id="1-2ã€å¡«å†™æ¥å£é…ç½®ä¿¡æ¯"><a href="#1-2ã€å¡«å†™æ¥å£é…ç½®ä¿¡æ¯" class="headerlink" title="1.2ã€å¡«å†™æ¥å£é…ç½®ä¿¡æ¯"></a>1.2ã€å¡«å†™æ¥å£é…ç½®ä¿¡æ¯</h3><p>è¯¥æ­¥éª¤éœ€è¦ä½¿ç”¨åˆ°å†…ç½‘ç©¿é€å·¥å…·<a href="https://www.yuque.com/xihuanxiaorang/ng3te7/delw5o%E3%80%82%E6%8F%90%E4%BA%A4%E9%85%8D%E7%BD%AE%E7%9A%84%E6%97%B6%E5%80%99%E4%BC%9A%E6%8A%8A%E8%BF%99%E4%B8%AAtoken%E5%8F%91%E9%80%81%E5%88%B0%E5%BE%AE%E4%BF%A1%E5%B9%B3%E5%8F%B0%EF%BC%8C%E7%84%B6%E5%90%8E%E5%BE%AE%E4%BF%A1%E5%B9%B3%E5%8F%B0%E4%BC%9A%E8%AF%B7%E6%B1%82%E6%AD%A4URL%E8%B0%83%E7%94%A8%E5%BC%80%E5%8F%91%E7%9A%84%E5%BE%AE%E4%BF%A1%E6%9C%8D%E5%8A%A1%EF%BC%8C%E9%AA%8C%E8%AF%81%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%8F%AF%E7%94%A8%E6%80%A7%E5%92%8C%E5%90%88%E6%B3%95%E6%80%A7%E3%80%82">https://www.yuque.com/xihuanxiaorang/ng3te7/delw5oã€‚æäº¤é…ç½®çš„æ—¶å€™ä¼šæŠŠè¿™ä¸ªtokenå‘é€åˆ°å¾®ä¿¡å¹³å°ï¼Œç„¶åå¾®ä¿¡å¹³å°ä¼šè¯·æ±‚æ­¤URLè°ƒç”¨å¼€å‘çš„å¾®ä¿¡æœåŠ¡ï¼ŒéªŒè¯æœåŠ¡çš„å¯ç”¨æ€§å’Œåˆæ³•æ€§ã€‚</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">URL:http://intelliws.vaiwan.com/api/wx/portal/appID</span><br><span class="line">Token:intelliws</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071001688.png" alt="img"></p><h3 id="1-3ã€å¼€å‘ç¯å¢ƒå‡†å¤‡"><a href="#1-3ã€å¼€å‘ç¯å¢ƒå‡†å¤‡" class="headerlink" title="1.3ã€å¼€å‘ç¯å¢ƒå‡†å¤‡"></a>1.3ã€å¼€å‘ç¯å¢ƒå‡†å¤‡</h3><h4 id="1-3-1ã€å¼•å…¥-wx-java-mp-spring-boot-starter-ä¾èµ–"><a href="#1-3-1ã€å¼•å…¥-wx-java-mp-spring-boot-starter-ä¾èµ–" class="headerlink" title="1.3.1ã€å¼•å…¥ wx-java-mp-spring-boot-starter ä¾èµ–"></a>1.3.1ã€å¼•å…¥ <code>wx-java-mp-spring-boot-starter</code> ä¾èµ–</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">   &lt;groupId&gt;com.github.binarywang&lt;/groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;wx-java-mp-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">   &lt;version&gt;4.1.5.B&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="1-3-2ã€é…ç½®æ–‡ä»¶"><a href="#1-3-2ã€é…ç½®æ–‡ä»¶" class="headerlink" title="1.3.2ã€é…ç½®æ–‡ä»¶"></a>1.3.2ã€é…ç½®æ–‡ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx.mp.app-id=wxe04ed9ab275e518f</span><br><span class="line">wx.mp.secret=dc8ab44fbd2be76a1690f9acedbe1c18</span><br><span class="line">wx.mp.token=intelliws</span><br></pre></td></tr></table></figure><h4 id="1-3-3ã€ç¼–å†™controller"><a href="#1-3-3ã€ç¼–å†™controller" class="headerlink" title="1.3.3ã€ç¼–å†™controller"></a>1.3.3ã€ç¼–å†™controller</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/api/wx/portal/&#123;appid&#125;&quot;)</span><br><span class="line">public class WeiXinMpController &#123;</span><br><span class="line">private static final Logger logger = LoggerFactory.getLogger(WeiXinMpController.class);</span><br><span class="line">private final WxMpService wxMpService;</span><br><span class="line"></span><br><span class="line">public WeiXinMpController(WxMpService wxMpService) &#123;</span><br><span class="line">this.wxMpService = wxMpService;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@GetMapping</span><br><span class="line">public void authGet(@PathVariable String appid,</span><br><span class="line">@RequestParam(name = &quot;signature&quot;, required = false) String signature,</span><br><span class="line">@RequestParam(name = &quot;timestamp&quot;, required = false) String timestamp,</span><br><span class="line">@RequestParam(name = &quot;nonce&quot;, required = false) String nonce,</span><br><span class="line">@RequestParam(name = &quot;echostr&quot;, required = false) String echostr, HttpServletResponse response)</span><br><span class="line">throws IOException &#123;</span><br><span class="line">logger.info(&quot;\næ¥æ”¶åˆ°æ¥è‡ªå¾®ä¿¡æœåŠ¡å™¨çš„è®¤è¯æ¶ˆæ¯ï¼š[&#123;&#125;, &#123;&#125;, &#123;&#125;, &#123;&#125;]&quot;, signature, timestamp, nonce, echostr);</span><br><span class="line">if (StringUtils.isAnyBlank(signature, timestamp, nonce, echostr)) &#123;</span><br><span class="line">throw new IllegalArgumentException(&quot;è¯·æ±‚å‚æ•°éæ³•ï¼Œè¯·æ ¸å®!&quot;);</span><br><span class="line">&#125;</span><br><span class="line">if (!this.wxMpService.switchover(appid)) &#123;</span><br><span class="line">throw new IllegalArgumentException(String.format(&quot;æœªæ‰¾åˆ°å¯¹åº”appid=[%s]çš„é…ç½®ï¼Œè¯·æ ¸å®ï¼&quot;, appid));</span><br><span class="line">&#125;</span><br><span class="line">PrintWriter out = response.getWriter();</span><br><span class="line">if (wxMpService.checkSignature(timestamp, nonce, signature)) &#123;</span><br><span class="line">out.write(echostr);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">out.write(&quot;éæ³•è¯·æ±‚ï¼&quot;);</span><br><span class="line">&#125;</span><br><span class="line">out.flush();</span><br><span class="line">out.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1-3-4ã€å¯åŠ¨å†…ç½‘ç©¿é€ï¼Œç‚¹å‡»é¡µé¢æäº¤"><a href="#1-3-4ã€å¯åŠ¨å†…ç½‘ç©¿é€ï¼Œç‚¹å‡»é¡µé¢æäº¤" class="headerlink" title="1.3.4ã€å¯åŠ¨å†…ç½‘ç©¿é€ï¼Œç‚¹å‡»é¡µé¢æäº¤"></a>1.3.4ã€å¯åŠ¨å†…ç½‘ç©¿é€ï¼Œç‚¹å‡»é¡µé¢æäº¤</h2><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071001661.png" alt="img"></p><h2 id="2ã€æ¥æ”¶ä¸å“åº”æ¶ˆæ¯"><a href="#2ã€æ¥æ”¶ä¸å“åº”æ¶ˆæ¯" class="headerlink" title="2ã€æ¥æ”¶ä¸å“åº”æ¶ˆæ¯"></a>2ã€æ¥æ”¶ä¸å“åº”æ¶ˆæ¯</h2><h3 id="2-1ã€æ¶ˆæ¯å¤„ç†å™¨æ¥å£"><a href="#2-1ã€æ¶ˆæ¯å¤„ç†å™¨æ¥å£" class="headerlink" title="2.1ã€æ¶ˆæ¯å¤„ç†å™¨æ¥å£"></a>2.1ã€æ¶ˆæ¯å¤„ç†å™¨æ¥å£</h3><p><strong>WxJava</strong> ä¸ºäº†å¯¹ä¸åŒç±»å‹çš„å¾®ä¿¡æ¶ˆæ¯è¿›è¡Œåˆ†ç±»å¤„ç†ï¼Œç”¨æˆ·å¿…é¡»è‡ªå·±å®ç°ä¸åŒç±»å‹çš„æ¶ˆæ¯å¤„ç†å™¨ï¼Œè€Œæ¶ˆæ¯å¤„ç†å™¨å¿…é¡»å®ç° <code>WxMpMessageHandler</code> æ¥å£ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å¤„ç†å¾®ä¿¡æ¨é€æ¶ˆæ¯çš„å¤„ç†å™¨æ¥å£.</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">public interface WxMpMessageHandler &#123;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * å¤„ç†å¾®ä¿¡æ¨é€æ¶ˆæ¯.</span><br><span class="line">   *</span><br><span class="line">   * @param wxMessage      å¾®ä¿¡æ¨é€æ¶ˆæ¯</span><br><span class="line">   * @param context        ä¸Šä¸‹æ–‡ï¼Œå¦‚æœhandleræˆ–interceptorä¹‹é—´æœ‰ä¿¡æ¯è¦ä¼ é€’ï¼Œå¯ä»¥ç”¨è¿™ä¸ª</span><br><span class="line">   * @param wxMpService    æœåŠ¡ç±»</span><br><span class="line">   * @param sessionManager sessionç®¡ç†å™¨</span><br><span class="line">   * @return xmlæ ¼å¼çš„æ¶ˆæ¯ï¼Œå¦‚æœåœ¨å¼‚æ­¥è§„åˆ™é‡Œå¤„ç†çš„è¯ï¼Œå¯ä»¥è¿”å›null</span><br><span class="line">   * @throws WxErrorException å¼‚å¸¸</span><br><span class="line">   */</span><br><span class="line">  WxMpXmlOutMessage handle(WxMpXmlMessage wxMessage,</span><br><span class="line">                           Map&lt;String, Object&gt; context,</span><br><span class="line">                           WxMpService wxMpService,</span><br><span class="line">                           WxSessionManager sessionManager) throws WxErrorException;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2ã€å…³æ³¨ä¸å–æ¶ˆå…³æ³¨äº‹ä»¶"><a href="#2-2ã€å…³æ³¨ä¸å–æ¶ˆå…³æ³¨äº‹ä»¶" class="headerlink" title="2.2ã€å…³æ³¨ä¸å–æ¶ˆå…³æ³¨äº‹ä»¶"></a>2.2ã€å…³æ³¨ä¸å–æ¶ˆå…³æ³¨äº‹ä»¶</h3><h4 id="2-2-1ã€å®ç°æ¶ˆæ¯å¤„ç†å™¨"><a href="#2-2-1ã€å®ç°æ¶ˆæ¯å¤„ç†å™¨" class="headerlink" title="2.2.1ã€å®ç°æ¶ˆæ¯å¤„ç†å™¨"></a>2.2.1ã€å®ç°æ¶ˆæ¯å¤„ç†å™¨</h4><p>å®ç°ä¸€ä¸ªæ¥æ”¶å…³æ³¨ã€å–æ¶ˆå…³æ³¨äº‹ä»¶æ¨é€çš„å¤„ç†ã€‚é¦–å…ˆå®šä¹‰å…³æ³¨å’Œå–æ¶ˆå…³æ³¨çš„æ¶ˆæ¯å¤„ç†å™¨å­˜å…¥å®¹å™¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class WxMpSubscribeHandler implements WxMpMessageHandler &#123;</span><br><span class="line">private static final Logger logger = LoggerFactory.getLogger(WxMpSubscribeHandler.class);</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public WxMpXmlOutMessage handle(WxMpXmlMessage wxMessage, Map&lt;String, Object&gt; context, WxMpService wxMpService,</span><br><span class="line">WxSessionManager sessionManager) throws WxErrorException &#123;</span><br><span class="line">logger.info(&quot;æ–°å…³æ³¨ç”¨æˆ·: &#123;&#125;&quot;, wxMessage.getFromUser());</span><br><span class="line">// è·å–å¾®ä¿¡ç”¨æˆ·åŸºæœ¬ä¿¡æ¯</span><br><span class="line">try &#123;</span><br><span class="line">WxMpUser userWxInfo = wxMpService.getUserService().userInfo(wxMessage.getFromUser(), null);</span><br><span class="line">if (userWxInfo != null) &#123;</span><br><span class="line">// TODO å¯ä»¥æ·»åŠ å…³æ³¨ç”¨æˆ·åˆ°æœ¬åœ°æ•°æ®åº“</span><br><span class="line">logger.info(&quot;ç”¨æˆ·ä¿¡æ¯: &#123;&#125;&quot;, userWxInfo);</span><br><span class="line">&#125;</span><br><span class="line">return WxMpXmlOutMessage.TEXT().fromUser(wxMessage.getToUser()).toUser(wxMessage.getFromUser())</span><br><span class="line">.content(&quot;æ¬¢è¿å…³æ³¨ï¼&quot;).build();</span><br><span class="line">&#125; catch (WxErrorException e) &#123;</span><br><span class="line">if (e.getError().getErrorCode() == 48001) &#123;</span><br><span class="line">logger.info(&quot;è¯¥å…¬ä¼—å·æ²¡æœ‰è·å–ç”¨æˆ·ä¿¡æ¯æƒé™ï¼&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">return null;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">@Component</span><br><span class="line">public class WxMpUnSubscribeHandler implements WxMpMessageHandler &#123;</span><br><span class="line">private static final Logger logger = LoggerFactory.getLogger(WxMpUnSubscribeHandler.class);</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public WxMpXmlOutMessage handle(WxMpXmlMessage wxMessage, Map&lt;String, Object&gt; context, WxMpService wxMpService,</span><br><span class="line">WxSessionManager sessionManager) throws WxErrorException &#123;</span><br><span class="line">logger.info(&quot;ç”¨æˆ·å–æ¶ˆå…³æ³¨: &#123;&#125;&quot;, wxMessage.getFromUser());</span><br><span class="line">// TODO å¯ä»¥æ›´æ–°æœ¬åœ°æ•°æ®åº“ä¸ºå–æ¶ˆå…³æ³¨çŠ¶æ€</span><br><span class="line">// å› ä¸ºå·²ç»å–æ¶ˆå…³æ³¨ï¼Œæ‰€ä»¥å³ä½¿å›å¤æ¶ˆæ¯ä¹Ÿæ”¶ä¸åˆ°</span><br><span class="line">return WxMpXmlOutMessage.TEXT().fromUser(wxMessage.getToUser()).toUser(wxMessage.getFromUser()).content(&quot;è¯·åˆ«ç¦»å¼€æˆ‘&quot;)</span><br><span class="line">.build();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-2ã€æŒ‡å®šæ¶ˆæ¯è·¯ç”±è§„åˆ™"><a href="#2-2-2ã€æŒ‡å®šæ¶ˆæ¯è·¯ç”±è§„åˆ™" class="headerlink" title="2.2.2ã€æŒ‡å®šæ¶ˆæ¯è·¯ç”±è§„åˆ™"></a>2.2.2ã€æŒ‡å®šæ¶ˆæ¯è·¯ç”±è§„åˆ™</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class WeiXinMpConfig &#123;</span><br><span class="line">private final WxMpService wxMpService;</span><br><span class="line">private final WxMpSubscribeHandler wxMpSubscribeHandler;</span><br><span class="line">private final WxMpUnSubscribeHandler wxMpUnSubscribeHandler;</span><br><span class="line"></span><br><span class="line">public WeiXinMpConfig(WxMpService wxMpService, WxMpSubscribeHandler wxMpSubscribeHandler,</span><br><span class="line">WxMpUnSubscribeHandler wxMpUnSubscribeHandler) &#123;</span><br><span class="line">this.wxMpService = wxMpService;</span><br><span class="line">this.wxMpSubscribeHandler = wxMpSubscribeHandler;</span><br><span class="line">this.wxMpUnSubscribeHandler = wxMpUnSubscribeHandler;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Bean</span><br><span class="line">public WxMpMessageRouter wxMpMessageRouter() &#123;</span><br><span class="line">final WxMpMessageRouter router = new WxMpMessageRouter(wxMpService);</span><br><span class="line">router.rule().async(false).msgType(WxConsts.XmlMsgType.EVENT).event(WxConsts.EventType.SUBSCRIBE)</span><br><span class="line">.handler(wxMpSubscribeHandler).end();</span><br><span class="line">router.rule().async(false).msgType(WxConsts.XmlMsgType.EVENT).event(WxConsts.EventType.UNSUBSCRIBE)</span><br><span class="line">.handler(wxMpUnSubscribeHandler).end();</span><br><span class="line">return router;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-3ã€ç¼–å†™controller"><a href="#2-2-3ã€ç¼–å†™controller" class="headerlink" title="2.2.3ã€ç¼–å†™controller"></a>2.2.3ã€ç¼–å†™controller</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">@PostMapping(produces = &quot;application/xml; charset=UTF-8&quot;)</span><br><span class="line">public String post(@PathVariable String appid, @RequestBody String requestBody,</span><br><span class="line">                   @RequestParam(&quot;signature&quot;) String signature, @RequestParam(&quot;timestamp&quot;) String timestamp,</span><br><span class="line">                   @RequestParam(&quot;nonce&quot;) String nonce, @RequestParam(&quot;openid&quot;) String openid,</span><br><span class="line">                   @RequestParam(name = &quot;encrypt_type&quot;, required = false) String encType,</span><br><span class="line">                   @RequestParam(name = &quot;msg_signature&quot;, required = false) String msgSignature) &#123;</span><br><span class="line">    logger.info(</span><br><span class="line">        &quot;\næ¥æ”¶å¾®ä¿¡è¯·æ±‚ï¼š[appid=[&#123;&#125;], openid=[&#123;&#125;], [signature=[&#123;&#125;], encType=[&#123;&#125;], msgSignature=[&#123;&#125;],&quot;</span><br><span class="line">        + &quot; timestamp=[&#123;&#125;], nonce=[&#123;&#125;], requestBody=[\n&#123;&#125;\n] &quot;,</span><br><span class="line">        appid, openid, signature, encType, msgSignature, timestamp, nonce, requestBody);</span><br><span class="line">    if (!this.wxMpService.switchover(appid)) &#123;</span><br><span class="line">        throw new IllegalArgumentException(String.format(&quot;æœªæ‰¾åˆ°å¯¹åº”appid=[%s]çš„é…ç½®ï¼Œè¯·æ ¸å®ï¼&quot;, appid));</span><br><span class="line">    &#125;</span><br><span class="line">    if (!wxMpService.checkSignature(timestamp, nonce, signature)) &#123;</span><br><span class="line">        throw new IllegalArgumentException(&quot;éæ³•è¯·æ±‚ï¼Œå¯èƒ½å±äºä¼ªé€ çš„è¯·æ±‚ï¼&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    String out = null;</span><br><span class="line">    if (encType == null) &#123;</span><br><span class="line">        // æ˜æ–‡ä¼ è¾“çš„æ¶ˆæ¯</span><br><span class="line">        WxMpXmlMessage inMessage = WxMpXmlMessage.fromXml(requestBody);</span><br><span class="line">        WxMpXmlOutMessage outMessage = this.route(inMessage);</span><br><span class="line">        if (outMessage == null) &#123;</span><br><span class="line">            return &quot;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        out = outMessage.toXml();</span><br><span class="line">    &#125; else if (&quot;aes&quot;.equalsIgnoreCase(encType)) &#123;</span><br><span class="line">        // aesåŠ å¯†çš„æ¶ˆæ¯</span><br><span class="line">        WxMpXmlMessage inMessage = WxMpXmlMessage.fromEncryptedXml(requestBody, wxMpService.getWxMpConfigStorage(),</span><br><span class="line">                                                                   timestamp, nonce, msgSignature);</span><br><span class="line">        logger.debug(&quot;\næ¶ˆæ¯è§£å¯†åå†…å®¹ä¸ºï¼š\n&#123;&#125; &quot;, inMessage.toString());</span><br><span class="line">        WxMpXmlOutMessage outMessage = this.route(inMessage);</span><br><span class="line">        if (outMessage == null) &#123;</span><br><span class="line">            return &quot;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        out = outMessage.toEncryptedXml(wxMpService.getWxMpConfigStorage());</span><br><span class="line">    &#125;</span><br><span class="line">    logger.debug(&quot;\nç»„è£…å›å¤ä¿¡æ¯ï¼š&#123;&#125;&quot;, out);</span><br><span class="line">    return out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private WxMpXmlOutMessage route(WxMpXmlMessage message) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        return this.wxMpMessageRouter.route(message);</span><br><span class="line">    &#125; catch (Exception e) &#123;</span><br><span class="line">        logger.error(&quot;è·¯ç”±æ¶ˆæ¯æ—¶å‡ºç°å¼‚å¸¸ï¼&quot;, e);</span><br><span class="line">    &#125;</span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-2-4ã€ç”¨æˆ·æ‰«ç å…³æ³¨"><a href="#2-2-4ã€ç”¨æˆ·æ‰«ç å…³æ³¨" class="headerlink" title="2.2.4ã€ç”¨æˆ·æ‰«ç å…³æ³¨"></a>2.2.4ã€ç”¨æˆ·æ‰«ç å…³æ³¨</h4><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071001735.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071001797.png" alt="img"></p><h4 id="2-2-5ã€ç”¨æˆ·å–æ¶ˆå…³æ³¨"><a href="#2-2-5ã€ç”¨æˆ·å–æ¶ˆå…³æ³¨" class="headerlink" title="2.2.5ã€ç”¨æˆ·å–æ¶ˆå…³æ³¨"></a>2.2.5ã€ç”¨æˆ·å–æ¶ˆå…³æ³¨</h4><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071019409.png" alt="img"></p><h2 id="3ã€å…¬ä¼—å·ç”¨æˆ·ä¸ç½‘ç«™ç”¨æˆ·ç»‘å®š"><a href="#3ã€å…¬ä¼—å·ç”¨æˆ·ä¸ç½‘ç«™ç”¨æˆ·ç»‘å®š" class="headerlink" title="3ã€å…¬ä¼—å·ç”¨æˆ·ä¸ç½‘ç«™ç”¨æˆ·ç»‘å®š"></a>3ã€å…¬ä¼—å·ç”¨æˆ·ä¸ç½‘ç«™ç”¨æˆ·ç»‘å®š</h2><p>å…¶å®åœ¨<a href="https://developers.weixin.qq.com/doc/offiaccount/Account_Management/Generating_a_Parametric_QR_Code.html">å¾®ä¿¡å…¬ä¼—å·æ–‡æ¡£</a>ä¸­å·²ç»ç»™å‡ºäº†ç­”æ¡ˆï¼Œä¸ºäº†æ»¡è¶³ç”¨æˆ·æ¸ é“æ¨å¹¿åˆ†æå’Œ<strong>ç”¨æˆ·å¸å·ç»‘å®š</strong>ç­‰åœºæ™¯çš„éœ€è¦ï¼Œå…¬ä¼—å¹³å°æä¾›äº†ç”Ÿæˆå¸¦å‚æ•°äºŒç»´ç çš„æ¥å£ã€‚ä½¿ç”¨è¯¥æ¥å£å¯ä»¥è·å¾—å¤šä¸ªå¸¦ä¸åŒåœºæ™¯å€¼çš„äºŒç»´ç ï¼Œç”¨æˆ·æ‰«æåï¼Œå…¬ä¼—å·å¯ä»¥æ¥æ”¶åˆ°äº‹ä»¶æ¨é€ã€‚</p><h3 id="3-1ã€æµç¨‹"><a href="#3-1ã€æµç¨‹" class="headerlink" title="3.1ã€æµç¨‹"></a>3.1ã€æµç¨‹</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071023053.jpeg" alt="img"></p><p>ä¸€æ¬¡å®Œæ•´çš„ç»‘å®šæµç¨‹å¦‚ä¸‹ï¼š</p><ol><li><p>ç”¨æˆ·ç™»å½•ç½‘ç«™ï¼Œè¿›å…¥ç”¨æˆ·ç®¡ç†åˆ—è¡¨ï¼Œç‚¹å‡»ç”¨æˆ·ä¸Šçš„â€ç»‘å®šå¾®ä¿¡è´¦æˆ·â€æŒ‰é’®ï¼›</p></li><li><p>åå°ä½¿ç”¨å¾®ä¿¡æ¥å£ï¼Œç”ŸæˆäºŒç»´ç é“¾æ¥è¿”å›ç»™å‰ç«¯å¼¹æ¡†æ˜¾ç¤ºï¼Œå¹¶å¸¦ä¸Šåœºæ™¯å€¼(å³å½“å‰ç»‘å®šçš„ç”¨æˆ·ç¼–å·)ï¼›</p></li><li><p>å¦‚æœç”¨æˆ·è¿˜æœªå…³æ³¨å…¬ä¼—å·ï¼Œç”¨æˆ·æ‰«æäºŒç»´ç ï¼Œå¹¶ç‚¹å‡»å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼›åå°æ¥æ”¶å¾®ä¿¡æœåŠ¡å™¨æ¨é€çš„å…³æ³¨äº‹ä»¶ï¼Œæ‹¿åˆ°åœºæ™¯å€¼ï¼›</p></li><li><p>å¦‚æœç”¨æˆ·å·²ç»å…³æ³¨å…¬ä¼—å·ï¼Œç”¨æˆ·æ‰«æäºŒç»´ç ï¼Œç›´æ¥è¿›å…¥å…¬ä¼—å·ä¼šè¯ï¼›åå°æ¥æ”¶å¾®ä¿¡æœåŠ¡å™¨æ¨é€çš„æ‰«æäº‹ä»¶ï¼Œæ‹¿åˆ°åœºæ™¯å€¼ï¼›</p></li><li><p>åå°å°†åœºæ™¯å€¼(å³å½“å‰ç»‘å®šçš„ç”¨æˆ·ç¼–å·)ä¸å¾®ä¿¡ç”¨æˆ·çš„openIdç»‘å®šèµ·æ¥ï¼›</p></li><li><p>ç»™å¾®ä¿¡å…¬ä¼—å·è¿”å›â€ç»‘å®šæˆåŠŸâ€çš„æç¤ºï¼›</p></li><li><p>é€šçŸ¥ç½‘ç«™å‰å°é¡µé¢ï¼Œæç¤ºâ€ç»‘å®šæˆåŠŸâ€ï¼Œåˆ·æ–°é¡µé¢ï¼Œå¹¶è¿”å›ä¸€äº›å¾®ä¿¡ç”¨æˆ·ä¿¡æ¯ã€‚</p></li></ol><h3 id="3-2ã€äºŒç»´ç ç±»å‹"><a href="#3-2ã€äºŒç»´ç ç±»å‹" class="headerlink" title="3.2ã€äºŒç»´ç ç±»å‹"></a>3.2ã€äºŒç»´ç ç±»å‹</h3><p>ç›®å‰æœ‰2ç§ç±»å‹çš„äºŒç»´ç ï¼š</p><ol><li><strong>ä¸´æ—¶äºŒç»´ç </strong>ï¼Œæ˜¯æœ‰è¿‡æœŸæ—¶é—´çš„ï¼Œæœ€é•¿å¯ä»¥è®¾ç½®ä¸ºåœ¨äºŒç»´ç ç”Ÿæˆåçš„<strong>30å¤©</strong>ï¼ˆå³2592000ç§’ï¼‰åè¿‡æœŸï¼Œä½†èƒ½å¤Ÿç”Ÿæˆè¾ƒå¤šæ•°é‡ã€‚<strong>ä¸´æ—¶äºŒç»´ç ä¸»è¦ç”¨äºå¸å·ç»‘å®šç­‰ä¸è¦æ±‚äºŒç»´ç æ°¸ä¹…ä¿å­˜çš„ä¸šåŠ¡åœºæ™¯</strong></li><li><strong>æ°¸ä¹…äºŒç»´ç </strong>ï¼Œæ˜¯æ— è¿‡æœŸæ—¶é—´çš„ï¼Œä½†æ•°é‡è¾ƒå°‘ï¼ˆç›®å‰ä¸ºæœ€å¤š10ä¸‡ä¸ªï¼‰ã€‚<strong>æ°¸ä¹…äºŒç»´ç ä¸»è¦ç”¨äºé€‚ç”¨äºå¸å·ç»‘å®šã€ç”¨æˆ·æ¥æºç»Ÿè®¡ç­‰åœºæ™¯</strong>ã€‚</li></ol><h3 id="3-3ã€äº‹ä»¶æ¨é€ç±»å‹"><a href="#3-3ã€äº‹ä»¶æ¨é€ç±»å‹" class="headerlink" title="3.3ã€äº‹ä»¶æ¨é€ç±»å‹"></a>3.3ã€äº‹ä»¶æ¨é€ç±»å‹</h3><p>ç”¨æˆ·æ‰«æå¸¦åœºæ™¯å€¼äºŒç»´ç æ—¶ï¼Œå¯èƒ½æ¨é€ä»¥ä¸‹ä¸¤ç§äº‹ä»¶ï¼š</p><ol><li>å¦‚æœ<strong>ç”¨æˆ·è¿˜æœªå…³æ³¨å…¬ä¼—å·</strong>ï¼Œåˆ™ç”¨æˆ·å¯ä»¥å…³æ³¨å…¬ä¼—å·ï¼Œå…³æ³¨åå¾®ä¿¡ä¼šå°†<strong>å¸¦åœºæ™¯å€¼çš„<strong><strong>å…³æ³¨äº‹ä»¶</strong></strong>æ¨é€ç»™å¼€å‘è€…</strong></li><li>å¦‚æœ<strong>ç”¨æˆ·å·²ç»å…³æ³¨å…¬ä¼—å·</strong>ï¼Œåœ¨ç”¨æˆ·æ‰«æåä¼šè‡ªåŠ¨è¿›å…¥ä¼šè¯ï¼Œå¾®ä¿¡ä¹Ÿä¼šå°†<strong>å¸¦åœºæ™¯å€¼çš„<strong><strong>æ‰«æäº‹ä»¶</strong></strong>æ¨é€ç»™å¼€å‘è€…</strong></li></ol><h3 id="3-4ã€ç”ŸæˆäºŒç»´ç æ­¥éª¤"><a href="#3-4ã€ç”ŸæˆäºŒç»´ç æ­¥éª¤" class="headerlink" title="3.4ã€ç”ŸæˆäºŒç»´ç æ­¥éª¤"></a>3.4ã€ç”ŸæˆäºŒç»´ç æ­¥éª¤</h3><h4 id="3-4-1ã€åœ¨ä½ çš„ç½‘ç«™é¡µé¢ä¸Šç”Ÿæˆä¸€ä¸ªå¸¦åœºæ™¯å€¼çš„äºŒç»´ç ï¼Œå…¶ä¸­çš„åœºæ™¯å€¼ä¸ºå½“å‰éœ€è¦ç»‘å®šçš„ç³»ç»Ÿç”¨æˆ·ç¼–å·"><a href="#3-4-1ã€åœ¨ä½ çš„ç½‘ç«™é¡µé¢ä¸Šç”Ÿæˆä¸€ä¸ªå¸¦åœºæ™¯å€¼çš„äºŒç»´ç ï¼Œå…¶ä¸­çš„åœºæ™¯å€¼ä¸ºå½“å‰éœ€è¦ç»‘å®šçš„ç³»ç»Ÿç”¨æˆ·ç¼–å·" class="headerlink" title="3.4.1ã€åœ¨ä½ çš„ç½‘ç«™é¡µé¢ä¸Šç”Ÿæˆä¸€ä¸ªå¸¦åœºæ™¯å€¼çš„äºŒç»´ç ï¼Œå…¶ä¸­çš„åœºæ™¯å€¼ä¸ºå½“å‰éœ€è¦ç»‘å®šçš„ç³»ç»Ÿç”¨æˆ·ç¼–å·"></a>3.4.1ã€åœ¨ä½ çš„ç½‘ç«™é¡µé¢ä¸Šç”Ÿæˆä¸€ä¸ªå¸¦åœºæ™¯å€¼çš„äºŒç»´ç ï¼Œå…¶ä¸­çš„åœºæ™¯å€¼ä¸ºå½“å‰éœ€è¦ç»‘å®šçš„ç³»ç»Ÿç”¨æˆ·ç¼–å·</h4><h4 id="3-4-2ã€åˆ›å»ºäºŒç»´ç ticketï¼Œæ¯æ¬¡åˆ›å»ºäºŒç»´ç ticketçš„æ—¶å€™éœ€è¦æä¾›ä¸€ä¸ªå¼€å‘è€…è‡ªè¡Œè®¾å®šçš„å‚æ•°ï¼ˆscene-idï¼‰"><a href="#3-4-2ã€åˆ›å»ºäºŒç»´ç ticketï¼Œæ¯æ¬¡åˆ›å»ºäºŒç»´ç ticketçš„æ—¶å€™éœ€è¦æä¾›ä¸€ä¸ªå¼€å‘è€…è‡ªè¡Œè®¾å®šçš„å‚æ•°ï¼ˆscene-idï¼‰" class="headerlink" title="3.4.2ã€åˆ›å»ºäºŒç»´ç ticketï¼Œæ¯æ¬¡åˆ›å»ºäºŒç»´ç ticketçš„æ—¶å€™éœ€è¦æä¾›ä¸€ä¸ªå¼€å‘è€…è‡ªè¡Œè®¾å®šçš„å‚æ•°ï¼ˆscene_idï¼‰"></a>3.4.2ã€åˆ›å»ºäºŒç»´ç ticketï¼Œæ¯æ¬¡åˆ›å»ºäºŒç»´ç ticketçš„æ—¶å€™éœ€è¦æä¾›ä¸€ä¸ªå¼€å‘è€…è‡ªè¡Œè®¾å®šçš„å‚æ•°ï¼ˆscene_idï¼‰</h4><ul><li>ä¸´æ—¶äºŒç»´ç è¯·æ±‚è¯´æ˜ï¼š</li></ul><p>httpè¯·æ±‚æ–¹å¼: POST URL: <a href="https://api.weixin.qq.com/cgi-bin/qrcode/create?access_token=TOKEN">https://api.weixin.qq.com/cgi-bin/qrcode/create?access_token=TOKEN</a> </p><p>POSTæ•°æ®æ ¼å¼ï¼šjson POSTæ•°æ®ä¾‹å­ï¼š{â€œexpire_secondsâ€: 604800, â€œaction_nameâ€: â€œQR_SCENEâ€, â€œaction_infoâ€: {â€œsceneâ€: {â€œscene_idâ€: 123}}} </p><p>æˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹POSTæ•°æ®åˆ›å»ºå­—ç¬¦ä¸²å½¢å¼çš„äºŒç»´ç å‚æ•°ï¼š{â€œexpire_secondsâ€: 604800, â€œaction_nameâ€: â€œQR_STR_SCENEâ€, â€œaction_infoâ€: {â€œsceneâ€: {â€œscene_strâ€: â€œtestâ€}}}</p><ul><li>æ°¸ä¹…äºŒç»´ç è¯·æ±‚è¯´æ˜ï¼š</li></ul><p>httpè¯·æ±‚æ–¹å¼: POST URL: <a href="https://api.weixin.qq.com/cgi-bin/qrcode/create?access_token=TOKEN">https://api.weixin.qq.com/cgi-bin/qrcode/create?access_token=TOKEN</a> </p><p>POSTæ•°æ®æ ¼å¼ï¼šjson POSTæ•°æ®ä¾‹å­ï¼š{â€œaction_nameâ€: â€œQR_LIMIT_SCENEâ€, â€œaction_infoâ€: {â€œsceneâ€: {â€œscene_idâ€: 123}}} </p><p>æˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹POSTæ•°æ®åˆ›å»ºå­—ç¬¦ä¸²å½¢å¼çš„äºŒç»´ç å‚æ•°ï¼š {â€œaction_nameâ€: â€œQR_LIMIT_STR_SCENEâ€, â€œaction_infoâ€: {â€œsceneâ€: {â€œscene_strâ€: â€œtestâ€}}}</p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>expire_seconds</td><td>è¯¥äºŒç»´ç æœ‰æ•ˆæ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚ æœ€å¤§ä¸è¶…è¿‡2592000ï¼ˆå³30å¤©ï¼‰ï¼Œæ­¤å­—æ®µå¦‚æœä¸å¡«ï¼Œåˆ™é»˜è®¤æœ‰æ•ˆæœŸä¸º30ç§’ã€‚</td></tr><tr><td>action_name</td><td>äºŒç»´ç ç±»å‹ï¼ŒQR_SCENEä¸ºä¸´æ—¶çš„æ•´å‹å‚æ•°å€¼ï¼ŒQR_STR_SCENEä¸ºä¸´æ—¶çš„å­—ç¬¦ä¸²å‚æ•°å€¼ï¼ŒQR_LIMIT_SCENEä¸ºæ°¸ä¹…çš„æ•´å‹å‚æ•°å€¼ï¼ŒQR_LIMIT_STR_SCENEä¸ºæ°¸ä¹…çš„å­—ç¬¦ä¸²å‚æ•°å€¼</td></tr><tr><td>action_info</td><td>äºŒç»´ç è¯¦ç»†ä¿¡æ¯</td></tr><tr><td>scene_id</td><td>åœºæ™¯å€¼IDï¼Œä¸´æ—¶äºŒç»´ç æ—¶ä¸º32ä½é0æ•´å‹ï¼Œæ°¸ä¹…äºŒç»´ç æ—¶æœ€å¤§å€¼ä¸º100000ï¼ˆç›®å‰å‚æ•°åªæ”¯æŒ1â€“100000ï¼‰</td></tr><tr><td>scene_str</td><td>åœºæ™¯å€¼IDï¼ˆå­—ç¬¦ä¸²å½¢å¼çš„IDï¼‰ï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼Œé•¿åº¦é™åˆ¶ä¸º1åˆ°64</td></tr></tbody></table><p>è¿”å›ç»“æœï¼š</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071001047.png" alt="img"></p><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ticket</td><td>è·å–çš„äºŒç»´ç ticketï¼Œå‡­å€Ÿæ­¤ticketå¯ä»¥åœ¨æœ‰æ•ˆæ—¶é—´å†…æ¢å–äºŒç»´ç ã€‚</td></tr><tr><td>expire_seconds</td><td>è¯¥äºŒç»´ç æœ‰æ•ˆæ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚ æœ€å¤§ä¸è¶…è¿‡2592000ï¼ˆå³30å¤©ï¼‰ã€‚</td></tr><tr><td>url</td><td>äºŒç»´ç å›¾ç‰‡è§£æåçš„åœ°å€ï¼Œå¼€å‘è€…å¯æ ¹æ®è¯¥åœ°å€è‡ªè¡Œç”Ÿæˆéœ€è¦çš„äºŒç»´ç å›¾ç‰‡</td></tr></tbody></table><h4 id="3-4-3ã€é€šè¿‡ticketæ¢å–äºŒç»´ç "><a href="#3-4-3ã€é€šè¿‡ticketæ¢å–äºŒç»´ç " class="headerlink" title="3.4.3ã€é€šè¿‡ticketæ¢å–äºŒç»´ç "></a>3.4.3ã€é€šè¿‡ticketæ¢å–äºŒç»´ç </h4><p>è·å–äºŒç»´ç ticketåï¼Œå¼€å‘è€…å¯ç”¨ticketæ¢å–äºŒç»´ç å›¾ç‰‡ã€‚è¯·æ³¨æ„ï¼Œæœ¬æ¥å£æ— é¡»ç™»å½•æ€å³å¯è°ƒç”¨ã€‚</p><p>è¯·æ±‚è¯´æ˜ï¼š</p><p>HTTP GETè¯·æ±‚ï¼ˆè¯·ä½¿ç”¨httpsåè®®ï¼‰<a href="https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=TICKET">https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=TICKET</a> æé†’ï¼šTICKETè®°å¾—è¿›è¡ŒUrlEncode</p><p>è¿”å›ç»“æœï¼šäºŒç»´ç å›¾ç‰‡åœ°å€å°±æ˜¯ä¸‹é¢è¿”å›çš„è¯·æ±‚åœ°å€ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071001261.png" alt="img"></p><h4 id="3-4-4ã€ä»£ç "><a href="#3-4-4ã€ä»£ç " class="headerlink" title="3.4.4ã€ä»£ç "></a>3.4.4ã€ä»£ç </h4><ul><li>ç”Ÿæˆå¸¦åœºæ™¯å€¼çš„äºŒç»´ç </li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">   * ç”Ÿæˆå¸¦åœºæ™¯å€¼äºŒç»´ç </span><br><span class="line">   *</span><br><span class="line">   * @return äºŒç»´ç url</span><br><span class="line">   */</span><br><span class="line">@GetMapping(&quot;qr-code/&#123;userNo&#125;&quot;)</span><br><span class="line">public String createQrCode(@PathVariable String userNo) throws WxErrorException &#123;</span><br><span class="line">    logger.info(&quot;ç»‘å®šç”¨æˆ·è´¦å·ä¸º: &#123;&#125;&quot;, userNo);</span><br><span class="line">    // è·å–ticketï¼Œæ—¶é—´ä¸å¡«é»˜è®¤30ç§’ï¼Œæœ€å¤§30å¤©</span><br><span class="line">    WxMpQrCodeTicket ticket =</span><br><span class="line">        this.wxMpService.getQrcodeService().qrCodeCreateTmpTicket(userNo, null);</span><br><span class="line">    // æ ¹æ®ticketåˆ›å»ºä¸´æ—¶äºŒç»´ç </span><br><span class="line">    return this.wxMpService.getQrcodeService().qrCodePictureUrl(ticket.getTicket());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç½‘ç«™æ˜¾ç¤ºäºŒç»´ç å›¾ç‰‡</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071001874.png" alt="img"></p><ul><li>ä¿®æ”¹æ¶ˆæ¯è·¯ç”±è§„åˆ™</li></ul><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071001949.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.rule().async(false).msgType(WxConsts.XmlMsgType.EVENT).event(WxConsts.EventType.SCAN).handler(wxMpScanHandler).end();</span><br></pre></td></tr></table></figure><ul><li>æ·»åŠ ç”¨äºå¤„ç†æ‰«æçš„æ¶ˆæ¯å¤„ç†å™¨</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class WxMpScanHandler implements WxMpMessageHandler &#123;</span><br><span class="line">  private static final Logger logger = LoggerFactory.getLogger(WxMpScanHandler.class);</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public WxMpXmlOutMessage handle(</span><br><span class="line">      WxMpXmlMessage wxMessage,</span><br><span class="line">      Map&lt;String, Object&gt; map,</span><br><span class="line">      WxMpService wxMpService,</span><br><span class="line">      WxSessionManager wxSessionManager)</span><br><span class="line">      throws WxErrorException &#123;</span><br><span class="line">    logger.info(&quot;ç³»ç»Ÿç”¨æˆ·è´¦å·ä¸ºï¼š&#123;&#125;&quot;, wxMessage.getEventKey());</span><br><span class="line">    logger.info(&quot;openId: &#123;&#125;&quot;, wxMessage.getFromUser());</span><br><span class="line">    return WxMpXmlOutMessage.TEXT()</span><br><span class="line">        .content(&quot;ç»‘å®šç³»ç»Ÿç”¨æˆ·æˆåŠŸï¼&quot;)</span><br><span class="line">        .fromUser(wxMessage.getToUser())</span><br><span class="line">        .toUser(wxMessage.getFromUser())</span><br><span class="line">        .build();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹å…³æ³¨äº‹ä»¶æ¶ˆæ¯å¤„ç†å™¨</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">public class WxMpSubscribeHandler implements WxMpMessageHandler &#123;</span><br><span class="line">private static final Logger logger = LoggerFactory.getLogger(WxMpSubscribeHandler.class);</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public WxMpXmlOutMessage handle(WxMpXmlMessage wxMessage, Map&lt;String, Object&gt; context, WxMpService wxMpService,</span><br><span class="line">WxSessionManager sessionManager) throws WxErrorException &#123;</span><br><span class="line">if (StringUtils.hasText(wxMessage.getEventKey())) &#123;</span><br><span class="line">           // é€šè¿‡æ‰«æå¸¦åœºæ™¯å€¼äºŒç»´ç å…³æ³¨çš„ç”¨æˆ·ï¼Œç”¨äºç³»ç»Ÿç»‘å®šç”¨æˆ·</span><br><span class="line">logger.info(&quot;ç”¨æˆ·è´¦å·ä¸ºï¼š&#123;&#125;&quot;, wxMessage.getEventKey().split(&quot;_&quot;)[1]);</span><br><span class="line">&#125;</span><br><span class="line">logger.info(&quot;æ–°ç”¨æˆ·å…³æ³¨ OPENID: &#123;&#125;&quot;, wxMessage.getFromUser());</span><br><span class="line">String uri = &quot;http://intelliws.vaiwan.com/api/wx/portal/APPID/callback&quot;;</span><br><span class="line">uri = uri.replace(&quot;APPID&quot;, wxMpService.getWxMpConfigStorage().getAppId());</span><br><span class="line">String href = &quot;æ¬¢è¿å…³æ³¨ï¼&lt;a href=\&quot;&quot; + wxMpService.getOAuth2Service().buildAuthorizationUrl(uri,</span><br><span class="line">WxConsts.OAuth2Scope.SNSAPI_USERINFO, wxMpService.getWxMpConfigStorage().getToken())</span><br><span class="line">+ &quot;\&quot;&gt;è¯·ç‚¹å‡»æ­¤å¤„è¿›è¡Œç½‘é¡µæˆæƒï¼Œæµ‹è¯•ç”¨ï¼ï¼ï¼&lt;/a&gt;&quot;;</span><br><span class="line">return WxMpXmlOutMessage.TEXT().content(href).fromUser(wxMessage.getToUser()).toUser(wxMessage.getFromUser())</span><br><span class="line">.build();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°æ­¤ï¼Œå…¬ä¼—å·ç”¨æˆ·ä¸ç³»ç»Ÿç”¨æˆ·ç»‘å®šçš„æµç¨‹å°±å®Œæˆäº†ã€‚</p><h2 id="4ã€æ¨¡æ¿æ¶ˆæ¯"><a href="#4ã€æ¨¡æ¿æ¶ˆæ¯" class="headerlink" title="4ã€æ¨¡æ¿æ¶ˆæ¯"></a>4ã€æ¨¡æ¿æ¶ˆæ¯</h2><h3 id="4-1ã€ä½¿ç”¨è§„åˆ™"><a href="#4-1ã€ä½¿ç”¨è§„åˆ™" class="headerlink" title="4.1ã€ä½¿ç”¨è§„åˆ™"></a>4.1ã€ä½¿ç”¨è§„åˆ™</h3><ol><li><p>æ‰€æœ‰æœåŠ¡å·éƒ½å¯ä»¥åœ¨åŠŸèƒ½-&gt;æ·»åŠ åŠŸèƒ½æ’ä»¶å¤„çœ‹åˆ°ç”³è¯·æ¨¡æ¿æ¶ˆæ¯åŠŸèƒ½çš„å…¥å£ï¼Œä½†åªæœ‰<strong>è®¤è¯åçš„æœåŠ¡å·æ‰å¯ä»¥ç”³è¯·æ¨¡æ¿æ¶ˆæ¯çš„ä½¿ç”¨æƒé™å¹¶è·å¾—è¯¥æƒé™</strong>ï¼›</p></li><li><p>éœ€è¦é€‰æ‹©å…¬ä¼—è´¦å·æœåŠ¡æ‰€å¤„çš„2ä¸ªè¡Œä¸šï¼Œæ¯æœˆå¯æ›´æ”¹1æ¬¡æ‰€é€‰è¡Œä¸šï¼›</p></li><li><p>åœ¨æ‰€é€‰æ‹©è¡Œä¸šçš„æ¨¡æ¿åº“ä¸­é€‰ç”¨å·²æœ‰çš„æ¨¡æ¿è¿›è¡Œè°ƒç”¨ï¼›</p></li><li><p>æ¯ä¸ªè´¦å·å¯ä»¥åŒæ—¶ä½¿ç”¨25ä¸ªæ¨¡æ¿ã€‚</p></li><li><p>å½“å‰æ¯ä¸ªè´¦å·çš„æ¨¡æ¿æ¶ˆæ¯çš„<strong>æ—¥è°ƒç”¨ä¸Šé™ä¸º10ä¸‡æ¬¡</strong>ï¼Œå•ä¸ªæ¨¡æ¿æ²¡æœ‰ç‰¹æ®Šé™åˆ¶ã€‚ã€2014å¹´11æœˆ18æ—¥å°†æ¥å£è°ƒç”¨é¢‘ç‡ä»é»˜è®¤çš„æ—¥1ä¸‡æ¬¡æå‡ä¸ºæ—¥10ä¸‡æ¬¡ï¼Œå¯åœ¨MPç™»å½•åçš„å¼€å‘è€…ä¸­å¿ƒæŸ¥çœ‹ã€‘ã€‚å½“è´¦å·ç²‰ä¸æ•°è¶…è¿‡10W/100W/1000Wæ—¶ï¼Œæ¨¡æ¿æ¶ˆæ¯çš„æ—¥è°ƒç”¨ä¸Šé™ä¼šç›¸åº”æå‡ï¼Œä»¥å…¬ä¼—å·MPåå°å¼€å‘è€…ä¸­å¿ƒé¡µé¢ä¸­æ ‡æ˜çš„æ•°å­—ä¸ºå‡†ã€‚</p></li></ol><h3 id="4-2ã€æ¨¡æ¿æ¶ˆæ¯æ¥å£"><a href="#4-2ã€æ¨¡æ¿æ¶ˆæ¯æ¥å£" class="headerlink" title="4.2ã€æ¨¡æ¿æ¶ˆæ¯æ¥å£"></a>4.2ã€<a href="https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Template_Message_Interface.html">æ¨¡æ¿æ¶ˆæ¯æ¥å£</a></h3><h4 id="4-2-1ã€æ³¨æ„ç‚¹ï¼š"><a href="#4-2-1ã€æ³¨æ„ç‚¹ï¼š" class="headerlink" title="4.2.1ã€æ³¨æ„ç‚¹ï¼š"></a>4.2.1ã€æ³¨æ„ç‚¹ï¼š</h4><ol><li><p>æ¨¡æ¿æ¶ˆæ¯è°ƒç”¨æ—¶ä¸»è¦éœ€è¦æ¨¡æ¿IDå’Œæ¨¡æ¿ä¸­å„å‚æ•°çš„èµ‹å€¼å†…å®¹ï¼›</p></li><li><p>æ¨¡æ¿ä¸­å‚æ•°å†…å®¹å¿…é¡»ä»¥â€.DATAâ€ç»“å°¾ï¼Œå¦åˆ™è§†ä¸ºä¿ç•™å­—ï¼›</p></li><li><p>æ¨¡æ¿ä¿ç•™ç¬¦å·â€â€ã€‚</p></li></ol><h4 id="4-2-2ã€å‘é€æ¨¡æ¿æ¶ˆæ¯"><a href="#4-2-2ã€å‘é€æ¨¡æ¿æ¶ˆæ¯" class="headerlink" title="4.2.2ã€å‘é€æ¨¡æ¿æ¶ˆæ¯"></a>4.2.2ã€å‘é€æ¨¡æ¿æ¶ˆæ¯</h4><h5 id="4-2-2-1ã€æ¥å£è°ƒç”¨è¯·æ±‚è¯´æ˜"><a href="#4-2-2-1ã€æ¥å£è°ƒç”¨è¯·æ±‚è¯´æ˜" class="headerlink" title="4.2.2.1ã€æ¥å£è°ƒç”¨è¯·æ±‚è¯´æ˜"></a>4.2.2.1ã€æ¥å£è°ƒç”¨è¯·æ±‚è¯´æ˜</h5><p>httpè¯·æ±‚æ–¹å¼: POST <a href="https://api.weixin.qq.com/cgi-bin/message/template/send?access_token=ACCESS_TOKEN">https://api.weixin.qq.com/cgi-bin/message/template/send?access_token=ACCESS_TOKEN</a></p><h5 id="4-2-2-2ã€POSTæ•°æ®è¯´æ˜"><a href="#4-2-2-2ã€POSTæ•°æ®è¯´æ˜" class="headerlink" title="4.2.2.2ã€POSTæ•°æ®è¯´æ˜"></a>4.2.2.2ã€POSTæ•°æ®è¯´æ˜</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;touser&quot;:&quot;OPENID&quot;,</span><br><span class="line">    &quot;template_id&quot;:&quot;ngqIpbwh8bUfcSsECmogfXcV14J0tQlEpBO27izEYtY&quot;,</span><br><span class="line">    &quot;url&quot;:&quot;http://weixin.qq.com/download&quot;,  </span><br><span class="line">    &quot;miniprogram&quot;:&#123;</span><br><span class="line">        &quot;appid&quot;:&quot;xiaochengxuappid12345&quot;,</span><br><span class="line">        &quot;pagepath&quot;:&quot;index?foo=bar&quot;</span><br><span class="line">        &#125;,          </span><br><span class="line">    &quot;data&quot;:&#123;</span><br><span class="line">        &quot;first&quot;: &#123;</span><br><span class="line">            &quot;value&quot;:&quot;æ­å–œä½ è´­ä¹°æˆåŠŸï¼&quot;,</span><br><span class="line">            &quot;color&quot;:&quot;#173177&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">        &quot;keyword1&quot;:&#123;</span><br><span class="line">            &quot;value&quot;:&quot;å·§å…‹åŠ›&quot;,</span><br><span class="line">            &quot;color&quot;:&quot;#173177&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">        &quot;keyword2&quot;: &#123;</span><br><span class="line">            &quot;value&quot;:&quot;39.8å…ƒ&quot;,</span><br><span class="line">            &quot;color&quot;:&quot;#173177&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">        &quot;keyword3&quot;: &#123;</span><br><span class="line">            &quot;value&quot;:&quot;2014å¹´9æœˆ22æ—¥&quot;,</span><br><span class="line">            &quot;color&quot;:&quot;#173177&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">        &quot;remark&quot;:&#123;</span><br><span class="line">            &quot;value&quot;:&quot;æ¬¢è¿å†æ¬¡è´­ä¹°ï¼&quot;,</span><br><span class="line">            &quot;color&quot;:&quot;#173177&quot;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜;</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071001020.png" alt="img"></p><p>æ³¨ï¼š<strong>urlå’Œminiprograméƒ½æ˜¯éå¿…å¡«å­—æ®µï¼Œè‹¥éƒ½ä¸ä¼ åˆ™æ¨¡æ¿æ— è·³è½¬ï¼›è‹¥éƒ½ä¼ ï¼Œä¼šä¼˜å…ˆè·³è½¬è‡³å°ç¨‹åºã€‚å¼€å‘è€…å¯æ ¹æ®å®é™…éœ€è¦é€‰æ‹©å…¶ä¸­ä¸€ç§è·³è½¬æ–¹å¼å³å¯ã€‚å½“ç”¨æˆ·çš„å¾®ä¿¡å®¢æˆ·ç«¯ç‰ˆæœ¬ä¸æ”¯æŒè·³å°ç¨‹åºæ—¶ï¼Œå°†ä¼šè·³è½¬è‡³url</strong>ã€‚</p><h3 id="4-3ã€æ·»åŠ æ¨¡æ¿"><a href="#4-3ã€æ·»åŠ æ¨¡æ¿" class="headerlink" title="4.3ã€æ·»åŠ æ¨¡æ¿"></a>4.3ã€æ·»åŠ æ¨¡æ¿</h3><p>å¦‚æœæ˜¯è®¤è¯è¿‡åçš„æœåŠ¡å·ï¼Œå¯ä»¥ç™»å½•å¾®ä¿¡å…¬ä¼—å·åå°ç®¡ç†ï¼Œä»æ¨¡æ¿åº“ä¸­æ·»åŠ ï¼Œå¦‚æœæ‰¾ä¸åˆ°é€‚åˆçš„æ¨¡æ¿ï¼Œè¿˜å¯ä»¥ç”³è¯·æ–°æ¨¡æ¿(ä¸€ä¸ªæœˆåªå¯ä»¥ç”³è¯·ä¸‰ä¸ªæ¨¡æ¿)ï¼›ç°åœ¨æˆ‘ä»¬å¯ä»¥å…ˆåœ¨æµ‹è¯•å·ä¸­æ‰‹åŠ¨æ·»åŠ æ¨¡æ¿ã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1554080/1629291420031-71aebf7c-7aa0-48b9-b483-af8f5ede823a.png" alt="img"></p><p>åœ¨æµ‹è¯•å·ä¸­æ‰‹åŠ¨æ·»åŠ ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;first.DATA&#125;&#125; å•†å®¶åç§°ï¼š&#123;&#123;keyword1.DATA&#125;&#125; å•†å®¶ç”µè¯ï¼š&#123;&#123;keyword2.DATA&#125;&#125; è®¢å•å·ï¼š&#123;&#123;keyword3.DATA&#125;&#125; çŠ¶æ€ï¼š&#123;&#123;keyword4.DATA&#125;&#125; æ€»ä»·ï¼š&#123;&#123;keyword5.DATA&#125;&#125; &#123;&#123;remark.DATA&#125;&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1554080/1629291617212-cc76ef15-0fe8-4047-bb67-2bfe4fcc8bf8.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071001522.png" alt="img"></p><h3 id="4-4ã€ä»£ç "><a href="#4-4ã€ä»£ç " class="headerlink" title="4.4ã€ä»£ç "></a>4.4ã€ä»£ç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">   * å‘é€æ¨¡æ¿æ¶ˆæ¯</span><br><span class="line">   *</span><br><span class="line">   * @return</span><br><span class="line">   * @throws WxErrorException</span><br><span class="line">   */</span><br><span class="line">@GetMapping(&quot;send&quot;)</span><br><span class="line">public String sendTemplateMessage() throws WxErrorException &#123;</span><br><span class="line">    logger.info(wxMpService.getAccessToken());</span><br><span class="line">    // å‘é€æ¨¡æ¿æ¶ˆæ¯æ¥å£</span><br><span class="line">    WxMpTemplateMessage templateMessage =</span><br><span class="line">        WxMpTemplateMessage.builder()</span><br><span class="line">        // æ¥æ”¶è€…openid</span><br><span class="line">        .toUser(&quot;openId&quot;)</span><br><span class="line">        // æ¨¡æ¿id</span><br><span class="line">        .templateId(&quot;templateId&quot;)</span><br><span class="line">        // æ¨¡æ¿è·³è½¬é“¾æ¥</span><br><span class="line">        .url(&quot;http://www.baidu.com&quot;)</span><br><span class="line">        .build();</span><br><span class="line">    // æ·»åŠ æ¨¡æ¿æ•°æ®</span><br><span class="line">    templateMessage</span><br><span class="line">        .addData(new WxMpTemplateData(&quot;first&quot;, &quot;ç”¨é¤æ„‰å¿«å“¦&quot;, &quot;#FF00FF&quot;))</span><br><span class="line">        .addData(new WxMpTemplateData(&quot;keyword1&quot;, &quot;å¾®ä¿¡ç‚¹é¤&quot;, &quot;#A9A9A9&quot;))</span><br><span class="line">        .addData(new WxMpTemplateData(&quot;keyword2&quot;, &quot;13826913333&quot;, &quot;#FF00FF&quot;))</span><br><span class="line">        .addData(new WxMpTemplateData(&quot;keyword3&quot;, &quot;2021081722150001&quot;, &quot;#FF00FF&quot;))</span><br><span class="line">        .addData(new WxMpTemplateData(&quot;keyword4&quot;, &quot;ï¿¥56.5&quot;, &quot;#FF00FF&quot;))</span><br><span class="line">        .addData(new WxMpTemplateData(&quot;remark&quot;, &quot;ç”¨é¤æ„‰å¿«å“¦&quot;, &quot;#000000&quot;));</span><br><span class="line">    String msgId = null;</span><br><span class="line">    try &#123;</span><br><span class="line">        // å‘é€æ¨¡æ¿æ¶ˆæ¯</span><br><span class="line">        msgId = wxMpService.getTemplateMsgService().sendTemplateMsg(templateMessage);</span><br><span class="line">        logger.info(wxMpService.getAccessToken());</span><br><span class="line">        logger.warn(&quot;Â·==++--Â·æ¨é€å¾®ä¿¡æ¨¡æ¿ä¿¡æ¯ï¼š&#123;&#125;Â·--++==Â·&quot;, &quot;æˆåŠŸ&quot;);</span><br><span class="line">    &#125; catch (WxErrorException e) &#123;</span><br><span class="line">        System.out.println(wxMpService.getAccessToken());</span><br><span class="line">        logger.warn(&quot;Â·==++--Â·æ¨é€å¾®ä¿¡æ¨¡æ¿ä¿¡æ¯ï¼š&#123;&#125;Â·--++==Â·&quot;, &quot;å¤±è´¥&quot;);</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    return msgId;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œå¦‚æœæƒ³ä½¿ç”¨redisä¿å­˜accessTokençš„è¯ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®å¹¶ä¸”è¿˜è¦åŠ å…¥redisçš„ä¾èµ–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">wx:</span><br><span class="line">  mp:</span><br><span class="line">    app-id: xxxxxxxx</span><br><span class="line">    secret: xxxxxxxx</span><br><span class="line">    token: xxxxxxxx</span><br><span class="line">    config-storage:</span><br><span class="line">      type: redistemplate</span><br><span class="line">        </span><br><span class="line">spring:</span><br><span class="line">  redis:</span><br><span class="line">    host: xxx.xx.xxx.xxx</span><br><span class="line">&lt;!--wx-java-mpçš„ä¾èµ– --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;com.github.binarywang&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;wx-java-mp-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;4.1.5.B&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!--redisçš„ä¾èµ– --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>ä»£ç ä»“åº“ <code>https://e.coding.net/start520823/notes/wx-mp.git</code></p><h2 id="5ã€å…¬å¸æœåŠ¡å·"><a href="#5ã€å…¬å¸æœåŠ¡å·" class="headerlink" title="5ã€å…¬å¸æœåŠ¡å·"></a>5ã€å…¬å¸æœåŠ¡å·</h2><p>ç»è¿‡å¦‚ä¸‹é…ç½®åï¼Œå°±å’Œæˆ‘ä»¬ä½¿ç”¨æµ‹è¯•å·å°±æ˜¯ä¸€æ ·çš„æ•ˆæœäº†ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071001206.png" alt="img"></p><p>è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆï¼æ’’èŠ±â€â€â€</p><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><h3 id="1ã€å®˜æ–¹é“¾æ¥"><a href="#1ã€å®˜æ–¹é“¾æ¥" class="headerlink" title="1ã€å®˜æ–¹é“¾æ¥"></a>1ã€å®˜æ–¹é“¾æ¥</h3><h4 id="1-1ã€å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•å·"><a href="#1-1ã€å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•å·" class="headerlink" title="1.1ã€å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•å·"></a>1.1ã€<a href="https://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&t=sandbox/index">å¾®ä¿¡å…¬ä¼—å¹³å°æµ‹è¯•å·</a></h4><h4 id="1-2ã€å…¬ä¼—å·æ–‡æ¡£"><a href="#1-2ã€å…¬ä¼—å·æ–‡æ¡£" class="headerlink" title="1.2ã€å…¬ä¼—å·æ–‡æ¡£"></a>1.2ã€<a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html#0">å…¬ä¼—å·æ–‡æ¡£</a></h4><h4 id="1-3ã€å…¬ä¼—å·åå°ç®¡ç†"><a href="#1-3ã€å…¬ä¼—å·åå°ç®¡ç†" class="headerlink" title="1.3ã€å…¬ä¼—å·åå°ç®¡ç†"></a>1.3ã€<a href="https://mp.weixin.qq.com/advanced/advanced?action=dev&t=advanced/dev&token=1012990949&lang=zh_CN">å…¬ä¼—å·åå°ç®¡ç†</a></h4><h4 id="1-4ã€å¾®ä¿¡å…¬ä¼—å¹³å°æ¥å£è°ƒè¯•å·¥å…·"><a href="#1-4ã€å¾®ä¿¡å…¬ä¼—å¹³å°æ¥å£è°ƒè¯•å·¥å…·" class="headerlink" title="1.4ã€å¾®ä¿¡å…¬ä¼—å¹³å°æ¥å£è°ƒè¯•å·¥å…·"></a>1.4ã€<a href="https://mp.weixin.qq.com/debug/cgi-bin/apiinfo">å¾®ä¿¡å…¬ä¼—å¹³å°æ¥å£è°ƒè¯•å·¥å…·</a></h4><h3 id="2ã€WxJava"><a href="#2ã€WxJava" class="headerlink" title="2ã€WxJava"></a>2ã€WxJava</h3><h4 id="2-1ã€githubé“¾æ¥ï¼Œå¯ä»¥åœ¨testç›®å½•æŸ¥çœ‹å„ä¸ªåŠŸèƒ½çš„ç”¨æ³•"><a href="#2-1ã€githubé“¾æ¥ï¼Œå¯ä»¥åœ¨testç›®å½•æŸ¥çœ‹å„ä¸ªåŠŸèƒ½çš„ç”¨æ³•" class="headerlink" title="2.1ã€githubé“¾æ¥ï¼Œå¯ä»¥åœ¨testç›®å½•æŸ¥çœ‹å„ä¸ªåŠŸèƒ½çš„ç”¨æ³•"></a>2.1ã€<a href="https://github.com/Wechat-Group/WxJava">githubé“¾æ¥ï¼Œå¯ä»¥åœ¨testç›®å½•æŸ¥çœ‹å„ä¸ªåŠŸèƒ½çš„ç”¨æ³•</a></h4><h4 id="2-2ã€å¼€å‘æ–‡æ¡£"><a href="#2-2ã€å¼€å‘æ–‡æ¡£" class="headerlink" title="2.2ã€å¼€å‘æ–‡æ¡£"></a>2.2ã€<a href="https://github.com/Wechat-Group/WxJava/wiki">å¼€å‘æ–‡æ¡£</a></h4><h4 id="2-3ã€wx-java-mp-demo"><a href="#2-3ã€wx-java-mp-demo" class="headerlink" title="2.3ã€wx-java-mp-demo"></a>2.3ã€<a href="https://github.com/binarywang/weixin-java-mp-demo">wx-java-mp-demo</a></h4><h4 id="2-4ã€å®¹æ˜“å…¥æ‰‹çš„æ•™ç¨‹1ï¼Œ2ï¼Œå»ºè®®å…ˆçœ‹è¿™ä¸ª"><a href="#2-4ã€å®¹æ˜“å…¥æ‰‹çš„æ•™ç¨‹1ï¼Œ2ï¼Œå»ºè®®å…ˆçœ‹è¿™ä¸ª" class="headerlink" title="2.4ã€å®¹æ˜“å…¥æ‰‹çš„æ•™ç¨‹1ï¼Œ2ï¼Œå»ºè®®å…ˆçœ‹è¿™ä¸ª"></a>2.4ã€å®¹æ˜“å…¥æ‰‹çš„æ•™ç¨‹<a href="https://www.cnblogs.com/shouyaya/p/13235897.html">1</a>ï¼Œ<a href="https://www.cnblogs.com/runningA/archive/2020/01/24/12221878.html">2</a>ï¼Œå»ºè®®å…ˆçœ‹è¿™ä¸ª</h4><h4 id="2-5ã€æ¯”è¾ƒå…¨é¢çš„æ•™ç¨‹"><a href="#2-5ã€æ¯”è¾ƒå…¨é¢çš„æ•™ç¨‹" class="headerlink" title="2.5ã€æ¯”è¾ƒå…¨é¢çš„æ•™ç¨‹"></a>2.5ã€<a href="https://blog.csdn.net/weixin_45070175/article/details/118532572">æ¯”è¾ƒå…¨é¢çš„æ•™ç¨‹</a></h4><h3 id="3ã€å…¬ä¼—å·ç”¨æˆ·ä¸ç½‘ç«™ç”¨æˆ·ç»‘å®šæ–¹æ¡ˆ"><a href="#3ã€å…¬ä¼—å·ç”¨æˆ·ä¸ç½‘ç«™ç”¨æˆ·ç»‘å®šæ–¹æ¡ˆ" class="headerlink" title="3ã€å…¬ä¼—å·ç”¨æˆ·ä¸ç½‘ç«™ç”¨æˆ·ç»‘å®šæ–¹æ¡ˆ"></a>3ã€<a href="https://www.jianshu.com/p/a51c54ddd0f3">å…¬ä¼—å·ç”¨æˆ·ä¸ç½‘ç«™ç”¨æˆ·ç»‘å®šæ–¹æ¡ˆ</a></h3>]]></content>
      
      
      <categories>
          
          <category> æ‚è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaå¼€å‘ </tag>
            
            <tag> æ¡ˆä¾‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typora + PicGo + Github</title>
      <link href="/article/b542e004.html"/>
      <url>/article/b542e004.html</url>
      
        <content type="html"><![CDATA[<h2 id="PicGo-å…è´¹å¼€æºçš„å›¾ç‰‡ä¸Šä¼ ä¸ç®¡ç†å·¥å…·"><a href="#PicGo-å…è´¹å¼€æºçš„å›¾ç‰‡ä¸Šä¼ ä¸ç®¡ç†å·¥å…·" class="headerlink" title="PicGo - å…è´¹å¼€æºçš„å›¾ç‰‡ä¸Šä¼ ä¸ç®¡ç†å·¥å…·"></a>PicGo - å…è´¹å¼€æºçš„å›¾ç‰‡ä¸Šä¼ ä¸ç®¡ç†å·¥å…·</h2><p>æˆ‘ä»¬å¹³æ—¶åœ¨å†™ <a href="https://www.markdownguide.org/">Markdown</a>ã€åšå®¢ã€æŠ€æœ¯æ–‡æ¡£çš„æ—¶å€™ï¼Œç»å¸¸è¦æ’å…¥å›¾ç‰‡ã€‚ç„¶è€Œè¦è´´å›¾ï¼ˆä¸Šä¼ å›¾ç‰‡ï¼‰æ—¶è¿˜å¾—ç™»å½•å›¾åºŠç½‘ç«™/æœåŠ¡å™¨å»æ‰‹åŠ¨ä¸Šä¼ å’Œå¤åˆ¶é“¾æ¥ï¼Œæ“ä½œæ¯”è¾ƒç¹çã€‚</p><p><strong>PicGo</strong> æ˜¯ä¸€æ¬¾å¼€æºè·¨å¹³å°çš„å…è´¹ä¸Šä¼ å·¥å…·ä»¥åŠå›¾åºŠç®¡ç†å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿå¸®ä½ å¿«é€Ÿå°†å›¾ç‰‡ä¸Šä¼ åˆ°å¾®åšã€<a href="https://www.upyun.com/">åˆæ‹äº‘</a>ã€<a href="https://www.aliyun.com/">é˜¿é‡Œäº‘ </a>OSSã€<a href="https://cloud.tencent.com/?fromSource=gwzcw.2212127.2212127.2212127&utm_medium=cpd&utm_id=gwzcw.2212127.2212127.2212127">è…¾è®¯äº‘</a> OSSã€<a href="https://www.qiniu.com/">ä¸ƒç‰›äº‘</a>ã€<a href="https://github.com/">Github</a>ã€sm.sm ç­‰å¸¸è§çš„å›¾åºŠç½‘ç«™æˆ–äº‘å­˜å‚¨æœåŠ¡ä¸Šï¼Œå¹¶è‡ªåŠ¨å¤åˆ¶å›¾ç‰‡çš„é“¾æ¥åˆ°å‰ªè´´æ¿é‡Œï¼Œä½¿ç”¨ä¸Šéå¸¸é«˜æ•ˆä¾¿æ·â€¦â€¦</p><h2 id="å…è´¹å¼€æºçš„å›¾åºŠä¸Šä¼ å·¥å…·åº”ç”¨"><a href="#å…è´¹å¼€æºçš„å›¾åºŠä¸Šä¼ å·¥å…·åº”ç”¨" class="headerlink" title="å…è´¹å¼€æºçš„å›¾åºŠä¸Šä¼ å·¥å…·åº”ç”¨"></a>å…è´¹å¼€æºçš„å›¾åºŠä¸Šä¼ å·¥å…·åº”ç”¨</h2><p><strong>PicGo å›¾ç‰‡ä¸Šä¼ ä¸ç®¡ç†å·¥å…·</strong>å®Œå…¨å…è´¹ä¸”å¼€æºï¼Œè·¨å¹³å°æ”¯æŒ Windowsã€macOS å’Œ Linux ç³»ç»Ÿã€‚å®ƒçš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œåªéœ€å…ˆè®¾ç½®å¥½å›¾åºŠç½‘ç«™/äº‘å­˜å‚¨æœåŠ¡çš„è´¦å·ä¹‹åï¼Œç”¨é¼ æ ‡å°†å›¾ç‰‡æ‹–æ”¾åˆ° PicGo ä¸»çª—å£ / æ‚¬æµ®çª— / Mac é¡¶éƒ¨ä»»åŠ¡æ å›¾æ ‡ä¸Šé¢ï¼Œå³å¯å®Œæˆå›¾ç‰‡çš„ä¸Šä¼ ã€‚</p><p><strong>PicGo</strong> ä¼šè‡ªåŠ¨ä»å›¾åºŠæœåŠ¡è·å–åˆ°ä¸Šä¼ å®ŒæˆæˆåŠŸä¹‹åçš„å›¾ç‰‡é“¾æ¥ï¼Œç„¶åä¿å­˜åœ¨å‰ªè´´æ¿ä¸­ä¾›ä½ éšå¤„ç²˜è´´ä½¿ç”¨ï¼Œå› æ­¤å½“å†™ä½œã€ç¼–è¾‘æ—¶éœ€è¦æ’å…¥å›¾ç‰‡ï¼Œä½ åªéœ€è¦æ‹–æ”¾ + ç²˜è´´ä¸¤æ­¥å³å¯æå®šï¼Œéå¸¸æ–¹ä¾¿ï¼è€Œä¸”è½¯ä»¶è¿˜æ”¯æŒæ‰¹é‡ä¸Šä¼ å¤šå¼ å›¾ç‰‡ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071647071.gif" alt="img"></p><h2 id="è‡ªåŠ¨è·å–è´´å›¾ä»£ç åˆ°å‰ªè´´æ¿"><a href="#è‡ªåŠ¨è·å–è´´å›¾ä»£ç åˆ°å‰ªè´´æ¿" class="headerlink" title="è‡ªåŠ¨è·å–è´´å›¾ä»£ç åˆ°å‰ªè´´æ¿"></a>è‡ªåŠ¨è·å–è´´å›¾ä»£ç åˆ°å‰ªè´´æ¿</h2><p>å›¾ç‰‡ä¸Šä¼ ä¹‹åï¼Œ<strong>PicGo</strong> ä¼šè‡ªåŠ¨å°†å›¾ç‰‡é“¾æ¥ï¼ˆæˆ–è´´å›¾ä»£ç ï¼‰å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚<strong>PicGo</strong> å·¥å…·æä¾›äº†5ç§å›¾ç‰‡é“¾æ¥/ä»£ç æ ¼å¼ä¾›ä½ é€‰æ‹©ï¼ŒåŒ…æ‹¬ URLï¼ˆçº¯é“¾æ¥ï¼‰ã€Markdown ä»£ç ã€HTML ä»£ç ã€UBB ä»£ç å’Œè‡ªå®šä¹‰ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071647500.png" alt="img"></p><h2 id="ç›¸å†Œç®¡ç†"><a href="#ç›¸å†Œç®¡ç†" class="headerlink" title="ç›¸å†Œç®¡ç†"></a>ç›¸å†Œç®¡ç†</h2><p>PicGo è¿˜æä¾›äº†è½»é‡ç®€å•çš„ç›¸å†Œç®¡ç†åŠŸèƒ½ï¼Œå¯ä»¥æ‰¾åˆ°ä»¥å‰ä¸Šä¼ è¿‡çš„å…¨éƒ¨å›¾ç‰‡ï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥å¯¹å›¾ç‰‡è¿›è¡Œåç§°çš„ä¿®æ”¹ã€å¤åˆ¶é“¾æ¥ã€åˆ é™¤ã€æœç´¢æŸ¥çœ‹ç­‰æ“ä½œã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071647330.gif" alt="img"></p><h2 id="PicGo-Github-æ­å»ºå›¾åºŠæ­¥éª¤"><a href="#PicGo-Github-æ­å»ºå›¾åºŠæ­¥éª¤" class="headerlink" title="PicGo + Github æ­å»ºå›¾åºŠæ­¥éª¤"></a>PicGo + Github æ­å»ºå›¾åºŠæ­¥éª¤</h2><p>ä¸Šé¢è®²è¿°äº† <strong>PicGo</strong> å¦‚ä½•å¦‚ä½•å¥½ç”¨ï¼Œå¹¶ä¸”å¯ä»¥æ”¯æŒå¤šç§å›¾åºŠç½‘ç«™æˆ–äº‘å­˜å‚¨æœåŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‰€ä»¥ç°åœ¨å°±å°†è¿™ä¸ªå·¥å…·ç»™ç”¨èµ·æ¥ï¼Œåˆ©ç”¨ <strong>PicGo + Github</strong> æ¥æ­å»ºä¸€æ¬¾å…è´¹å¥½ç”¨ä¸”ç¨³å®šçš„è‡ªå»ºå›¾åºŠã€‚</p><h3 id="1ã€è½¯ä»¶å‡†å¤‡"><a href="#1ã€è½¯ä»¶å‡†å¤‡" class="headerlink" title="1ã€è½¯ä»¶å‡†å¤‡"></a>1ã€è½¯ä»¶å‡†å¤‡</h3><p>é¦–å…ˆä¸‹è½½ <a href="https://github.com/Molunerfinn/PicGo/releases">PicGo </a>è½¯ä»¶ï¼Œæˆ‘çš„æ˜¯ Windows ç³»ç»Ÿï¼Œæ‰€ä»¥ä¸‹è½½ Windows ç‰ˆæœ¬ã€‚</p><p>ä¸‹è½½å®Œæˆä¹‹åï¼ŒåŒå‡»è½¯ä»¶è¿›è¡Œå®‰è£…å³å¯æŠ•å…¥ä½¿ç”¨ã€‚</p><h3 id="2ã€Github-åˆ›å»ºä»“åº“å’Œç§˜é’¥"><a href="#2ã€Github-åˆ›å»ºä»“åº“å’Œç§˜é’¥" class="headerlink" title="2ã€Github åˆ›å»ºä»“åº“å’Œç§˜é’¥"></a>2ã€Github åˆ›å»ºä»“åº“å’Œç§˜é’¥</h3><p>é¦–å…ˆåœ¨ github ä¸Šåˆ›å»ºä¸€ä¸ªä»“åº“ï¼Œåå­—ä»€ä¹ˆçš„æŒ‰ç…§è‡ªå·±å–œå¥½æ¥å°±å¯ã€‚</p><p>ä»“åº“åˆ›å»ºå¥½ä¹‹åï¼Œæ¥ç€åœ¨ github çš„å¼€å‘è€…è®¾ç½®é¡µé¢ä¸Šæ–°å»ºä¸€ä¸ªè®¿é—®ä»¤ç‰Œï¼Œç­‰ä¸‹ä¼šç”¨çš„åˆ°ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071647164.png" alt="img"></p><p>ç‚¹å‡»åº•ä¸‹çš„åˆ›å»ºæŒ‰é’®ï¼Œå°†ä¼šç”Ÿæˆä¸€ä¸ªç§˜é’¥ï¼Œè®°å¾—ä¿å­˜å¥½ï¼Œä¸‹æ¬¡è®¿é—®çš„æ—¶å€™å°±ä¸ä¼šå‡ºç°äº†ã€‚</p><h3 id="3ã€é…ç½®-PicGo"><a href="#3ã€é…ç½®-PicGo" class="headerlink" title="3ã€é…ç½® PicGo"></a>3ã€é…ç½® PicGo</h3><p>åªå‹¾é€‰ github å›¾åºŠã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071648959.png" alt="img"></p><p>é…ç½® github å›¾åºŠã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071648764.png" alt="img"></p><p>å…¶ä¸­ï¼Œ</p><p>ä»“åº“åç§°çš„æ ¼å¼ä¸º ç”¨æˆ·å / ä»“åº“åç§°ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯ xihuanxiaorang/imagesï¼›</p><p>åˆ†æ”¯åç§°ä¸º <code>main</code>ï¼›token ä¸º æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„è®¿é—®ä»¤ç‰Œï¼Œå°†å…¶ç²˜è´´åˆ°è¿™ã€‚</p><p>é…ç½®å®Œæˆä¹‹åï¼Œå¯ä»¥ç‚¹å‡»ä¸€ä¸‹ç¡®å®šï¼Œç„¶åå°†å…¶è®¾ç½®ä¸ºé»˜è®¤å›¾åºŠï¼Œå°±å¯ä»¥æŠ•å…¥ä½¿ç”¨äº†ã€‚</p><h3 id="4ã€ä½¿ç”¨æ¼”ç¤º"><a href="#4ã€ä½¿ç”¨æ¼”ç¤º" class="headerlink" title="4ã€ä½¿ç”¨æ¼”ç¤º"></a>4ã€ä½¿ç”¨æ¼”ç¤º</h3><p>ä½¿ç”¨æ–¹å¼éå¸¸ç®€å•ï¼Œçœ‹ä¸€ä¸‹å°±ä¼šï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071647913.gif" alt="img"></p><h2 id="Typora-ä¸Šä½¿ç”¨-PicGo"><a href="#Typora-ä¸Šä½¿ç”¨-PicGo" class="headerlink" title="Typora ä¸Šä½¿ç”¨ PicGo"></a>Typora ä¸Šä½¿ç”¨ PicGo</h2><p>åœ¨ <strong>Typora</strong> çš„ åå¥½é…ç½® / å›¾åƒ ä¸­å¯ä»¥è®¾ç½®æ’å…¥å›¾ç‰‡æ—¶ä¸Šä¼ å›¾ç‰‡ï¼Œé…ç½®ä¸Šä¼ æœåŠ¡ä¸º <strong>PicGo</strong>ï¼Œ<strong>PicGo</strong> çš„è·¯å¾„ä¸ºæœ¬åœ° <strong>PicGo</strong> è½¯ä»¶çš„å®‰è£…ç›®å½•ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071647880.png" alt="img"></p><p>é…ç½®å¥½ä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹æˆ‘ä»¬æ„‰å¿«ç å­—å’Œè´´å›¾ä¹‹æ—…ï¼åŠ æ²¹å§ï¼Œéªšå¹´ï¼ï¼ï¼âœ¿âœ¿âœ¿</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
            <tag> å…¶ä»–å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†…ç½‘ç©¿é€</title>
      <link href="/article/bd50b816.html"/>
      <url>/article/bd50b816.html</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€é’‰é’‰å†…ç½‘ç©¿é€å·¥å…·"><a href="#1ã€é’‰é’‰å†…ç½‘ç©¿é€å·¥å…·" class="headerlink" title="1ã€é’‰é’‰å†…ç½‘ç©¿é€å·¥å…·"></a>1ã€<a href="https://developers.dingtalk.com/document/resourcedownload/http-intranet-penetration">é’‰é’‰å†…ç½‘ç©¿é€å·¥å…·</a></h2><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071339205.png" alt="img"></p><h3 id="1-1ã€ä»‹ç»"><a href="#1-1ã€ä»‹ç»" class="headerlink" title="1.1ã€ä»‹ç»"></a>1.1ã€ä»‹ç»</h3><p>å†…ç½‘ç©¿é€å·¥å…·å¯ä»¥å®ç°å°†ä¸€ä¸ªå…¬ç½‘åŸŸåæ˜ å°„åˆ°æœ¬åœ°çš„localhoståŸŸå</p><h3 id="1-2ã€ä½¿ç”¨ğŸ“pierced-rar"><a href="#1-2ã€ä½¿ç”¨ğŸ“pierced-rar" class="headerlink" title="1.2ã€ä½¿ç”¨ğŸ“pierced.rar"></a>1.2ã€ä½¿ç”¨<a href="https://www.yuque.com/attachments/yuque/0/2021/rar/1554080/1629101873533-0a421a56-1f33-4b33-aaad-c52b754edfbe.rar">ğŸ“pierced.rar</a></h3><p>ä¸‹è½½å·¥å…·ï¼Œè§£å‹è‡³æŸæ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ‰“å¼€cmdæ§åˆ¶å°</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071339035.png" alt="img"></p><p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯åŠ¨å†…ç½‘ç©¿é€</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ding.exe -config=ding.cfg -subdomain=intelliws 8500</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>-config</td><td>å†…ç½‘ç©¿é€çš„é…ç½®æ–‡ä»¶ï¼ŒæŒ‰ç…§å‘½ä»¤ç¤ºä¾‹å›ºå®šä¸ºé’‰é’‰æä¾›çš„./ding.cfgï¼Œæ— éœ€ä¿®æ”¹</td></tr><tr><td>-subdomain</td><td>æ‚¨éœ€è¦ä½¿ç”¨çš„åŸŸåå‰ç¼€ï¼Œè¯¥å‰ç¼€å°†ä¼šåŒ¹é…åˆ°â€œvaiwan.comâ€å‰é¢ï¼Œä¾‹å¦‚ä½ çš„subdomainæ˜¯abcdeï¼Œå¯åŠ¨å·¥å…·åä¼šå°†abcde.vaiwan.comæ˜ å°„åˆ°æœ¬åœ°ã€‚</td></tr><tr><td>ç«¯å£</td><td>æ‚¨éœ€è¦ä»£ç†çš„æœ¬åœ°æœåŠ¡http-serverç«¯å£ï¼Œä¾‹å¦‚ä½ æœ¬åœ°ç«¯å£ä¸º8080ç­‰</td></tr></tbody></table><p>æˆåŠŸåç•Œé¢</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071340783.png" alt="img"></p><h3 id="1-3ã€æ³¨æ„"><a href="#1-3ã€æ³¨æ„" class="headerlink" title="1.3ã€æ³¨æ„"></a>1.3ã€æ³¨æ„</h3><ul><li><p>éœ€è¦è®¿é—®çš„åŸŸåæ˜¯<a href="http://abcde.vaiwan.com/xxxxx">http://abcde.vaiwan.com/xxxxx</a> è€Œä¸æ˜¯<a href="http://abcde.vaiwan.com:8080/xxxxx">http://abcde.vaiwan.com:8080/xxxxx</a></p></li><li><p>å¯åŠ¨å‘½ä»¤çš„subdomainå‚æ•°æœ‰å¯èƒ½è¢«åˆ«äººå ç”¨ï¼Œå°½é‡ä¸è¦ç”¨å¸¸ç”¨å­—ç¬¦ï¼Œå¯ä»¥ç”¨è‡ªå·±å…¬å¸åçš„æ‹¼éŸ³ï¼Œä¾‹å¦‚ï¼šalibabaã€dingdingç­‰ã€‚</p></li><li><p>å¯ä»¥åœ¨æœ¬åœ°èµ·ä¸ªhttp-serveræœåŠ¡ï¼Œæ”¾ç½®ä¸€ä¸ªindex.htmlæ–‡ä»¶ï¼Œç„¶åè®¿é—®<a href="http://abcde.vaiwan.com/index.html%E6%B5%8B%E8%AF%95%E4%B8%80%E4%B8%8B%E3%80%82">http://abcde.vaiwan.com/index.htmlæµ‹è¯•ä¸€ä¸‹ã€‚</a></p></li></ul><h2 id="2ã€NATAPP"><a href="#2ã€NATAPP" class="headerlink" title="2ã€NATAPP"></a>2ã€<a href="https://natapp.cn/tunnel/buy">NATAPP</a></h2><h3 id="2-1ã€ä½¿ç”¨"><a href="#2-1ã€ä½¿ç”¨" class="headerlink" title="2.1ã€ä½¿ç”¨"></a>2.1ã€ä½¿ç”¨</h3><p>æ³¨å†Œä¸€ä¸ªè´¦å·ç™»å½•å³å¯ï¼Œç‚¹å‡»è´­ä¹°éš§é“ï¼Œå¯ä»¥é€‰æ‹©ä¸€ä¸ªå…è´¹éš§é“(æ¯æ¬¡å¯åŠ¨åŸŸåä¼šå˜åŒ–)ï¼Œæœ‰é’±çš„è¯å½“ç„¶å¯ä»¥è´­ä¹°ä¸€ä¸ªéš§é“ï¼Œè¿™é‡Œå°±é€‰æ‹©ä¸€ä¸ªå…è´¹éš§é“è¿›è¡Œæ¼”ç¤º(å½“ç„¶ä¸æ˜¯æ²¡é’±)ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071339833.png" alt="img"></p><p>ä¿®æ”¹ä½ éœ€è¦æ˜ å°„åˆ°æœ¬åœ°çš„å“ªä¸ªç«¯å£ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071339292.png" alt="img"></p><p>å¯ä»¥åœ¨æˆ‘çš„éš§é“åˆ—è¡¨çœ‹åˆ°åˆšæ‰åˆ›å»ºçš„éš§é“ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071339510.png" alt="img"></p><p>æ¥ä¸‹æ¥ï¼Œä¸‹è½½<a href="https://cdn.natapp.cn/assets/downloads/clients/2_3_9/natapp_windows_amd64_2_3_9.zip?version=20190730">natappå®¢æˆ·ç«¯</a>ï¼Œè§£å‹ä¹‹åï¼Œæ‰“å¼€configæ–‡ä»¶ï¼Œå°†ä¸Šé¢åˆ›å»ºçš„éš§é“ä¸­çš„authtokenå¤åˆ¶åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071340054.png" alt="img"></p><p>ç„¶åï¼ŒåŒå‡»æ‰“å¼€natappè½¯ä»¶ï¼Œå‡ºç°å¦‚ä¸‹ç•Œé¢è¡¨ç¤ºæˆåŠŸè¿è¡Œã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071339324.png" alt="img"></p><h2 id="3ã€Ngrok"><a href="#3ã€Ngrok" class="headerlink" title="3ã€Ngrok"></a>3ã€<a href="https://www.ngrok.cc/">Ngrok</a></h2><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071339574.png" alt="img"></p><h3 id="3-1ã€æ³¨å†Œè´¦å·å¹¶ç™»å½•"><a href="#3-1ã€æ³¨å†Œè´¦å·å¹¶ç™»å½•" class="headerlink" title="3.1ã€æ³¨å†Œè´¦å·å¹¶ç™»å½•"></a>3.1ã€æ³¨å†Œè´¦å·å¹¶ç™»å½•</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071340333.png" alt="img"></p><h3 id="3-2ã€ç™»å½•"><a href="#3-2ã€ç™»å½•" class="headerlink" title="3.2ã€ç™»å½•"></a>3.2ã€ç™»å½•</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071339906.png" alt="img"></p><h3 id="3-3ã€åˆ›å»ºä¸€ä¸ªå…è´¹çš„éš§é“"><a href="#3-3ã€åˆ›å»ºä¸€ä¸ªå…è´¹çš„éš§é“" class="headerlink" title="3.3ã€åˆ›å»ºä¸€ä¸ªå…è´¹çš„éš§é“"></a>3.3ã€åˆ›å»ºä¸€ä¸ªå…è´¹çš„éš§é“</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071339444.png" alt="img"></p><h3 id="3-4ã€å¡«å†™é…ç½®ä¿¡æ¯"><a href="#3-4ã€å¡«å†™é…ç½®ä¿¡æ¯" class="headerlink" title="3.4ã€å¡«å†™é…ç½®ä¿¡æ¯"></a>3.4ã€å¡«å†™é…ç½®ä¿¡æ¯</h3><p>æŒ‰ç…§å®é™…æƒ…å†µå¡«å†™å³å¯ï¼Œä¸€è·¯ç‚¹ç¡®å®šå³å¯ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071339728.png" alt="img"></p><h3 id="3-5ã€æŸ¥çœ‹å¼€é€šçš„éš§é“"><a href="#3-5ã€æŸ¥çœ‹å¼€é€šçš„éš§é“" class="headerlink" title="3.5ã€æŸ¥çœ‹å¼€é€šçš„éš§é“"></a>3.5ã€æŸ¥çœ‹å¼€é€šçš„éš§é“</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071341853.png" alt="img"></p><h3 id="3-6ã€ä¸‹è½½å®¢æˆ·ç«¯"><a href="#3-6ã€ä¸‹è½½å®¢æˆ·ç«¯" class="headerlink" title="3.6ã€ä¸‹è½½å®¢æˆ·ç«¯"></a>3.6ã€ä¸‹è½½å®¢æˆ·ç«¯</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071339242.png" alt="img"></p><h3 id="3-7ã€å¯åŠ¨å®¢æˆ·ç«¯"><a href="#3-7ã€å¯åŠ¨å®¢æˆ·ç«¯" class="headerlink" title="3.7ã€å¯åŠ¨å®¢æˆ·ç«¯"></a>3.7ã€å¯åŠ¨å®¢æˆ·ç«¯</h3><p>è§£å‹ä¸‹è½½å¥½çš„å‹ç¼©åŒ…ï¼ŒåŒå‡» <code>bat</code> æ–‡ä»¶ï¼Œå‡ºç°è¿è¡Œç•Œé¢ï¼Œå¡«å…¥éš§é“idå³å¯å¼€å¯æ˜ å°„ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071339590.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071339110.png" alt="img"></p><p>åˆ°æ­¤å°±å¯åŠ¨æˆåŠŸäº†ï¼Œæ’’èŠ±ï¼</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109071339319.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaå¼€å‘ </tag>
            
            <tag> å·¥å…· </tag>
            
            <tag> å¼€å‘å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>butterflyä¸»é¢˜é­”æ”¹</title>
      <link href="/article/aef1abdc.html"/>
      <url>/article/aef1abdc.html</url>
      
        <content type="html"><![CDATA[<h2 id="butterflyä¸»é¢˜é­”æ”¹css"><a href="#butterflyä¸»é¢˜é­”æ”¹css" class="headerlink" title="butterflyä¸»é¢˜é­”æ”¹css"></a>butterflyä¸»é¢˜é­”æ”¹css</h2><p>åœ¨sourceç›®å½•ä¸‹æ–°å»º <code>css/custom.css</code> æ–‡ä»¶ï¼Œåœ¨ <code>_config.butterfly.yml</code> æ–‡ä»¶ä¸­å¼•å…¥</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ ·å¼å¯ä»¥æ ¹æ®è‡ªå·±å–œæ¬¢éšæ„å¢åˆ </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* è‡ªå®šä¹‰å­—ä½“ å­—ä½“æ”¾åœ¨source/fonts/ç›®å½•ä¸‹ */</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;PingFang&#x27;</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;../../fonts/PingFang-Bold.ttf&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é¡µè„šé€æ˜ */</span></span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*é¡µè„šè‡ªå®šä¹‰å­—æ®µå­—ä½“é¢œè‰²*/</span></span><br><span class="line"><span class="comment">/* ä¹Ÿå°±æ˜¯é…ç½®æ–‡ä»¶é‡Œçš„footer_custom_text */</span></span><br><span class="line"><span class="selector-class">.footer_custom_text</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#00c4b6</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç‰ˆæƒé“¾æ¥å»æ‰ä¸‹åˆ’çº¿ */</span></span><br><span class="line"><span class="selector-class">.layout_post</span> <span class="selector-class">.post-copyright</span> <span class="selector-class">.post-copyright-info</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šå»é™¤å½’æ¡£ã€æ ‡ç­¾ã€æœ€æ–°æ–‡ç« ã€å…¬å‘Šã€ã€åªä¿ç•™ç½‘ç«™ç»Ÿè®¡*/</span></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">800px</span>) &#123;</span><br><span class="line">    <span class="selector-id">#aside_content</span> <span class="selector-tag">div</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:last-child</span>) &#123;</span><br><span class="line">        <span class="attribute">display</span>: none;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ»šåŠ¨æ¡ */</span></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">    width: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">    background-color: <span class="number">#e58a8a</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">-webkit-linear-gradient</span>(<span class="number">45deg</span>, <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.4</span>) <span class="number">25%</span>, transparent <span class="number">25%</span>, transparent <span class="number">50%</span>, <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.4</span>) <span class="number">50%</span>, <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.4</span>) <span class="number">75%</span>, transparent <span class="number">75%</span>, transparent);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">2em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-webkit-scrollbar-corner &#123;</span><br><span class="line">    background-color: transparent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">::-moz-selection &#123;</span><br><span class="line">    color: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#e58a8a</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¾§è¾¹æ å¤©æ°”æ—¶é’Ÿå»æ‰èƒŒæ™¯è‰² */</span></span><br><span class="line"><span class="selector-id">#aside-content</span><span class="selector-class">.aside-content</span> &gt; <span class="selector-class">.sticky_layout</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-clock</span> &gt; <span class="selector-class">.card-glass</span> &gt; <span class="selector-class">.card-background</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: unset;</span><br><span class="line">    <span class="attribute">box-shadow</span>: unset;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é€æ˜åº¦ä¿®æ”¹ */</span></span><br><span class="line"><span class="comment">/* é¦–é¡µæ–‡ç« å¡ç‰‡ */</span></span><br><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é¦–é¡µä¾§æ å¡ç‰‡ */</span></span><br><span class="line"><span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ–‡ç« é¡µé¢æ­£æ–‡èƒŒæ™¯ */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆ†é¡µé¡µé¢ */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#page</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å½’æ¡£é¡µé¢ */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#archive</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ ‡ç­¾é¡µé¢ */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#tag</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆ†ç±»é¡µé¢ */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#category</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* é¼ æ ‡æ ·å¼ä¿®æ”¹ */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: <span class="built_in">url</span>(<span class="string">https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/img/default.cur</span>),</span><br><span class="line">    default;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span>,</span><br><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">cursor</span>: <span class="built_in">url</span>(<span class="string">https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@latest/Hexo/img/pointer.cur</span>),</span><br><span class="line">    default;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æœç´¢æ¡†åœ†è§’ */</span></span><br><span class="line"><span class="selector-class">.search-dialog</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ›´æ¢-Twikoo-è¯„è®º"><a href="#æ›´æ¢-Twikoo-è¯„è®º" class="headerlink" title="æ›´æ¢ Twikoo è¯„è®º"></a>æ›´æ¢ Twikoo è¯„è®º</h2><p><a href="https://blog.zhheo.com/p/2e6bbbd0.html">https://blog.zhheo.com/p/2e6bbbd0.html</a></p><h2 id="åœ¨é¦–é¡µå¢åŠ ä»Šæ—¥è¯—è¯ä¾§è¾¹æ å°ç»„ä»¶"><a href="#åœ¨é¦–é¡µå¢åŠ ä»Šæ—¥è¯—è¯ä¾§è¾¹æ å°ç»„ä»¶" class="headerlink" title="åœ¨é¦–é¡µå¢åŠ ä»Šæ—¥è¯—è¯ä¾§è¾¹æ å°ç»„ä»¶"></a>åœ¨é¦–é¡µå¢åŠ ä»Šæ—¥è¯—è¯ä¾§è¾¹æ å°ç»„ä»¶</h2><p>åœ¨node_modulesä¸­æ‰¾åˆ°butterflyä¾èµ–ï¼Œç„¶ååœ¨ <code>layout\includes\widget\</code> ä¸‹æ–°å¢ <code>card_poem.pug</code> æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#card-poem.card-widget</span><br><span class="line">    #poem_sentence</span><br><span class="line">    #poem_info</span><br><span class="line">        #poem_dynasty</span><br><span class="line">        #poem_author</span><br><span class="line">script(src=&#x27;https://cdn.jsdelivr.net/gh/zhheo/JS-Heo@main/poem/jinrishici.js&#x27;, charset=&#x27;utf-8&#x27;)</span><br><span class="line">script(type=&#x27;text/javascript&#x27;).</span><br><span class="line">    jinrishici.load(function(result) &#123;</span><br><span class="line">        var sentence = document.querySelector(&quot;#poem_sentence&quot;)</span><br><span class="line">        var author = document.querySelector(&quot;#poem_author&quot;)</span><br><span class="line">        var dynasty = document.querySelector(&quot;#poem_dynasty&quot;)</span><br><span class="line"></span><br><span class="line">        var sentenceText = result.data.content</span><br><span class="line">        sentenceText = sentenceText.substr(0, sentenceText.length - 1);</span><br><span class="line">        sentence.innerHTML = sentenceText</span><br><span class="line">        dynasty.innerHTML = result.data.origin.dynasty</span><br><span class="line">        author.innerHTML = result.data.origin.author + &#x27;ã€Š&#x27; + result.data.origin.title + &#x27;ã€‹&#x27;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨åŒç›®å½•çš„ <code>index.pug</code> æ–‡ä»¶ä½ è¦æƒ³çš„å¼•å…¥åœ°æ–¹å¼•å…¥å³å¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!=partial(&#x27;includes/widget/card_poem&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br></pre></td></tr></table></figure><p>æœ€ååœ¨ <code>_config.butterfly.yml</code> æ–‡ä»¶ä¸­å¼•å…¥å¦‚ä¸‹ css é“¾æ¥ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">  <span class="comment"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;&gt;</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">type=&quot;text/css&quot;</span> <span class="string">href=&quot;https://cdn.jsdelivr.net/gh/zhheo/JS-Heo@main/mainColor/heoMainColor.css&quot;&gt;</span></span><br><span class="line">   <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">type=&quot;text/css&quot;</span> <span class="string">href=&quot;https://cdn.jsdelivr.net/gh/zhheo/JS-Heo@main/poem/poem.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><h2 id="åµŒå…¥å“”å“©å“”å“©è§†é¢‘"><a href="#åµŒå…¥å“”å“©å“”å“©è§†é¢‘" class="headerlink" title="åµŒå…¥å“”å“©å“”å“©è§†é¢‘"></a>åµŒå…¥å“”å“©å“”å“©è§†é¢‘</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=<span class="string">&quot;position: relative; width: 100%; height: 0; padding-bottom: 75%;&quot;</span>&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;//player.bilibili.com/player.html?aid=206890880&amp;bvid=BV1Ah411z7Po&amp;cid=378344365&amp;page=1&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">framespacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">allowfullscreen</span>=<span class="string">&quot;true&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position:absolute; height: 100%; width: 100%;&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">    <iframe src="//player.bilibili.com/player.html?aid=206890880&bvid=BV1Ah411z7Po&cid=378344365&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position:absolute; height: 100%; width: 100%;"> </iframe></div>]]></content>
      
      
      <categories>
          
          <category> æ‚è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‹¥ä¾å‰åç«¯åˆ†ç¦»é¡¹ç›®éƒ¨ç½²</title>
      <link href="/article/28cee05f.html"/>
      <url>/article/28cee05f.html</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€å®‰è£…redis"><a href="#1ã€å®‰è£…redis" class="headerlink" title="1ã€å®‰è£…redis"></a>1ã€å®‰è£…redis</h2><h3 id="1ã€æœç´¢redisé•œåƒ"><a href="#1ã€æœç´¢redisé•œåƒ" class="headerlink" title="1ã€æœç´¢redisé•œåƒ"></a>1ã€æœç´¢redisé•œåƒ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search redis</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638552.png" alt="img"></p><h3 id="2ã€æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„redisé•œåƒ"><a href="#2ã€æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„redisé•œåƒ" class="headerlink" title="2ã€æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„redisé•œåƒ"></a>2ã€æ‹‰å–æœ€æ–°ç‰ˆæœ¬çš„redisé•œåƒ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull redis:latest</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638808.png" alt="img"></p><h3 id="3ã€æŸ¥çœ‹é•œåƒ"><a href="#3ã€æŸ¥çœ‹é•œåƒ" class="headerlink" title="3ã€æŸ¥çœ‹é•œåƒ"></a>3ã€æŸ¥çœ‹é•œåƒ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638544.png" alt="img"></p><h3 id="4ã€å¯åŠ¨é•œåƒ"><a href="#4ã€å¯åŠ¨é•œåƒ" class="headerlink" title="4ã€å¯åŠ¨é•œåƒ"></a>4ã€å¯åŠ¨é•œåƒ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --name redis -p 6379:6379 redis</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>docker ps</code>æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638685.png" alt="img"></p><h3 id="5ã€è¿›å…¥rediså®¹å™¨"><a href="#5ã€è¿›å…¥rediså®¹å™¨" class="headerlink" title="5ã€è¿›å…¥rediså®¹å™¨"></a>5ã€è¿›å…¥rediså®¹å™¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it redis /bin/bash</span><br><span class="line">redis-cli</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638579.png" alt="img"></p><h3 id="6ã€ä½¿ç”¨AnotherRedisDestopManagerè¿æ¥redis"><a href="#6ã€ä½¿ç”¨AnotherRedisDestopManagerè¿æ¥redis" class="headerlink" title="6ã€ä½¿ç”¨AnotherRedisDestopManagerè¿æ¥redis"></a>6ã€ä½¿ç”¨<a href="https://github.com/qishibo/AnotherRedisDesktopManager/releases">AnotherRedisDestopManager</a>è¿æ¥redis</h3><p>å¦‚æœè¿æ¥æŠ¥é”™ï¼Œè¯·ç¡®ä¿æœåŠ¡å™¨çš„å®‰å…¨ç»„ä¸­å¼€å¯6379ç«¯å£ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081639887.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638719.png" alt="img"></p><h2 id="2ã€å®‰è£…nodejs"><a href="#2ã€å®‰è£…nodejs" class="headerlink" title="2ã€å®‰è£…nodejs"></a>2ã€å®‰è£…nodejs</h2><h3 id="1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½æœ€æ–°çš„nodejs"><a href="#1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½æœ€æ–°çš„nodejs" class="headerlink" title="1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½æœ€æ–°çš„nodejs"></a>1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½æœ€æ–°çš„<a href="https://npm.taobao.org/mirrors/node/v14.15.5/">nodejs</a></h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081639399.png" alt="img"></p><h3 id="2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨"><a href="#2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨" class="headerlink" title="2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨"></a>2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081639290.png" alt="img"></p><h3 id="3ã€è§£å‹å¹¶ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°-data-serviceç›®å½•"><a href="#3ã€è§£å‹å¹¶ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°-data-serviceç›®å½•" class="headerlink" title="3ã€è§£å‹å¹¶ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°/data/serviceç›®å½•"></a>3ã€è§£å‹å¹¶ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°<code>/data/service</code>ç›®å½•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf node-v14.15.5-linux-x64.tar.gz</span><br><span class="line">mv node-v14.15.5-linux-x64 /data/service</span><br><span class="line">cd /data/service</span><br><span class="line">ll</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638038.png" alt="img"></p><h3 id="4ã€é…ç½®ç¯å¢ƒå˜é‡"><a href="#4ã€é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="4ã€é…ç½®ç¯å¢ƒå˜é‡"></a>4ã€é…ç½®ç¯å¢ƒå˜é‡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export NODEJS_HOME=/data/service/node-v14.15.5-linux-x64</span><br><span class="line">export PATH=$PATH:$NODEJS_HOME/bin</span><br></pre></td></tr></table></figure><p>ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638101.png" alt="img"></p><h3 id="5ã€è®¾ç½®npmé•œåƒæº"><a href="#5ã€è®¾ç½®npmé•œåƒæº" class="headerlink" title="5ã€è®¾ç½®npmé•œåƒæº"></a>5ã€è®¾ç½®npmé•œåƒæº</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#è®¾ç½®æ·˜å®é•œåƒæº</span><br><span class="line">npm config set registry https://registry.npm.taobao.org</span><br><span class="line">#å‡çº§npm</span><br><span class="line">npm -g install npm</span><br><span class="line">#æŸ¥çœ‹npmé…ç½®</span><br><span class="line">npm config list</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638186.png" alt="img"></p><h3 id="6ã€å®‰è£…yarnä»¥åŠè®¾ç½®é•œåƒæº"><a href="#6ã€å®‰è£…yarnä»¥åŠè®¾ç½®é•œåƒæº" class="headerlink" title="6ã€å®‰è£…yarnä»¥åŠè®¾ç½®é•œåƒæº"></a>6ã€å®‰è£…yarnä»¥åŠè®¾ç½®é•œåƒæº</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#å®‰è£…yarn</span><br><span class="line">npm install -g yarn</span><br><span class="line">#æŸ¥çœ‹ç‰ˆæœ¬å·</span><br><span class="line">yarn -v</span><br><span class="line">#è®¾ç½®æ·˜å®é•œåƒæº</span><br><span class="line">yarn config set registry https://registry.npm.taobao.org -g</span><br><span class="line">yarn config set sass_binary_site http://cdn.npm.taobao.org/dist/node-sass -g</span><br><span class="line">#æŸ¥çœ‹yarné…ç½®</span><br><span class="line">yarn config list</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081639808.png" alt="img"></p><h2 id="3ã€å®‰è£…nginx"><a href="#3ã€å®‰è£…nginx" class="headerlink" title="3ã€å®‰è£…nginx"></a>3ã€å®‰è£…nginx</h2><h3 id="1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½æœ€æ–°çš„ç¨³å®šç‰ˆngnix"><a href="#1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½æœ€æ–°çš„ç¨³å®šç‰ˆngnix" class="headerlink" title="1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½æœ€æ–°çš„ç¨³å®šç‰ˆngnix"></a>1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½æœ€æ–°çš„ç¨³å®šç‰ˆ<a href="https://nginx.org/download/">ngnix</a></h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638225.png" alt="img"></p><h3 id="2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨-1"><a href="#2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨-1" class="headerlink" title="2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨"></a>2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081639451.png" alt="img"></p><h3 id="3ã€è§£å‹ç¼–è¯‘å®‰è£…nginx"><a href="#3ã€è§£å‹ç¼–è¯‘å®‰è£…nginx" class="headerlink" title="3ã€è§£å‹ç¼–è¯‘å®‰è£…nginx"></a>3ã€è§£å‹ç¼–è¯‘å®‰è£…nginx</h3><p>é¦–å…ˆå®‰è£…ä¾èµ–</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc pcre-devel zlib-devel openssl openssl-devel</span><br><span class="line">cd /data/tmp</span><br><span class="line">tar zxvf nginx-1.18.0.tar.gz</span><br><span class="line">cd nginx-1.18.0</span><br><span class="line">./configure --prefix=/data/service/ngnix</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h3 id="4ã€å¯åŠ¨ngnix"><a href="#4ã€å¯åŠ¨ngnix" class="headerlink" title="4ã€å¯åŠ¨ngnix"></a>4ã€å¯åŠ¨ngnix</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#å¯åŠ¨ngnix</span><br><span class="line">/data/service/ngnix/sbin/nginx</span><br><span class="line">#åœæ­¢ngnix</span><br><span class="line">/data/service/ngnix/sbin/nginx -s quit</span><br><span class="line">#é‡å¯ngnix</span><br><span class="line">/data/service/ngnix/sbin/nginx -s reload</span><br></pre></td></tr></table></figure><p>å¦‚æœè®¿é—®ä¸æˆåŠŸï¼Œè¯·ç¡®ä¿æœåŠ¡å™¨çš„å®‰å…¨ç»„ä¸­å¼€å¯80ç«¯å£ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638549.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081639533.png" alt="img"></p><h2 id="4ã€è¿è¡Œé¡¹ç›®å‡†å¤‡"><a href="#4ã€è¿è¡Œé¡¹ç›®å‡†å¤‡" class="headerlink" title="4ã€è¿è¡Œé¡¹ç›®å‡†å¤‡"></a>4ã€è¿è¡Œé¡¹ç›®å‡†å¤‡</h2><h3 id="1ã€æ‹‰å–ä»£ç "><a href="#1ã€æ‹‰å–ä»£ç " class="headerlink" title="1ã€æ‹‰å–ä»£ç "></a>1ã€æ‹‰å–ä»£ç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /data/gitee</span><br><span class="line">git clone git@gitee.com:y_project/RuoYi-Vue.git</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638328.png" alt="img"></p><h3 id="2ã€åˆ›å»ºæ•°æ®åº“ä»¥åŠæ•°æ®åº“è¡¨"><a href="#2ã€åˆ›å»ºæ•°æ®åº“ä»¥åŠæ•°æ®åº“è¡¨" class="headerlink" title="2ã€åˆ›å»ºæ•°æ®åº“ä»¥åŠæ•°æ®åº“è¡¨"></a>2ã€åˆ›å»ºæ•°æ®åº“ä»¥åŠæ•°æ®åº“è¡¨</h3><p>ä½¿ç”¨navicatè¿æ¥ï¼Œåˆ›å»ºæ•°æ®åº“ <code>ry-vue</code> ä»¥åŠæ‰§è¡Œ <code>quartz.sql</code> å’Œ <code>ry_20210210.sql</code> è„šæœ¬ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081639429.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638692.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638074.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638789.png" alt="img"></p><h3 id="3ã€ä¿®æ”¹é¡¹ç›®é…ç½®"><a href="#3ã€ä¿®æ”¹é¡¹ç›®é…ç½®" class="headerlink" title="3ã€ä¿®æ”¹é¡¹ç›®é…ç½®"></a>3ã€ä¿®æ”¹é¡¹ç›®é…ç½®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /data/gitee/RuoYi-Vue/ruoyi-admin/src/main/resources/</span><br><span class="line">#ä¿®æ”¹application.ymlçš„é¡¹ç›®å¯åŠ¨ç«¯å£å·ä¸æ–‡ä»¶ä¸Šä¼ è·¯å¾„</span><br><span class="line">vim application.yml</span><br><span class="line">#ä¿®æ”¹application-druid.ymlçš„æ•°æ®æº</span><br><span class="line">vim application-druid.yml</span><br><span class="line">profile: /data/tmp</span><br><span class="line">port: 18081</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638321.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># ä¸»åº“æ•°æ®æº</span><br><span class="line">master:</span><br><span class="line">url: jdbc:mysql://localhost:3306/ry-vue?useUnicode=true&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span><br><span class="line">username: root</span><br><span class="line">password: 123456</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638648.png" alt="img"></p><h3 id="4ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…"><a href="#4ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…" class="headerlink" title="4ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…"></a>4ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /data/gitee/RuoYi-Vue/</span><br><span class="line">mvn clean install -pl com.ruoyi:ruoyi-admin -am</span><br></pre></td></tr></table></figure><h3 id="5ã€å¯åŠ¨åç«¯é¡¹ç›®"><a href="#5ã€å¯åŠ¨åç«¯é¡¹ç›®" class="headerlink" title="5ã€å¯åŠ¨åç«¯é¡¹ç›®"></a>5ã€å¯åŠ¨åç«¯é¡¹ç›®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/app/ruoyi-vue</span><br><span class="line">cp /data/gitee/RuoYi-Vue/ruoyi-admin/target/ruoyi-admin.jar /data/app/ruoyi-vue/ruoyi-admin.jar</span><br><span class="line">cd /data/app/ruoyi-vue/</span><br><span class="line">#åå°å¯åŠ¨é¡¹ç›®</span><br><span class="line">nohup java -jar ruoyi-admin.jar &amp;</span><br><span class="line">#æŸ¥çœ‹é¡¹ç›®è¿è¡Œæ—¥å¿—</span><br><span class="line">tail -f nohup.out</span><br></pre></td></tr></table></figure><p>å¦‚æœæŸ¥çœ‹æ—¥å¿—çš„æ—¶å€™ï¼Œå‡ºç°18081ç«¯å£è¢«ä½¿ç”¨ï¼Œåˆ™è¡¨ç¤ºè¿˜æœ‰å…¶ä»–åº”ç”¨å ç”¨äº†è¯¥ç«¯å£ï¼Œå…³é—­åº”ç”¨ä¹‹åå†é‡æ–°å¯åŠ¨å³å¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#åˆ—å‡ºåå°è¿›ç¨‹</span><br><span class="line">ps -ef | grep java</span><br><span class="line">#æ€æ­»è¿›ç¨‹</span><br><span class="line">kill -9 pid</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081640303.png" alt="img"></p><h3 id="6ã€å¯åŠ¨å‰ç«¯é¡¹ç›®"><a href="#6ã€å¯åŠ¨å‰ç«¯é¡¹ç›®" class="headerlink" title="6ã€å¯åŠ¨å‰ç«¯é¡¹ç›®"></a>6ã€å¯åŠ¨å‰ç«¯é¡¹ç›®</h3><h4 id="1ã€ä¸‹è½½ä¾èµ–å¹¶æ‰“åŒ…"><a href="#1ã€ä¸‹è½½ä¾èµ–å¹¶æ‰“åŒ…" class="headerlink" title="1ã€ä¸‹è½½ä¾èµ–å¹¶æ‰“åŒ…"></a>1ã€ä¸‹è½½ä¾èµ–å¹¶æ‰“åŒ…</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd /data/gitee/RuoYi-Vue/ruoyi-ui</span><br><span class="line">#ä¸‹è½½ä¾èµ–</span><br><span class="line">yarn install</span><br><span class="line"># æ‰“åŒ…æ­£å¼ç¯å¢ƒ</span><br><span class="line">yarn run build:prod</span><br><span class="line"></span><br><span class="line">mkdir /data/app/ruoyi-ui</span><br><span class="line">mv dist/* /data/app/ruoyi-ui/</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638123.png" alt="img"></p><h4 id="2ã€é…ç½®ngnixé…ç½®æ–‡ä»¶"><a href="#2ã€é…ç½®ngnixé…ç½®æ–‡ä»¶" class="headerlink" title="2ã€é…ç½®ngnixé…ç½®æ–‡ä»¶"></a>2ã€é…ç½®ngnixé…ç½®æ–‡ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vim /data/service/ngnix/conf/nginx.conf</span><br><span class="line">location / &#123;</span><br><span class="line">  root   /data/app/ruoyi-ui;</span><br><span class="line">  try_files $uri $uri/ /index.html;</span><br><span class="line">  index index.html index.htm;</span><br><span class="line">&#125;</span><br><span class="line">       </span><br><span class="line">location /prod-api/ &#123;</span><br><span class="line">  proxy_set_header Host $http_host;</span><br><span class="line">  proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">  proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">  proxy_pass http://localhost:18081/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3ã€è®¿é—®é¡¹ç›®"><a href="#3ã€è®¿é—®é¡¹ç›®" class="headerlink" title="3ã€è®¿é—®é¡¹ç›®"></a>3ã€è®¿é—®<a href="http://120.78.177.161/login?redirect=/index">é¡¹ç›®</a></h4><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081638514.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> æ‚è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaå¼€å‘ </tag>
            
            <tag> è‹¥ä¾ </tag>
            
            <tag> éƒ¨ç½² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‹¥ä¾å‰åç«¯ä¸åˆ†ç¦»é¡¹ç›®éƒ¨ç½²</title>
      <link href="/article/2e2b64e6.html"/>
      <url>/article/2e2b64e6.html</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€ä¸‹è½½å®‰è£…xshellä¸xftp"><a href="#1ã€ä¸‹è½½å®‰è£…xshellä¸xftp" class="headerlink" title="1ã€ä¸‹è½½å®‰è£…xshellä¸xftp"></a>1ã€ä¸‹è½½å®‰è£…<a href="https://www.netsarang.com/zh/xshell/">xshell</a>ä¸<a href="https://www.netsarang.com/zh/xftp/">xftp</a></h2><p>ç”¨äºè¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨ä»¥åŠä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨ã€‚</p><h2 id="2ã€æ–°å»ºç›®å½•"><a href="#2ã€æ–°å»ºç›®å½•" class="headerlink" title="2ã€æ–°å»ºç›®å½•"></a>2ã€æ–°å»ºç›®å½•</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#tmpå­˜æ”¾ä¸´æ—¶å®‰è£…åŒ…</span><br><span class="line">mkdir -p /data/tmp</span><br><span class="line">#serviceå­˜æ”¾è½¯ä»¶ç¯å¢ƒ</span><br><span class="line">mkdir -p /data/service</span><br><span class="line">#giteeå­˜æ”¾ä»£ç ç‰ˆæœ¬æ§åˆ¶åº“</span><br><span class="line">mkdir -p /data/gitee</span><br></pre></td></tr></table></figure><h2 id="3ã€å®‰è£…jdk"><a href="#3ã€å®‰è£…jdk" class="headerlink" title="3ã€å®‰è£…jdk"></a>3ã€å®‰è£…jdk</h2><h3 id="1ã€jdk1-8ç™¾åº¦äº‘ä¸‹è½½"><a href="#1ã€jdk1-8ç™¾åº¦äº‘ä¸‹è½½" class="headerlink" title="1ã€jdk1.8ç™¾åº¦äº‘ä¸‹è½½"></a>1ã€<a href="https://blog.csdn.net/qq_42767455/article/details/105724208">jdk1.8ç™¾åº¦äº‘</a>ä¸‹è½½</h3><h3 id="2ã€ä¸‹è½½å®Œæˆä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨"><a href="#2ã€ä¸‹è½½å®Œæˆä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨" class="headerlink" title="2ã€ä¸‹è½½å®Œæˆä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨"></a>2ã€ä¸‹è½½å®Œæˆä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631415.png" alt="img"></p><h3 id="3ã€è§£å‹å¹¶ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°-data-serviceç›®å½•"><a href="#3ã€è§£å‹å¹¶ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°-data-serviceç›®å½•" class="headerlink" title="3ã€è§£å‹å¹¶ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°/data/serviceç›®å½•"></a>3ã€è§£å‹å¹¶ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°/data/serviceç›®å½•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk-8u261-linux-x64.tar.gz</span><br><span class="line">mv jdk1.8.0_261 /data/service</span><br><span class="line">cd /data/service</span><br><span class="line">ll</span><br></pre></td></tr></table></figure><h3 id="4ã€é…ç½®ç¯å¢ƒå˜é‡"><a href="#4ã€é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="4ã€é…ç½®ç¯å¢ƒå˜é‡"></a>4ã€é…ç½®ç¯å¢ƒå˜é‡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export JAVA_HOME=/data/service/jdk1.8.0_261</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br></pre></td></tr></table></figure><p>ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631280.png" alt="img"></p><h2 id="4ã€å®‰è£…maven"><a href="#4ã€å®‰è£…maven" class="headerlink" title="4ã€å®‰è£…maven"></a>4ã€å®‰è£…maven</h2><h3 id="1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½æœ€æ–°çš„maven"><a href="#1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½æœ€æ–°çš„maven" class="headerlink" title="1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½æœ€æ–°çš„maven"></a>1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½æœ€æ–°çš„<a href="http://maven.apache.org/download.cgi">maven</a></h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631170.png" alt="img"></p><h3 id="2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨"><a href="#2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨" class="headerlink" title="2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨"></a>2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631300.png" alt="img"></p><h3 id="3ã€è§£å‹å¹¶ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°-data-serviceç›®å½•-1"><a href="#3ã€è§£å‹å¹¶ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°-data-serviceç›®å½•-1" class="headerlink" title="3ã€è§£å‹å¹¶ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°/data/serviceç›®å½•"></a>3ã€è§£å‹å¹¶ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°<code>/data/service</code>ç›®å½•</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf apache-maven-3.6.3-bin.tar.gz</span><br><span class="line">mv apache-maven-3.6.3 /data/service</span><br><span class="line">cd /data/service</span><br><span class="line">ll</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631294.png" alt="img"></p><h3 id="4ã€é…ç½®ç¯å¢ƒå˜é‡-1"><a href="#4ã€é…ç½®ç¯å¢ƒå˜é‡-1" class="headerlink" title="4ã€é…ç½®ç¯å¢ƒå˜é‡"></a>4ã€é…ç½®ç¯å¢ƒå˜é‡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export MAVEN_HOME=/data/service/apache-maven-3.6.3</span><br><span class="line">export PATH=$PATH:$MAVEN_HOME/bin</span><br></pre></td></tr></table></figure><p>ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn -v</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631134.png" alt="img"></p><h3 id="5ã€é…ç½®æœ¬åœ°ä»“åº“åœ°å€ä¸é˜¿é‡Œäº‘é•œåƒ"><a href="#5ã€é…ç½®æœ¬åœ°ä»“åº“åœ°å€ä¸é˜¿é‡Œäº‘é•œåƒ" class="headerlink" title="5ã€é…ç½®æœ¬åœ°ä»“åº“åœ°å€ä¸é˜¿é‡Œäº‘é•œåƒ"></a>5ã€é…ç½®æœ¬åœ°ä»“åº“åœ°å€ä¸<a href="https://maven.aliyun.com/mvn/guide">é˜¿é‡Œäº‘é•œåƒ</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vim /data/service/apache-maven-3.6.3/conf/setting.xml</span><br><span class="line"></span><br><span class="line">#é…ç½®æœ¬åœ°ä»“åº“</span><br><span class="line">&lt;localRepository&gt;/data/service/apache-maven-3.6.3/repository&lt;/localRepository&gt;</span><br><span class="line"></span><br><span class="line">#é…ç½®é˜¿é‡Œäº‘é•œåƒ</span><br><span class="line">&lt;mirror&gt;</span><br><span class="line">  &lt;id&gt;aliyunmaven&lt;/id&gt;</span><br><span class="line">  &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;</span><br><span class="line">  &lt;name&gt;é˜¿é‡Œäº‘å…¬å…±ä»“åº“&lt;/name&gt;</span><br><span class="line">  &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt;</span><br><span class="line">&lt;/mirror&gt;</span><br></pre></td></tr></table></figure><h2 id="5ã€å®‰è£…git"><a href="#5ã€å®‰è£…git" class="headerlink" title="5ã€å®‰è£…git"></a>5ã€å®‰è£…git</h2><h3 id="1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½git"><a href="#1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½git" class="headerlink" title="1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½git"></a>1ã€è¿›å…¥å®˜ç½‘ä¸‹è½½<a href="https://mirrors.edge.kernel.org/pub/software/scm/git/">git</a></h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631281.png" alt="img"></p><h3 id="2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨-1"><a href="#2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨-1" class="headerlink" title="2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨"></a>2ã€ä¸‹è½½å®Œä¹‹åé€šè¿‡xftpä¸Šä¼ å‹ç¼©åŒ…åˆ°æœåŠ¡å™¨</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631681.png" alt="img"></p><h3 id="3ã€è§£å‹ç¼–è¯‘å®‰è£…git"><a href="#3ã€è§£å‹ç¼–è¯‘å®‰è£…git" class="headerlink" title="3ã€è§£å‹ç¼–è¯‘å®‰è£…git"></a>3ã€è§£å‹ç¼–è¯‘å®‰è£…git</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum -y groupinstall &quot;Development Tools&quot;</span><br><span class="line">yum install wget unzip gettext-devel openssl-devel perl-CPAN perl-devel zlib-devel libcurl-devel expat-devel -y</span><br><span class="line">cd /data/tmp</span><br><span class="line">tar zxvf git-2.18.0.tar.gz</span><br><span class="line">cd git-2.18.0</span><br><span class="line">./configure --prefix=/data/service/git</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h3 id="4ã€é…ç½®ç¯å¢ƒå˜é‡-2"><a href="#4ã€é…ç½®ç¯å¢ƒå˜é‡-2" class="headerlink" title="4ã€é…ç½®ç¯å¢ƒå˜é‡"></a>4ã€é…ç½®ç¯å¢ƒå˜é‡</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">export GIT_HOME=/data/service/git</span><br><span class="line">export PATH=$PATH:$GIT_HOME/bin</span><br></pre></td></tr></table></figure><p>ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631828.png" alt="img"></p><h3 id="5ã€ç”Ÿæˆ-æ·»åŠ SSHå…¬é’¥"><a href="#5ã€ç”Ÿæˆ-æ·»åŠ SSHå…¬é’¥" class="headerlink" title="5ã€ç”Ÿæˆ/æ·»åŠ SSHå…¬é’¥"></a>5ã€<a href="https://gitee.com/help/articles/4181#article-header0">ç”Ÿæˆ/æ·»åŠ SSHå…¬é’¥</a></h3><h4 id="1ã€ç”Ÿæˆå…¬é’¥"><a href="#1ã€ç”Ÿæˆå…¬é’¥" class="headerlink" title="1ã€ç”Ÿæˆå…¬é’¥"></a>1ã€ç”Ÿæˆå…¬é’¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;15019474951@163.com&quot;</span><br><span class="line">cat ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><h4 id="2ã€æ·»åŠ å…¬é’¥åˆ°gitte"><a href="#2ã€æ·»åŠ å…¬é’¥åˆ°gitte" class="headerlink" title="2ã€æ·»åŠ å…¬é’¥åˆ°gitte"></a>2ã€æ·»åŠ å…¬é’¥åˆ°<a href="https://gitee.com/profile/sshkeys">gitte</a></h4><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631927.png" alt="img"></p><h4 id="3ã€éªŒè¯"><a href="#3ã€éªŒè¯" class="headerlink" title="3ã€éªŒè¯"></a>3ã€éªŒè¯</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@gitee.com</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631920.png" alt="img"></p><h3 id="6ã€æ‹‰å–ruoyiä»£ç "><a href="#6ã€æ‹‰å–ruoyiä»£ç " class="headerlink" title="6ã€æ‹‰å–ruoyiä»£ç "></a>6ã€æ‹‰å–<a href="https://gitee.com/y_project/RuoYi?_from=gitee_search">ruoyi</a>ä»£ç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /data/gitee</span><br><span class="line">git clone git@gitee.com:y_project/RuoYi.git</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081632404.png" alt="img"></p><h2 id="6ã€å®‰è£…docker"><a href="#6ã€å®‰è£…docker" class="headerlink" title="6ã€å®‰è£…docker"></a>6ã€å®‰è£…<a href="https://docs.docker.com/engine/install/centos/">docker</a></h2><h3 id="1ã€å¸è½½æ—§ç‰ˆæœ¬"><a href="#1ã€å¸è½½æ—§ç‰ˆæœ¬" class="headerlink" title="1ã€å¸è½½æ—§ç‰ˆæœ¬"></a>1ã€å¸è½½æ—§ç‰ˆæœ¬</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631900.png" alt="img"></p><h3 id="2ã€å®‰è£…ä¾èµ–"><a href="#2ã€å®‰è£…ä¾èµ–" class="headerlink" title="2ã€å®‰è£…ä¾èµ–"></a>2ã€å®‰è£…ä¾èµ–</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure><h3 id="3ã€æ·»åŠ æº"><a href="#3ã€æ·»åŠ æº" class="headerlink" title="3ã€æ·»åŠ æº"></a>3ã€æ·»åŠ æº</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><h3 id="4ã€å®‰è£…æœ€æ–°çš„containerdå’Œdocker"><a href="#4ã€å®‰è£…æœ€æ–°çš„containerdå’Œdocker" class="headerlink" title="4ã€å®‰è£…æœ€æ–°çš„containerdå’Œdocker"></a>4ã€å®‰è£…æœ€æ–°çš„containerdå’Œdocker</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install docker-ce docker-ce-cli containerd.io -y</span><br></pre></td></tr></table></figure><p>å¦‚æœå®‰è£…é€”ä¸­æŠ¥é”™ï¼Œå¯ä»¥è¿›è¡Œæ‰‹åŠ¨å®‰è£…æ–°ç‰ˆæœ¬çš„containerd.io</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y https://mirrors.aliyun.com/docker-ce/linux/centos/7/x86_64/edge/Packages/containerd.io-1.2.6-3.3.el7.x86_64.rpm</span><br><span class="line">yum install docker-ce docker-ce-cli -y</span><br></pre></td></tr></table></figure><h3 id="5ã€å¯åŠ¨dockerå¹¶é…ç½®å¼€æœºè‡ªå¯"><a href="#5ã€å¯åŠ¨dockerå¹¶é…ç½®å¼€æœºè‡ªå¯" class="headerlink" title="5ã€å¯åŠ¨dockerå¹¶é…ç½®å¼€æœºè‡ªå¯"></a>5ã€å¯åŠ¨dockerå¹¶é…ç½®å¼€æœºè‡ªå¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># å¯åŠ¨docker</span><br><span class="line">sudo systemctl start docker</span><br><span class="line"># å¼€æœºè‡ªå¯</span><br><span class="line">sudo systemctl enable docker</span><br></pre></td></tr></table></figure><h3 id="6ã€æ£€æµ‹dockerç‰ˆæœ¬"><a href="#6ã€æ£€æµ‹dockerç‰ˆæœ¬" class="headerlink" title="6ã€æ£€æµ‹dockerç‰ˆæœ¬"></a>6ã€æ£€æµ‹dockerç‰ˆæœ¬</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker -v</span><br></pre></td></tr></table></figure><h3 id="7ã€é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨"><a href="#7ã€é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨" class="headerlink" title="7ã€é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿå™¨"></a>7ã€é…ç½®é˜¿é‡Œäº‘<a href="https://cr.console.aliyun.com/cn-shenzhen/instances/mirrors">é•œåƒåŠ é€Ÿå™¨</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://plb9xzjh.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure><h2 id="7ã€å®‰è£…mysql"><a href="#7ã€å®‰è£…mysql" class="headerlink" title="7ã€å®‰è£…mysql"></a>7ã€å®‰è£…mysql</h2><h3 id="1ã€æœç´¢mysqlé•œåƒ"><a href="#1ã€æœç´¢mysqlé•œåƒ" class="headerlink" title="1ã€æœç´¢mysqlé•œåƒ"></a>1ã€æœç´¢mysqlé•œåƒ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search mysql</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1554080/1614084313743-d34506d7-d3a1-4e9e-911e-69235fe40a0a.png" alt="img"></p><h3 id="2ã€æ‹‰å–mysql5-7é•œåƒ"><a href="#2ã€æ‹‰å–mysql5-7é•œåƒ" class="headerlink" title="2ã€æ‹‰å–mysql5.7é•œåƒ"></a>2ã€æ‹‰å–mysql5.7é•œåƒ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql:5.7</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1554080/1614084218408-3315d8a7-0bbf-4118-b8b9-37ed5569ed01.png" alt="img"></p><h3 id="3ã€æŸ¥çœ‹é•œåƒ"><a href="#3ã€æŸ¥çœ‹é•œåƒ" class="headerlink" title="3ã€æŸ¥çœ‹é•œåƒ"></a>3ã€æŸ¥çœ‹é•œåƒ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631183.png" alt="img"></p><h3 id="4ã€åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#4ã€åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="4ã€åˆ›å»ºé…ç½®æ–‡ä»¶"></a>4ã€åˆ›å»ºé…ç½®æ–‡ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/docker/mysql/conf</span><br><span class="line">cd /data/docker/mysql/conf</span><br><span class="line">vim my.cnf</span><br></pre></td></tr></table></figure><p>my.cnf æ–‡ä»¶å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">character-set-server=utf8</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br></pre></td></tr></table></figure><h3 id="5ã€å¯åŠ¨é•œåƒ"><a href="#5ã€å¯åŠ¨é•œåƒ" class="headerlink" title="5ã€å¯åŠ¨é•œåƒ"></a>5ã€å¯åŠ¨é•œåƒ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 3306:3306 --name mysql -v /data/docker/mysql/conf:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>docker ps</code>æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631439.png" alt="img"></p><h3 id="6ã€è¿›å…¥mysqlå®¹å™¨"><a href="#6ã€è¿›å…¥mysqlå®¹å™¨" class="headerlink" title="6ã€è¿›å…¥mysqlå®¹å™¨"></a>6ã€è¿›å…¥mysqlå®¹å™¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it mysql bash</span><br><span class="line">mysql -uroot -p123456</span><br><span class="line">show databases;</span><br><span class="line"># é€€å‡º</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631524.png" alt="img"></p><h3 id="7ã€ä½¿ç”¨navicatè¿æ¥mysql"><a href="#7ã€ä½¿ç”¨navicatè¿æ¥mysql" class="headerlink" title="7ã€ä½¿ç”¨navicatè¿æ¥mysql"></a>7ã€ä½¿ç”¨navicatè¿æ¥mysql</h3><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081632763.png" alt="img"></p><p>å¦‚æœè¿æ¥æŠ¥é”™ï¼Œè¯·ç¡®ä¿æœåŠ¡å™¨çš„å®‰å…¨ç»„ä¸­å¼€å¯3306ç«¯å£ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631352.png" alt="img"></p><p>è¿›å…¥mysqlå®¹å™¨ï¼Œè®¾ç½®rootè´¦æˆ·å¯†ç ä¸º123456å¹¶ä¸”å…è®¸ä»»ä½•ipè®¿é—®mysqlæœåŠ¡å™¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it mysql bash</span><br><span class="line">mysql -uroot -p123456</span><br><span class="line">use ruoyi;</span><br><span class="line">grant all privileges on *.* to root@&quot;%&quot; identified by &quot;123456&quot;;</span><br><span class="line">flush privileges;</span><br><span class="line">exit</span><br><span class="line">exit</span><br><span class="line"># é‡å¯mysqlæœåŠ¡</span><br><span class="line">sudo docker restart mysql</span><br></pre></td></tr></table></figure><h3 id="8ã€è¿è¡Œé¡¹ç›®å‡†å¤‡"><a href="#8ã€è¿è¡Œé¡¹ç›®å‡†å¤‡" class="headerlink" title="8ã€è¿è¡Œé¡¹ç›®å‡†å¤‡"></a>8ã€è¿è¡Œé¡¹ç›®å‡†å¤‡</h3><h4 id="1ã€åˆ›å»ºæ•°æ®åº“ä»¥åŠæ•°æ®åº“è¡¨"><a href="#1ã€åˆ›å»ºæ•°æ®åº“ä»¥åŠæ•°æ®åº“è¡¨" class="headerlink" title="1ã€åˆ›å»ºæ•°æ®åº“ä»¥åŠæ•°æ®åº“è¡¨"></a>1ã€åˆ›å»ºæ•°æ®åº“ä»¥åŠæ•°æ®åº“è¡¨</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#å¤åˆ¶éœ€è¦æ‰§è¡Œçš„sqlæ–‡ä»¶åˆ°dockerçš„æ˜ å°„ç›®å½•ä¸­</span><br><span class="line">cp /data/gitee/RuoYi/sql/quartz.sql /data/docker/mysql/conf/</span><br><span class="line">cp /data/gitee/RuoYi/sql/ry_20210210.sql /data/docker/mysql/conf/</span><br><span class="line">#è¿›å…¥dockerå®¹å™¨ä¸­ï¼Œæ‰§è¡Œsqlæ–‡ä»¶</span><br><span class="line">docker exec -it mysql env LANG=C.UTF-8 bash</span><br><span class="line">#è¿æ¥mysql</span><br><span class="line">mysql -uroot -p123456</span><br><span class="line">#åˆ›å»ºæ•°æ®åº“ruoyi</span><br><span class="line">create database if not exists ruoyi character set=&#x27;utf8&#x27;;</span><br><span class="line">#è¿›å…¥æ•°æ®åº“ï¼Œæ‰§è¡Œsqlæ–‡ä»¶</span><br><span class="line">use ruoyi;</span><br><span class="line">source /etc/mysql/conf.d/quartz.sql;</span><br><span class="line">source /etc/mysql/conf.d/ry_20210210.sql;</span><br><span class="line">#æ˜¾ç¤ºåˆ›å»ºçš„è¡¨</span><br><span class="line">show tables;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631419.png" alt="img"></p><h4 id="2ã€ä¿®æ”¹é¡¹ç›®é…ç½®"><a href="#2ã€ä¿®æ”¹é¡¹ç›®é…ç½®" class="headerlink" title="2ã€ä¿®æ”¹é¡¹ç›®é…ç½®"></a>2ã€ä¿®æ”¹é¡¹ç›®é…ç½®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /data/gitee/RuoYi/ruoyi-admin/src/main/resources/</span><br><span class="line">#ä¿®æ”¹application.ymlçš„é¡¹ç›®å¯åŠ¨ç«¯å£å·ä¸æ–‡ä»¶ä¸Šä¼ è·¯å¾„</span><br><span class="line">vim application.yml</span><br><span class="line">#ä¿®æ”¹application-druid.ymlçš„æ•°æ®æº</span><br><span class="line">vim application-druid.yml</span><br><span class="line">profile: /data/tmp</span><br><span class="line">port: 18081</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081632238.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># ä¸»åº“æ•°æ®æº</span><br><span class="line">master:</span><br><span class="line">url: jdbc:mysql://localhost:3306/ruoyi?useUnicode=true&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span><br><span class="line">username: root</span><br><span class="line">password: 123456</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081632012.png" alt="img"></p><h4 id="3ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…"><a href="#3ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…" class="headerlink" title="3ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…"></a>3ã€å°†é¡¹ç›®æ‰“æˆjaråŒ…</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /data/gitee/RuoYi/</span><br><span class="line">mvn install</span><br></pre></td></tr></table></figure><h4 id="4ã€å¯åŠ¨é¡¹ç›®"><a href="#4ã€å¯åŠ¨é¡¹ç›®" class="headerlink" title="4ã€å¯åŠ¨é¡¹ç›®"></a>4ã€å¯åŠ¨é¡¹ç›®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/app/ruoyi-admin</span><br><span class="line">cp /data/gitee/RuoYi/ruoyi-admin/target/ruoyi-admin.jar /data/app/ruoyi-admin/ruoyi-admin.jar</span><br><span class="line">cd /data/app/ruoyi-admin/</span><br><span class="line">#åå°å¯åŠ¨é¡¹ç›®</span><br><span class="line">nohup java -jar ruoyi-admin.jar &amp;</span><br><span class="line">#æŸ¥çœ‹é¡¹ç›®è¿è¡Œæ—¥å¿—</span><br><span class="line">tail -f nohup.out</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631236.png" alt="img"></p><h4 id="5ã€è®¿é—®é¡¹ç›®"><a href="#5ã€è®¿é—®é¡¹ç›®" class="headerlink" title="5ã€è®¿é—®é¡¹ç›®"></a>5ã€è®¿é—®é¡¹ç›®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://120.78.177.161:18081/</span><br></pre></td></tr></table></figure><p>å¦‚æœè®¿é—®ä¸æˆåŠŸï¼Œè¯·åœ¨æœåŠ¡å™¨çš„å®‰å…¨ç»„ä¸­å¼€å¯18081ç«¯å£ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631367.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081631755.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> æ‚è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaå¼€å‘ </tag>
            
            <tag> è‹¥ä¾ </tag>
            
            <tag> éƒ¨ç½² </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven</title>
      <link href="/article/7273cdc.html"/>
      <url>/article/7273cdc.html</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€ä»‹ç»"><a href="#1ã€ä»‹ç»" class="headerlink" title="1ã€ä»‹ç»"></a>1ã€ä»‹ç»</h2><h3 id="1-1ã€æ¦‚å¿µ"><a href="#1-1ã€æ¦‚å¿µ" class="headerlink" title="1.1ã€æ¦‚å¿µ"></a>1.1ã€æ¦‚å¿µ</h3><p>Maven æ˜¯ Apache ä¸‹çš„ä¸€ä¸ª<strong>çº¯ Java å¼€å‘çš„å¼€æºé¡¹ç›®</strong>ï¼Œæ˜¯ä¸€ä¸ª<strong>é¡¹ç›®æ„å»ºå’Œç®¡ç†çš„å·¥å…·</strong>ã€‚å°†é¡¹ç›®å¼€å‘å’Œç®¡ç†è¿‡ç¨‹æŠ½è±¡æˆä¸€ä¸ª**é¡¹ç›®å¯¹è±¡æ¨¡å‹(POM)**ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019714.png" alt="img"></p><h3 id="1-2ã€ä½œç”¨"><a href="#1-2ã€ä½œç”¨" class="headerlink" title="1.2ã€ä½œç”¨"></a>1.2ã€ä½œç”¨</h3><ul><li><p>é¡¹ç›®æ„å»ºï¼šæä¾›æ ‡å‡†çš„ã€è·¨å¹³å°çš„è‡ªåŠ¨åŒ–é¡¹ç›®æ„å»ºæ–¹å¼</p></li><li><p>ä¾èµ–ç®¡ç†ï¼šæ–¹ä¾¿å¿«æ·çš„ç®¡ç†é¡¹ç›®ä¾èµ–çš„èµ„æº(jaråŒ…)ï¼Œé¿å…èµ„æºé—´çš„ç‰ˆæœ¬å†²çªé—®é¢˜</p></li><li><p>ç»Ÿä¸€å¼€å‘ç»“æ„ï¼šæä¾›æ ‡å‡†çš„ã€ç»Ÿä¸€çš„é¡¹ç›®ç»“æ„</p></li></ul><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081020237.png" alt="img"></p><h2 id="2ã€ä¸‹è½½ä¸å®‰è£…"><a href="#2ã€ä¸‹è½½ä¸å®‰è£…" class="headerlink" title="2ã€ä¸‹è½½ä¸å®‰è£…"></a>2ã€ä¸‹è½½ä¸å®‰è£…</h2><h3 id="2-1ã€ä¸‹è½½"><a href="#2-1ã€ä¸‹è½½" class="headerlink" title="2.1ã€ä¸‹è½½"></a>2.1ã€<a href="https://maven.apache.org/download.cgi">ä¸‹è½½</a></h3><p>æˆ‘ä»¬å®‰è£…åœ¨æœ¬åœ°ï¼Œæ‰€ä»¥é€‰æ‹©windowsç‰ˆæœ¬ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019994.png" alt="img"></p><h3 id="2-2ã€è§£å‹"><a href="#2-2ã€è§£å‹" class="headerlink" title="2.2ã€è§£å‹"></a>2.2ã€è§£å‹</h3><p>å› ä¸ºmavenæ˜¯å…å®‰è£…ç»¿è‰²ç‰ˆæœ¬ï¼Œæ‰€ä»¥ç›´æ¥è§£å‹å³å¯ä½¿ç”¨ã€‚</p><p>å„ç›®å½•ç»“æ„è¯´æ˜ï¼š</p><ul><li><p>binï¼šå¯æ‰§è¡Œç¨‹åºç›®å½•</p></li><li><p>bootï¼šmavenè‡ªèº«çš„å¯åŠ¨åŠ è½½å™¨</p></li><li><p>confï¼šmavené…ç½®æ–‡ä»¶çš„å­˜æ”¾ç›®å½•</p></li><li><p>libï¼šmavenè¿è¡Œæ‰€éœ€åº“çš„å­˜æ”¾ç›®å½•</p></li></ul><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081020970.png" alt="img"></p><h3 id="2-3ã€é…ç½®ç¯å¢ƒå˜é‡"><a href="#2-3ã€é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="2.3ã€é…ç½®ç¯å¢ƒå˜é‡"></a>2.3ã€é…ç½®ç¯å¢ƒå˜é‡</h3><p>æ‰“å¼€windowsè®¾ç½®â€”â€”&gt;æœç´¢ç¯å¢ƒå˜é‡â€”â€”&gt;</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081020340.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019937.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019044.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081020242.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019285.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081020696.png" alt="img"></p><p>ä½¿ç”¨å‘½ä»¤ <code>mvn -version</code> æ¥æµ‹è¯•mavenæ˜¯å¦é…ç½®æˆåŠŸ</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019036.png" alt="img"></p><p>å‡ºç°ä¸Šå›¾å­—æ ·ï¼Œåˆ™è¡¨ç¤ºmavenå·²ç»å®‰è£…é…ç½®å®Œæ¯•ï¼æ’’èŠ±â€â€â€</p><h2 id="3ã€mavenåŸºç¡€æ¦‚å¿µ"><a href="#3ã€mavenåŸºç¡€æ¦‚å¿µ" class="headerlink" title="3ã€mavenåŸºç¡€æ¦‚å¿µ"></a>3ã€mavenåŸºç¡€æ¦‚å¿µ</h2><h3 id="3-1ã€ä»“åº“"><a href="#3-1ã€ä»“åº“" class="headerlink" title="3.1ã€ä»“åº“"></a>3.1ã€ä»“åº“</h3><p>ç”¨äºå­˜å‚¨èµ„æºï¼Œä¸»è¦æ˜¯å„ç§jaråŒ…ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019338.png" alt="img"></p><h4 id="3-1-1ã€ä»“åº“åˆ†ç±»"><a href="#3-1-1ã€ä»“åº“åˆ†ç±»" class="headerlink" title="3.1.1ã€ä»“åº“åˆ†ç±»"></a>3.1.1ã€ä»“åº“åˆ†ç±»</h4><ul><li><p>æœ¬åœ°ä»“åº“ï¼šè‡ªå·±ç”µè„‘ä¸Šå­˜å‚¨èµ„æºçš„ä»“åº“ï¼Œè¿æ¥è¿œç¨‹ä»“åº“è·å–èµ„æº</p></li><li><p>è¿œç¨‹ä»“åº“ï¼šéæœ¬æœºç”µè„‘ä¸Šçš„ä»“åº“ï¼Œä¸ºæœ¬åœ°ä»“åº“æä¾›èµ„æº</p></li><li><ul><li>ä¸­å¤®ä»“åº“ï¼šMavenå›¢é˜Ÿç»´æŠ¤ï¼Œå­˜å‚¨æ‰€æœ‰èµ„æºçš„ä»“åº“</li><li>ç§æœï¼šéƒ¨é—¨/å…¬å¸èŒƒå›´å†…å­˜å‚¨èµ„æºçš„ä»“åº“ï¼Œä»ä¸­å¤®ä»“åº“è·å–èµ„æº</li></ul></li></ul><h4 id="3-1-2ã€ç§æœçš„ä½œç”¨"><a href="#3-1-2ã€ç§æœçš„ä½œç”¨" class="headerlink" title="3.1.2ã€ç§æœçš„ä½œç”¨"></a>3.1.2ã€ç§æœçš„ä½œç”¨</h4><ul><li>ä¿å­˜å…·æœ‰ç‰ˆæƒçš„èµ„æºï¼ŒåŒ…å«è´­ä¹°æˆ–è‡ªä¸»ç ”å‘çš„jaråŒ…ï¼›ä¸­å¤®ä»“åº“ä¸­çš„jaråŒ…éƒ½æ˜¯å¼€æºçš„ï¼Œä¸èƒ½å­˜å‚¨å…·æœ‰ç‰ˆæƒçš„èµ„æº</li><li>ä¸€å®šèŒƒå›´å†…å…±äº«èµ„æºï¼Œä»…å¯¹å†…éƒ¨å¼€æ”¾ï¼Œä¸å¯¹å¤–å…±äº«</li></ul><h3 id="3-2ã€åæ ‡"><a href="#3-2ã€åæ ‡" class="headerlink" title="3.2ã€åæ ‡"></a>3.2ã€åæ ‡</h3><h4 id="3-2-1ã€ä»‹ç»"><a href="#3-2-1ã€ä»‹ç»" class="headerlink" title="3.2.1ã€ä»‹ç»"></a>3.2.1ã€ä»‹ç»</h4><p>mavenä¸­çš„åæ ‡ç”¨äºæè¿°ä»“åº“èµ„æºçš„ä½ç½®ã€‚</p><h4 id="3-2-2ã€ä¸»è¦ç»„æˆ"><a href="#3-2-2ã€ä¸»è¦ç»„æˆ" class="headerlink" title="3.2.2ã€ä¸»è¦ç»„æˆ"></a>3.2.2ã€ä¸»è¦ç»„æˆ</h4><ul><li><p>groupIdï¼šå®šä¹‰å½“å‰mavené¡¹ç›®éš¶å±ç»„ç»‡åç§°(é€šå¸¸æ˜¯åŸŸååå†™ï¼Œä¾‹å¦‚org.apache)</p></li><li><p>artifactIdï¼šå®šä¹‰å½“å‰mavené¡¹ç›®åç§°(é€šå¸¸æ˜¯æ¨¡æ¿åç§°ï¼Œä¾‹å¦‚CRMã€SMS)</p></li><li><p>versionï¼šå®šä¹‰å½“å‰é¡¹ç›®ç‰ˆæœ¬å·</p></li></ul><h4 id="3-2-3ã€ä½œç”¨"><a href="#3-2-3ã€ä½œç”¨" class="headerlink" title="3.2.3ã€ä½œç”¨"></a>3.2.3ã€ä½œç”¨</h4><p>ä½¿ç”¨å”¯ä¸€æ ‡è¯†ï¼Œå”¯ä¸€æ€§å®šä½èµ„æºä½ç½®ï¼Œé€šè¿‡è¯¥æ ‡è¯†å¯ä»¥å°†èµ„æºçš„è¯†åˆ«ä¸ä¸‹è½½å·¥ä½œäº¤ç”±æœºå™¨å®Œæˆã€‚</p><h3 id="3-3ã€ä»“åº“é…ç½®"><a href="#3-3ã€ä»“åº“é…ç½®" class="headerlink" title="3.3ã€ä»“åº“é…ç½®"></a>3.3ã€ä»“åº“é…ç½®</h3><h4 id="3-3-1ã€æœ¬åœ°ä»“åº“é…ç½®"><a href="#3-3-1ã€æœ¬åœ°ä»“åº“é…ç½®" class="headerlink" title="3.3.1ã€æœ¬åœ°ä»“åº“é…ç½®"></a>3.3.1ã€æœ¬åœ°ä»“åº“é…ç½®</h4><p>ä½¿ç”¨nodpad++æ‰“å¼€mavenè§£å‹ç›®å½•ä¸‹confæ–‡ä»¶å¤¹ä¸‹çš„ <code>settings.xml</code> æ–‡ä»¶ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081021939.png" alt="img"></p><p>æ‰“å¼€åï¼Œæ‰¾åˆ°ç¬¬52è¡Œï¼Œå¯ä»¥çœ‹åˆ°mavené»˜è®¤ä¸‹è½½çš„jaråŒ…æ”¾åœ¨ <code>$&#123;user.home&#125;/.m2/repository</code>ï¼Œå³ç”¨æˆ·ç›®å½•.m2\repositoryã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081021476.png" alt="img"></p><p>jaré»˜è®¤ä¸‹è½½ç›®å½•ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019661.png" alt="img"></p><p>å½“ç„¶å¦‚æœæƒ³ä¿®æ”¹jaråŒ…ä¸‹è½½çš„åœ°æ–¹(å³æœ¬åœ°ä»“åº“)ï¼Œåªéœ€ç…§ç€å¦‚ä¸‹ç¤ºä¾‹ä¿®æ”¹æˆè‡ªå·±çš„é…ç½®å³å¯ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019633.png" alt="img"></p><h4 id="3-3-2ã€è¿œç¨‹ä»“åº“é…ç½®"><a href="#3-3-2ã€è¿œç¨‹ä»“åº“é…ç½®" class="headerlink" title="3.3.2ã€è¿œç¨‹ä»“åº“é…ç½®"></a>3.3.2ã€è¿œç¨‹ä»“åº“é…ç½®</h4><p>mavené»˜è®¤è¿æ¥çš„è¿œç¨‹ä»“åº“ä½ç½®ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;repositories&gt;</span><br><span class="line">  &lt;repository&gt;</span><br><span class="line">    &lt;id&gt;central&lt;/id&gt;</span><br><span class="line">    &lt;name&gt;Central Repository&lt;/name&gt;</span><br><span class="line">    &lt;url&gt;https://repo.maven.apache.org/maven2&lt;/url&gt;</span><br><span class="line">    &lt;layout&gt;default&lt;/layout&gt;</span><br><span class="line">    &lt;snapshots&gt;</span><br><span class="line">    &lt;enabled&gt;false&lt;/enabled&gt;</span><br><span class="line">    &lt;/snapshots&gt;</span><br><span class="line">  &lt;/repository&gt;</span><br><span class="line">&lt;/repositories&gt;</span><br></pre></td></tr></table></figure><h4 id="3-3-3ã€é•œåƒä»“åº“é…ç½®-é…ç½®é˜¿é‡Œäº‘é•œåƒ"><a href="#3-3-3ã€é•œåƒä»“åº“é…ç½®-é…ç½®é˜¿é‡Œäº‘é•œåƒ" class="headerlink" title="3.3.3ã€é•œåƒä»“åº“é…ç½®(é…ç½®é˜¿é‡Œäº‘é•œåƒ)"></a>3.3.3ã€é•œåƒä»“åº“é…ç½®(<a href="https://developer.aliyun.com/mvn/guide">é…ç½®é˜¿é‡Œäº‘é•œåƒ</a>)</h4><p>åœ¨æ‰“å¼€çš„ <code>settings.xml</code> é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ° <code>&lt;mirrors&gt;&lt;/mirrors&gt;</code> æ ‡ç­¾ä¸­æ·»åŠ  <code>&lt;mirror&gt;&lt;/mirror&gt;</code> èŠ‚ç‚¹ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019636.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;mirror&gt;</span><br><span class="line">  &lt;!--æ­¤é•œåƒçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨æ¥åŒºåˆ†ä¸åŒçš„mirrorå…ƒç´ --&gt;</span><br><span class="line">  &lt;id&gt;aliyunmaven&lt;/id&gt;</span><br><span class="line">  &lt;!--å¯¹å“ªç§ä»“åº“è¿›è¡Œé•œåƒï¼Œç®€å•çš„è¯´å°±æ˜¯æ›¿ä»£å“ªä¸ªä»“åº“ --&gt;</span><br><span class="line">  &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">  &lt;!--é•œåƒåç§°--&gt;</span><br><span class="line">  &lt;name&gt;é˜¿é‡Œäº‘å…¬å…±ä»“åº“&lt;/name&gt;</span><br><span class="line">  &lt;!--é•œåƒURL--&gt;</span><br><span class="line">  &lt;url&gt;https://maven.aliyun.com/repository/public&lt;/url&gt;</span><br><span class="line">&lt;/mirror&gt;</span><br></pre></td></tr></table></figure><h2 id="4ã€mavené¡¹ç›®"><a href="#4ã€mavené¡¹ç›®" class="headerlink" title="4ã€mavené¡¹ç›®"></a>4ã€mavené¡¹ç›®</h2><h3 id="4-1ã€ideaçš„mavené…ç½®"><a href="#4-1ã€ideaçš„mavené…ç½®" class="headerlink" title="4.1ã€ideaçš„mavené…ç½®"></a>4.1ã€ideaçš„mavené…ç½®</h3><p>å½“å‰é¡¹ç›®çš„mavené…ç½®</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019671.png" alt="img"></p><p><strong>å½“åˆ›å»ºæ–°é¡¹ç›®æ—¶çš„mavené…ç½®</strong>ï¼š</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081021140.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019804.png" alt="img"></p><h3 id="4-2ã€mavené¡¹ç›®æ„å»ºå‘½ä»¤"><a href="#4-2ã€mavené¡¹ç›®æ„å»ºå‘½ä»¤" class="headerlink" title="4.2ã€mavené¡¹ç›®æ„å»ºå‘½ä»¤"></a>4.2ã€mavené¡¹ç›®æ„å»ºå‘½ä»¤</h3><p>mavenæ„å»ºå‘½ä»¤ä½¿ç”¨ <code>mvn</code> å¼€å¤´ï¼Œåé¢æ·»åŠ å‚æ•°ï¼Œå¯ä»¥ä¸€æ¬¡æ‰§è¡Œå¤šä¸ªå‘½ä»¤ï¼Œä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mvn compile #ç¼–è¯‘</span><br><span class="line">mvn clean #æ¸…ç†</span><br><span class="line">mvn test #æµ‹è¯•</span><br><span class="line">mvn package#æ‰“åŒ…</span><br><span class="line">mvn install #å®‰è£…åˆ°æœ¬åœ°ä»“åº“</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯ä½¿ç”¨ideaï¼Œåˆ™å¯ä»¥ä½¿ç”¨å›¾å½¢åŒ–ç•Œé¢å¿«æ·æ“ä½œã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081021556.png" alt="img"></p><h3 id="4-3ã€åˆ›å»ºç©ºçš„mavené¡¹ç›®"><a href="#4-3ã€åˆ›å»ºç©ºçš„mavené¡¹ç›®" class="headerlink" title="4.3ã€åˆ›å»ºç©ºçš„mavené¡¹ç›®"></a>4.3ã€åˆ›å»ºç©ºçš„mavené¡¹ç›®</h3><p>ä½¿ç”¨ideaåˆ›å»ºä¸€ä¸ªç©ºçš„mavené¡¹ç›®ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019008.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081021688.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081021321.png" alt="img"></p><p>æŸ¥çœ‹å½“å‰é¡¹ç›®çš„ç»“æ„ï¼Œä½¿ç”¨å¿«æ·é”® <code>ctrl+alt+shift+s</code> æˆ–è€…ä½¿ç”¨å¦‚ä¸‹æ“ä½œï¼š</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019466.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019737.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081021726.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081022677.png" alt="img"></p><h3 id="4-4ã€åˆ›å»ºmavençš„webé¡¹ç›®"><a href="#4-4ã€åˆ›å»ºmavençš„webé¡¹ç›®" class="headerlink" title="4.4ã€åˆ›å»ºmavençš„webé¡¹ç›®"></a>4.4ã€åˆ›å»ºmavençš„webé¡¹ç›®</h3><p>ä½¿ç”¨ideaåˆ›å»ºä¸€ä¸ªmavençš„webé¡¹ç›®ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019984.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019007.png" alt="img"></p><p>å¼€å§‹ä»é˜¿é‡Œäº‘ä»“åº“ä¸Šä¸‹è½½èµ„æºã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019069.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019599.png" alt="img"></p><p><strong>å®‰è£…tomcatæ’ä»¶</strong></p><p>åœ¨é¡¹ç›®çš„ <code>pom.xml</code> é…ç½®æ–‡ä»¶ä¸­å¼•å…¥</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">  &lt;plugins&gt;</span><br><span class="line">    &lt;plugin&gt;</span><br><span class="line">      &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;2.2&lt;/version&gt;</span><br><span class="line">      &lt;configuration&gt;</span><br><span class="line">        &lt;port&gt;80&lt;/port&gt;</span><br><span class="line">        &lt;path&gt;/&lt;/path&gt;</span><br><span class="line">      &lt;/configuration&gt;</span><br><span class="line">    &lt;/plugin&gt;</span><br><span class="line">  &lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019851.png" alt="img"></p><p>åŒå‡»è¿è¡Œ <code>tomcat7:run</code> å‘½ä»¤å¯åŠ¨webé¡¹ç›®ï¼š</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019545.png" alt="img"></p><p>è®¿é—®æœ¬åœ°80ç«¯å£ï¼Œå¯ä»¥çœ‹åˆ°è¿è¡Œç»“æœï¼š</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019300.png" alt="img"></p><h2 id="5ã€ä¾èµ–ç®¡ç†"><a href="#5ã€ä¾èµ–ç®¡ç†" class="headerlink" title="5ã€ä¾èµ–ç®¡ç†"></a>5ã€ä¾èµ–ç®¡ç†</h2><h3 id="5-1ã€ä¾èµ–é…ç½®"><a href="#5-1ã€ä¾èµ–é…ç½®" class="headerlink" title="5.1ã€ä¾èµ–é…ç½®"></a>5.1ã€ä¾èµ–é…ç½®</h3><ul><li>ä¾èµ–æŒ‡çš„æ˜¯å½“å‰é¡¹ç›®è¿è¡Œæ‰€éœ€è¦çš„jaråŒ…ï¼Œä¸€ä¸ªé¡¹ç›®å¯ä»¥è®¾ç½®å¤šä¸ªä¾èµ–ã€‚</li><li>æ ¼å¼ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--è®¾ç½®å½“å‰é¡¹ç›®æ‰€ä¾èµ–çš„æ‰€æœ‰jaråŒ…åæ ‡--&gt;</span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">  &lt;!--è®¾ç½®å…·ä½“çš„ä¾èµ–åæ ‡--&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;!--ä¾èµ–æ‰€å±çš„ç»„ç»‡Id--&gt;</span><br><span class="line">    &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">    &lt;!--ä¾èµ–æ‰€å±çš„é¡¹ç›®Id--&gt;</span><br><span class="line">    &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">    &lt;!--ä¾èµ–çš„ç‰ˆæœ¬å·--&gt;</span><br><span class="line">    &lt;version&gt;4.11&lt;/version&gt;</span><br><span class="line">  &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure><h3 id="5-2ã€ä¾èµ–ä¼ é€’é‡è¦"><a href="#5-2ã€ä¾èµ–ä¼ é€’é‡è¦" class="headerlink" title="5.2ã€ä¾èµ–ä¼ é€’é‡è¦"></a>5.2ã€ä¾èµ–ä¼ é€’é‡è¦</h3><ul><li><p>ä¾èµ–å…·æœ‰ä¼ é€’æ€§</p></li><li><ul><li>ç›´æ¥ä¾èµ–ï¼šåœ¨å½“å‰é¡¹ç›®ä¸­é€šè¿‡ä¾èµ–é…ç½®å»ºç«‹çš„ä¾èµ–å…³ç³»</li><li>é—´æ¥ä¾èµ–ï¼šè¢«ä¾èµ–çš„èµ„æºå¦‚æœä¾èµ–å…¶ä»–èµ„æºï¼Œå½“å‰é¡¹ç›®é—´æ¥ä¾èµ–å…¶ä»–èµ„æºï¼ˆæ¯”è¾ƒæ‹—å£ï¼Œæ„æ€å°±æ˜¯å¦‚æœAä¾èµ–Bï¼Œè€ŒBä¾èµ–Cï¼Œé‚£ä¹ˆAå°±é—´æ¥ä¾èµ–Cï¼‰</li></ul></li><li><p>ä¾èµ–ä¼ é€’å†²çªé—®é¢˜</p></li><li><ul><li>è·¯å¾„æœ€çŸ­è€…ä¼˜å…ˆåŸåˆ™ï¼šå½“ä¾èµ–ä¸­å‡ºç°ç›¸åŒçš„èµ„æºæ—¶ï¼Œå±‚çº§è¶Šæ·±ï¼Œä¼˜å…ˆçº§è¶Šä½ï¼Œå±‚çº§è¶Šæµ…ï¼Œä¼˜å…ˆçº§è¶Šé«˜</li><li>è·¯å¾„ç›¸åŒå…ˆå£°æ˜ä¼˜å…ˆåŸåˆ™ï¼šå½“èµ„æºåœ¨ç›¸åŒå±‚çº§è¢«ä¾èµ–æ—¶ï¼Œé…ç½®é¡ºåºé å‰çš„è¦†ç›–é…ç½®é¡ºåºé åçš„</li></ul></li><li><ul><li>ç‰¹æ®Šä¼˜å…ˆï¼šå½“åŒçº§é…ç½®äº†ç›¸åŒèµ„æºçš„ä¸åŒç‰ˆæœ¬ï¼Œåé…ç½®çš„è¦†ç›–å…ˆé…ç½®çš„ï¼ˆæ¦‚ç‡æ˜¯ä¹¦å†™é”™è¯¯ï¼Œä¸åº”è¯¥å‡ºç°è¿™ç§æƒ…å†µï¼‰</li></ul></li></ul><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019047.png" alt="img"></p><h3 id="5-3ã€å¯é€‰ä¾èµ–"><a href="#5-3ã€å¯é€‰ä¾èµ–" class="headerlink" title="5.3ã€å¯é€‰ä¾èµ–"></a>5.3ã€å¯é€‰ä¾èµ–</h3><p>å¯é€‰ä¾èµ–æŒ‡å¯¹å¤–éšè—å½“å‰æ‰€ä¾èµ–çš„èµ„æºâ€”ä¸é€æ˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;4.12&lt;/version&gt;</span><br><span class="line">  &lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="5-4ã€æ’é™¤ä¾èµ–é‡è¦"><a href="#5-4ã€æ’é™¤ä¾èµ–é‡è¦" class="headerlink" title="5.4ã€æ’é™¤ä¾èµ–é‡è¦"></a>5.4ã€æ’é™¤ä¾èµ–é‡è¦</h3><p>æ’é™¤ä¾èµ–æŒ‡ä¸»åŠ¨æ–­å¼€ä¾èµ–çš„èµ„æºï¼Œè¢«æ’é™¤çš„èµ„æºæ— éœ€æŒ‡å®šç‰ˆæœ¬â€”ä¸éœ€è¦ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;4.12&lt;/version&gt;</span><br><span class="line">  &lt;exclusions&gt;</span><br><span class="line">    &lt;exclusion&gt;</span><br><span class="line">      &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;</span><br><span class="line">    &lt;/exclusion&gt;</span><br><span class="line">  &lt;/exclusions&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="5-5ã€ä¾èµ–èŒƒå›´é‡è¦"><a href="#5-5ã€ä¾èµ–èŒƒå›´é‡è¦" class="headerlink" title="5.5ã€ä¾èµ–èŒƒå›´é‡è¦"></a>5.5ã€ä¾èµ–èŒƒå›´é‡è¦</h3><p>ä¾èµ–çš„jaråŒ…é»˜è®¤æƒ…å†µä¸‹å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡scopeæ ‡ç­¾è®¾å®šå…¶ä½œç”¨èŒƒå›´</p><p>ä½œç”¨èŒƒå›´ï¼š</p><ul><li><p>ä¸»ç¨‹    åºèŒƒå›´æœ‰æ•ˆï¼ˆmainæ–‡ä»¶å¤¹èŒƒå›´å†…ï¼‰</p></li><li><p>æµ‹è¯•ç¨‹åºèŒƒå›´æœ‰æ•ˆï¼ˆtestæ–‡ä»¶å¤¹èŒƒå›´å†…ï¼‰</p></li><li><p>æ˜¯å¦å‚ä¸æ‰“åŒ…ï¼ˆpackageæŒ‡ä»¤èŒƒå›´å†…ï¼‰</p></li></ul><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081022198.png" alt="img"></p><h3 id="5-6ã€ä¾èµ–èŒƒå›´ä¼ é€’æ€§ï¼ˆäº†è§£ï¼‰"><a href="#5-6ã€ä¾èµ–èŒƒå›´ä¼ é€’æ€§ï¼ˆäº†è§£ï¼‰" class="headerlink" title="5.6ã€ä¾èµ–èŒƒå›´ä¼ é€’æ€§ï¼ˆäº†è§£ï¼‰"></a>5.6ã€ä¾èµ–èŒƒå›´ä¼ é€’æ€§ï¼ˆäº†è§£ï¼‰</h3><p>å¸¦æœ‰ä¾èµ–èŒƒå›´çš„èµ„æºåœ¨è¿›è¡Œä¼ é€’æ—¶ï¼Œä½œç”¨èŒƒå›´å°†å—åˆ°å½±å“ã€‚å…·ä½“çœ‹ä½¿ç”¨æ•ˆæœã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019433.png" alt="img"></p><h2 id="6ã€ç”Ÿå‘½å‘¨æœŸä¸æ’ä»¶"><a href="#6ã€ç”Ÿå‘½å‘¨æœŸä¸æ’ä»¶" class="headerlink" title="6ã€ç”Ÿå‘½å‘¨æœŸä¸æ’ä»¶"></a>6ã€ç”Ÿå‘½å‘¨æœŸä¸æ’ä»¶</h2><h3 id="6-1ã€é¡¹ç›®æ„å»ºç”Ÿå‘½å‘¨æœŸ"><a href="#6-1ã€é¡¹ç›®æ„å»ºç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="6.1ã€é¡¹ç›®æ„å»ºç”Ÿå‘½å‘¨æœŸ"></a>6.1ã€é¡¹ç›®æ„å»ºç”Ÿå‘½å‘¨æœŸ</h3><h4 id="6-1-1ã€ä»‹ç»"><a href="#6-1-1ã€ä»‹ç»" class="headerlink" title="6.1.1ã€ä»‹ç»"></a>6.1.1ã€ä»‹ç»</h4><p>mavenæ„å»ºç”Ÿå‘½å‘¨æœŸæè¿°çš„æ˜¯ä¸€æ¬¡æ„å»ºè¿‡ç¨‹ç»å†äº†å¤šå°‘ä¸ªäº‹ä»¶</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081022174.png" alt="img"></p><h4 id="6-1-2ã€3ä¸ªé˜¶æ®µ"><a href="#6-1-2ã€3ä¸ªé˜¶æ®µ" class="headerlink" title="6.1.2ã€3ä¸ªé˜¶æ®µ"></a>6.1.2ã€3ä¸ªé˜¶æ®µ</h4><p>mavenå¯¹é¡¹ç›®æ„å»ºçš„ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†ä¸º3ä¸ªé˜¶æ®µã€‚</p><h5 id="6-1-2-1ã€cleanç”Ÿå‘½å‘¨æœŸ"><a href="#6-1-2-1ã€cleanç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="6.1.2.1ã€cleanç”Ÿå‘½å‘¨æœŸ"></a>6.1.2.1ã€cleanç”Ÿå‘½å‘¨æœŸ</h5><ol><li><p>pre-cleanï¼šæ‰§è¡Œä¸€äº›éœ€è¦åœ¨cleanä¹‹å‰å®Œæˆçš„å·¥ä½œ</p></li><li><p>cleanï¼šç§»é™¤æ‰€æœ‰ä¸Šä¸€æ¬¡æ„å»ºç”Ÿæˆçš„æ–‡ä»¶</p></li><li><p>post-cleanï¼šæ‰§è¡Œä¸€äº›éœ€è¦åœ¨cleanä¹‹åç«‹åˆ»å®Œæˆçš„å·¥ä½œ</p></li></ol><h5 id="6-1-2-2ã€defaultæ„å»ºç”Ÿå‘½å‘¨æœŸ"><a href="#6-1-2-2ã€defaultæ„å»ºç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="6.1.2.2ã€defaultæ„å»ºç”Ÿå‘½å‘¨æœŸ"></a>6.1.2.2ã€defaultæ„å»ºç”Ÿå‘½å‘¨æœŸ</h5><p>æ ¸å¿ƒå·¥ä½œæ˜¯ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€å®‰è£…ã€éƒ¨ç½²ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019109.png" alt="img"></p><p><strong>åœ¨æ‰§è¡ŒæŸä¸€ä¸ªæ“ä½œæ—¶ï¼ŒåŒæ—¶ä¼šæ‰§è¡Œè¯¥æ“ä½œå‰é¢çš„æ‰€æœ‰æ“ä½œ</strong>ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081022579.png" alt="img"></p><h5 id="6-1-2-3ã€siteæ„å»ºç”Ÿå‘½å‘¨æœŸ"><a href="#6-1-2-3ã€siteæ„å»ºç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="6.1.2.3ã€siteæ„å»ºç”Ÿå‘½å‘¨æœŸ"></a>6.1.2.3ã€siteæ„å»ºç”Ÿå‘½å‘¨æœŸ</h5><ol><li><p>pre-siteï¼šæ‰§è¡Œä¸€äº›éœ€è¦åœ¨ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ä¹‹å‰å®Œæˆçš„å·¥ä½œ</p></li><li><p>siteï¼šç”Ÿæˆé¡¹ç›®çš„ç«™ç‚¹æ–‡æ¡£</p></li><li><p>post-siteï¼šæ‰§è¡Œä¸€äº›éœ€è¦åœ¨ç”Ÿæˆç«™ç‚¹æ–‡æ¡£ä¹‹åå®Œæˆçš„å·¥ä½œï¼Œå¹¶ä¸”ä¸ºéƒ¨ç½²åšå‡†å¤‡</p></li><li><p>site-deployï¼šå°†ç”Ÿæˆçš„ç«™ç‚¹æ–‡æ¡£éƒ¨ç½²åˆ°ç‰¹å®šçš„æœåŠ¡å™¨ä¸Š</p></li></ol><h3 id="6-2ã€æ’ä»¶é‡è¦"><a href="#6-2ã€æ’ä»¶é‡è¦" class="headerlink" title="6.2ã€æ’ä»¶é‡è¦"></a>6.2ã€æ’ä»¶é‡è¦</h3><ul><li><p>æ’ä»¶ä¸ç”Ÿå‘½å‘¨æœŸå†…çš„é˜¶æ®µç»‘å®šï¼Œåœ¨æ‰§è¡Œåˆ°å¯¹åº”ç”Ÿå‘½å‘¨æœŸæ—¶æ‰§è¡Œå¯¹åº”çš„æ’ä»¶åŠŸèƒ½</p></li><li><p>é»˜è®¤mavenåœ¨å„ä¸ªç”Ÿå‘½å‘¨æœŸä¸Šç»‘å®šæœ‰é¢„è®¾çš„åŠŸèƒ½</p></li><li><p>é€šè¿‡æ’ä»¶å¯ä»¥è‡ªå®šä¹‰å…¶ä»–åŠŸèƒ½</p></li></ul><p>ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦å°†ä»»ä½•æ’ä»¶ç›®æ ‡ç»‘å®šåˆ°ä»»ä½•ç”Ÿå‘½å‘¨æœŸçš„ä»»ä½•é˜¶æ®µï¼Œå¦‚é…ç½®åœ¨ <code>generate-test-resources</code> <strong>ç”Ÿæˆæµ‹è¯•èµ„æºæ–‡ä»¶é˜¶æ®µ</strong>çš„æ—¶å€™ä½¿ç”¨ <code>maven-source-plugin</code> æ’ä»¶å°†mainæ–‡ä»¶å¤¹è¿›è¡Œæºç æ‰“åŒ…ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;build&gt; </span><br><span class="line">  &lt;plugins&gt;</span><br><span class="line">&lt;plugin&gt; </span><br><span class="line">      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; </span><br><span class="line">      &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt; </span><br><span class="line">      &lt;version&gt;2.2.1&lt;/version&gt;</span><br><span class="line">      &lt;executions&gt;</span><br><span class="line">        &lt;execution&gt; </span><br><span class="line">            &lt;goals&gt;</span><br><span class="line">              &lt;goal&gt;jar&lt;/goal&gt; </span><br><span class="line">            &lt;/goals&gt;</span><br><span class="line">            &lt;phase&gt;generate-test-resources&lt;/phase&gt; </span><br><span class="line">         &lt;/execution&gt;</span><br><span class="line">&lt;/executions&gt; </span><br><span class="line">    &lt;/plugin&gt;</span><br><span class="line">&lt;/plugins&gt; </span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure><h2 id="7ã€èšåˆé‡è¦"><a href="#7ã€èšåˆé‡è¦" class="headerlink" title="7ã€èšåˆé‡è¦"></a>7ã€èšåˆé‡è¦</h2><h3 id="7-1ã€ä½œç”¨"><a href="#7-1ã€ä½œç”¨" class="headerlink" title="7.1ã€ä½œç”¨"></a>7.1ã€ä½œç”¨</h3><p>ç”¨äºå¿«é€Ÿæ„å»ºmavenå·¥ç¨‹ï¼Œä¸€æ¬¡æ€§æ„å»ºå¤šä¸ªé¡¹ç›®/æ¨¡å—ã€‚å³ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€éƒ¨ç½²è¯¥æ¨¡å—çš„æ—¶å€™ä¼šåŒæ—¶æ“ä½œå…³è”çš„æ¨¡å—ã€‚</p><h3 id="7-2ã€åˆ¶ä½œæ–¹å¼"><a href="#7-2ã€åˆ¶ä½œæ–¹å¼" class="headerlink" title="7.2ã€åˆ¶ä½œæ–¹å¼"></a>7.2ã€åˆ¶ä½œæ–¹å¼</h3><ol><li>åˆ›å»ºä¸€ä¸ªç©ºæ¨¡å—ï¼Œæ‰“åŒ…ç±»å‹å®šä¹‰ä¸ºpom</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;packaging&gt;pom&lt;/packaging&gt;</span><br></pre></td></tr></table></figure><ol><li>å®šä¹‰å½“å‰æ¨¡å—è¿›è¡Œæ„å»ºæ“ä½œæ—¶å…³è”çš„å…¶ä»–æ¨¡å—åç§°ï¼Œæ³¨æ„ï¼Œ<code>module</code>å†…çš„å€¼ä¸ºå…³è”æ¨¡å—çš„pomæ–‡ä»¶ç›¸å¯¹äºå½“å‰pomæ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹ç›®å½•ã€‚</li></ol><p>å¦‚ä¸‹ç¤ºä¾‹å°±æ˜¯å…³è”æ¨¡å—ä¸å½“å‰æ¨¡å—å¹³çº§ï¼Œå¦‚æœå…³è”æ¨¡å—ä½äºå½“å‰æ¨¡å—æ–‡ä»¶å¤¹å†…ï¼Œåˆ™æ²¡æœ‰<code>../</code>ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--å½“å‰çˆ¶æ¨¡å—æœ‰å“ªäº›å­æ¨¡å—--&gt;</span><br><span class="line">&lt;modules&gt; </span><br><span class="line">  &lt;module&gt;../ssm_controller&lt;/module&gt; </span><br><span class="line">  &lt;module&gt;../ssm_service&lt;/module&gt; </span><br><span class="line">  &lt;module&gt;../ssm_dao&lt;/module&gt; </span><br><span class="line">  &lt;module&gt;../ssm_pojo&lt;/module&gt;</span><br><span class="line">&lt;/modules&gt;</span><br></pre></td></tr></table></figure><p>æ³¨æ„äº‹é¡¹ï¼šå‚ä¸èšåˆæ“ä½œçš„æ¨¡å—æœ€ç»ˆæ‰§è¡Œé¡ºåºä¸æ¨¡å—é—´çš„ä¾èµ–æœ‰å…³ï¼Œä¸é…ç½®é¡ºåºæ— å…³ã€‚</p><h2 id="8ã€ç»§æ‰¿é‡è¦"><a href="#8ã€ç»§æ‰¿é‡è¦" class="headerlink" title="8ã€ç»§æ‰¿é‡è¦"></a>8ã€ç»§æ‰¿é‡è¦</h2><h3 id="8-1ã€ä½œç”¨"><a href="#8-1ã€ä½œç”¨" class="headerlink" title="8.1ã€ä½œç”¨"></a>8.1ã€ä½œç”¨</h3><p>é€šè¿‡ç»§æ‰¿å¯ä»¥å®ç°åœ¨å­æ¨¡å—ä¸­æ²¿ç”¨çˆ¶æ¨¡å—ä¸­çš„é…ç½®ã€‚</p><h3 id="8-2ã€åˆ¶ä½œæ–¹å¼"><a href="#8-2ã€åˆ¶ä½œæ–¹å¼" class="headerlink" title="8.2ã€åˆ¶ä½œæ–¹å¼"></a>8.2ã€åˆ¶ä½œæ–¹å¼</h3><p>åœ¨å­æ¨¡å—ä¸­å£°æ˜å…¶çˆ¶æ¨¡å—åæ ‡ä¸pomæ–‡ä»¶çš„ä½ç½®ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å®šä¹‰è¯¥æ¨¡å—çš„çˆ¶æ¨¡å— --&gt; </span><br><span class="line">&lt;parent&gt; </span><br><span class="line">  &lt;groupId&gt;com.itheima&lt;/groupId&gt; </span><br><span class="line">  &lt;artifactId&gt;ssm&lt;/artifactId&gt; </span><br><span class="line">  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</span><br><span class="line">&lt;!-- å¡«å†™çˆ¶æ¨¡å—çš„pomæ–‡ä»¶æ‰€åœ¨ä½ç½® --&gt; </span><br><span class="line">  &lt;relativePath&gt;../ssm/pom.xml&lt;/relativePath&gt;</span><br><span class="line">&lt;/parent&gt;</span><br></pre></td></tr></table></figure><h3 id="8-3ã€ä¾èµ–ç»§æ‰¿"><a href="#8-3ã€ä¾èµ–ç»§æ‰¿" class="headerlink" title="8.3ã€ä¾èµ–ç»§æ‰¿"></a>8.3ã€ä¾èµ–ç»§æ‰¿</h3><p><strong>å­æ¨¡å—å°†è‡ªåŠ¨ç»§æ‰¿çˆ¶æ¨¡å—ä¸­çš„ä¾èµ–</strong>ã€‚</p><p>çˆ¶æ¨¡å—<code>maven-java</code>ä¸­å¼•å…¥ <code>spring-boot-starter</code> ä¾èµ–ï¼Œå­æ¨¡å— <code>maven-java-001</code>å’Œ<code>maven-java-002</code>å°†è‡ªåŠ¨ç»§æ‰¿çˆ¶æ¨¡å—<code>maven-java</code>ä¸­ <code>spring-boot-starter</code> çš„ä¾èµ–ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;groupId&gt;org.xiaorang&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;maven-java&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;</span><br><span class="line"></span><br><span class="line">&lt;modules&gt;</span><br><span class="line">  &lt;module&gt;maven-java-001&lt;/module&gt;</span><br><span class="line">  &lt;module&gt;maven-java-002&lt;/module&gt;</span><br><span class="line">&lt;/modules&gt;</span><br><span class="line"></span><br><span class="line">&lt;packaging&gt;pom&lt;/packaging&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--è‡ªå®šä¹‰å±æ€§åˆ—è¡¨--&gt;</span><br><span class="line">&lt;properties&gt;</span><br><span class="line">  &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;</span><br><span class="line">  &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;</span><br><span class="line">&lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--åœ¨è¯¥æ ‡ç­¾ä¸­ç¼–å†™çš„ä¾èµ–ï¼Œå­æ¨¡å—ä¼šè‡ªåŠ¨ç»§æ‰¿--&gt;</span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.5.3&lt;/version&gt;</span><br><span class="line">  &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019551.png" alt="img"></p><h3 id="8-4ã€ä¾èµ–ç®¡ç†"><a href="#8-4ã€ä¾èµ–ç®¡ç†" class="headerlink" title="8.4ã€ä¾èµ–ç®¡ç†"></a>8.4ã€ä¾èµ–ç®¡ç†</h3><p><strong>åœ¨çˆ¶æ¨¡å—ä¸­è¿›è¡Œä¾èµ–ç®¡ç†</strong>ï¼Œ<strong>å­æ¨¡å—ä¸­éœ€è¦å£°æ˜å¼çš„å¼•å…¥ä¾èµ–</strong>ï¼Œä½†æ˜¯<strong>æ— éœ€å£°æ˜ä¾èµ–ç‰ˆæœ¬</strong>ï¼Œ<strong>ç‰ˆæœ¬å°†ä½¿ç”¨çˆ¶æ¨¡å—ä¾èµ–ç®¡ç†ä¸­ä¾èµ–çš„ç‰ˆæœ¬å·</strong>ï¼Œè¾¾åˆ°ç”±çˆ¶æ¨¡å—ç»Ÿä¸€æ§åˆ¶ä¾èµ–çš„ç‰ˆæœ¬å·ã€‚</p><p>åœ¨çˆ¶æ¨¡å—ä¸­è¿›è¡Œä¾èµ–ç®¡ç†ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--åœ¨è¯¥æ ‡ç­¾ä¸­å£°æ˜çš„ä¾èµ–ï¼Œå­æ¨¡å—å¯ä»¥é€‰æ‹©æ€§çš„ç»§æ‰¿ï¼ŒåŒæ—¶çœç•¥ç‰ˆæœ¬å·--&gt;</span><br><span class="line">&lt;dependencyManagement&gt;</span><br><span class="line">  &lt;!--å…·ä½“çš„ä¾èµ–--&gt;</span><br><span class="line">  &lt;dependencies&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;spring-context&lt;/artifactId&gt;</span><br><span class="line">      &lt;version&gt;5.1.9.RELEASE&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">  &lt;/dependencies&gt;</span><br><span class="line">&lt;/dependencyManagement&gt;</span><br></pre></td></tr></table></figure><p>åœ¨å­æ¨¡å—ä¸­å£°æ˜å¼å¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">  &lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;</span><br><span class="line">  &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure><h2 id="9ã€èšåˆä¸ç»§æ‰¿çš„å¼‚åŒç‚¹"><a href="#9ã€èšåˆä¸ç»§æ‰¿çš„å¼‚åŒç‚¹" class="headerlink" title="9ã€èšåˆä¸ç»§æ‰¿çš„å¼‚åŒç‚¹"></a>9ã€èšåˆä¸ç»§æ‰¿çš„å¼‚åŒç‚¹</h2><ol><li><p>ä½œç”¨ï¼š</p></li><li><ol><li>èšåˆç”¨äºå¿«é€Ÿæ„å»ºé¡¹ç›®</li><li>ç»§æ‰¿ç”¨äºå¿«é€Ÿé…ç½®</li></ol></li><li><p>ç›¸åŒç‚¹ï¼š</p></li><li><ol><li>èšåˆä¸ç»§æ‰¿çš„pom.xmlæ–‡ä»¶æ‰“åŒ…æ–¹å¼å‡ä¸ºpomï¼Œå¯ä»¥å°†ä¸¤ç§å…³ç³»åˆ¶ä½œåˆ°åŒä¸€pomæ–‡ä»¶ä¸­</li><li>èšåˆä¸ç»§æ‰¿å‡å±äºè®¾è®¡å‹æ¨¡å—ï¼Œå¹¶æ— å®é™…çš„æ¨¡å—å†…å®¹</li></ol></li><li><p>ä¸åŒç‚¹ï¼š</p></li><li><ol><li>èšåˆæ—¶åœ¨å½“å‰æ¨¡å—ä¸­é…ç½®å…³ç³»ï¼Œèšåˆå¯ä»¥æ„ŸçŸ¥åˆ°å‚ä¸èšåˆçš„æ¨¡å—æœ‰å“ªäº›</li><li>ç»§æ‰¿æ˜¯åœ¨å­æ¨¡å—ä¸­é…ç½®å…³ç³»ï¼Œçˆ¶æ¨¡å—æ— æ³•æ„ŸçŸ¥å“ªäº›å­æ¨¡å—ç»§æ‰¿äº†è‡ªå·±</li></ol></li></ol><h2 id="10ã€å±æ€§é‡è¦"><a href="#10ã€å±æ€§é‡è¦" class="headerlink" title="10ã€å±æ€§é‡è¦"></a>10ã€å±æ€§é‡è¦</h2><p>é—®é¢˜ï¼šå¦‚æœå¯¹äºspringçš„èµ„æºç‰ˆæœ¬éƒ½åº”è¯¥ä½¿ç”¨<code>5.1.9.RELEASE</code>ç‰ˆæœ¬ï¼Œä½†æ˜¯ä½ å…¶ä¸­ä¸€ä¸ªèµ„æºå†™é”™äº†ï¼Œå†™çš„ä¸æ˜¯è¿™ä¸ªç‰ˆæœ¬å·æˆ–è€…è¯´æƒ³å°†springçš„èµ„æºç‰ˆæœ¬éƒ½å‡çº§åˆ°<code>5.2.0.RELEASE</code>ç‰ˆæœ¬ï¼Œè¿™ä¸ªæ—¶å€™ä½ æ˜¯ä¸æ˜¯éœ€è¦å°†æ‰€æœ‰çš„springèµ„æºçš„ç‰ˆæœ¬å·éƒ½æ”¹æˆ<code>5.2.0.RELEASE</code>ç‰ˆæœ¬ã€‚</p><p>æ–¹æ¡ˆï¼š<strong>å±æ€§</strong></p><h3 id="10-1ã€è‡ªå®šä¹‰å±æ€§"><a href="#10-1ã€è‡ªå®šä¹‰å±æ€§" class="headerlink" title="10.1ã€è‡ªå®šä¹‰å±æ€§"></a>10.1ã€è‡ªå®šä¹‰å±æ€§</h3><ol><li>ä½œç”¨ï¼šç­‰åŒäºå®šä¹‰å˜é‡ï¼Œæ–¹ä¾¿ç»Ÿä¸€ç»´æŠ¤ç‰ˆæœ¬å·ã€‚</li><li>å®šä¹‰æ ¼å¼ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--å®šä¹‰è‡ªå®šä¹‰å±æ€§--&gt; </span><br><span class="line">&lt;properties&gt; </span><br><span class="line">  &lt;spring.version&gt;5.1.9.RELEASE&lt;/spring.version&gt; </span><br><span class="line">  &lt;junit.version&gt;4.12&lt;/junit.version&gt;</span><br><span class="line">&lt;/properties&gt;</span><br></pre></td></tr></table></figure><ol><li>è°ƒç”¨æ ¼å¼ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt; </span><br><span class="line">  &lt;groupId&gt;org.springframework&lt;/groupId&gt; </span><br><span class="line">  &lt;artifactId&gt;spring-context&lt;/artifactId&gt; </span><br><span class="line">  &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="10-2ã€å†…ç½®å±æ€§"><a href="#10-2ã€å†…ç½®å±æ€§" class="headerlink" title="10.2ã€å†…ç½®å±æ€§"></a>10.2ã€å†…ç½®å±æ€§</h3><ol><li>ä½œç”¨ï¼šä½¿ç”¨mavenå†…ç½®å±æ€§ï¼Œå¿«é€Ÿé…ç½®ã€‚</li><li>è°ƒç”¨æ ¼å¼ï¼š<code>$&#123;basedir&#125; $&#123;version&#125;</code></li></ol><h3 id="10-3ã€Settingå±æ€§"><a href="#10-3ã€Settingå±æ€§" class="headerlink" title="10.3ã€Settingå±æ€§"></a>10.3ã€Settingå±æ€§</h3><ol><li>ä½œç”¨ï¼šä½¿ç”¨mavené…ç½®æ–‡ä»¶<code>setting.xml</code>ä¸­çš„æ ‡ç­¾å±æ€§ï¼Œç”¨äºåŠ¨æ€é…ç½®ã€‚</li><li>è°ƒç”¨æ ¼å¼ï¼š<code>$&#123;settings.localRepository</code></li></ol><h3 id="10-4ã€Javaç³»ç»Ÿå±æ€§"><a href="#10-4ã€Javaç³»ç»Ÿå±æ€§" class="headerlink" title="10.4ã€Javaç³»ç»Ÿå±æ€§"></a>10.4ã€Javaç³»ç»Ÿå±æ€§</h3><ol><li><p>ä½œç”¨ï¼šè¯»å–Javaç³»ç»Ÿå±æ€§</p></li><li><p>è°ƒç”¨æ ¼å¼ï¼š<code>$&#123;user.home&#125;</code></p></li><li><p>ç³»ç»Ÿå±æ€§æŸ¥è¯¢æ–¹å¼ï¼š<code>mvn help:system</code></p></li></ol><h3 id="10-5ã€ç¯å¢ƒå˜é‡å±æ€§"><a href="#10-5ã€ç¯å¢ƒå˜é‡å±æ€§" class="headerlink" title="10.5ã€ç¯å¢ƒå˜é‡å±æ€§"></a>10.5ã€ç¯å¢ƒå˜é‡å±æ€§</h3><ol><li><p>ä½œç”¨ï¼šä½¿ç”¨mavené…ç½®æ–‡ä»¶<code>setting.xml</code>ä¸­çš„æ ‡ç­¾å±æ€§ï¼Œç”¨äºåŠ¨æ€é…ç½®</p></li><li><p>è°ƒç”¨æ ¼å¼ï¼š<code>$&#123;env.JAVA_HOME&#125;</code></p></li><li><p>ç¯å¢ƒå˜é‡å±æ€§æŸ¥è¯¢æ–¹å¼ï¼š<code>mvn help:system</code></p></li></ol><h2 id="11ã€ç‰ˆæœ¬ç®¡ç†"><a href="#11ã€ç‰ˆæœ¬ç®¡ç†" class="headerlink" title="11ã€ç‰ˆæœ¬ç®¡ç†"></a>11ã€ç‰ˆæœ¬ç®¡ç†</h2><h3 id="11-1ã€å·¥ç¨‹ç‰ˆæœ¬"><a href="#11-1ã€å·¥ç¨‹ç‰ˆæœ¬" class="headerlink" title="11.1ã€å·¥ç¨‹ç‰ˆæœ¬"></a>11.1ã€å·¥ç¨‹ç‰ˆæœ¬</h3><ol><li><p>SNAPSHOT(å¿«ç…§ç‰ˆæœ¬)</p></li><li><ol><li>é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸ºæ–¹ä¾¿å›¢é˜Ÿæˆå‘˜åˆä½œï¼Œè§£å†³æ¨¡å—é—´ç›¸äº’ä¾èµ–å’Œæ—¶æ—¶æ›´æ–°çš„é—®é¢˜ï¼Œå¼€å‘è€…å¯¹æ¯ä¸ªæ¨¡å—è¿›è¡Œæ„å»ºçš„æ—¶å€™ï¼Œè¾“å‡ºçš„ä¸´æ—¶æ€§ç‰ˆæœ¬å°±å«å¿«ç…§ç‰ˆæœ¬ï¼ˆæµ‹è¯•é˜¶æ®µç‰ˆæœ¬ï¼‰</li><li>å¿«ç…§ç‰ˆæœ¬ä¼šéšç€å¼€å‘çš„è¿›å±•ä¸æ–­æ›´æ–°</li></ol></li><li><p>RELEASE(å‘å¸ƒç‰ˆæœ¬)</p></li><li><ol><li>é¡¹ç›®å¼€å‘è¿›å…¥é˜¶æ®µé‡Œç¨‹ç¢‘åï¼Œå‘å›¢é˜Ÿå¤–éƒ¨å‘å¸ƒè¾ƒä¸ºç¨³å®šçš„ç‰ˆæœ¬ï¼Œè¿™ç§ç‰ˆæœ¬å¯¹åº”çš„æ„ä»¶æ–‡ä»¶æ˜¯ç¨³å®šçš„ï¼Œå³ä¾¿è¿›è¡ŒåŠŸèƒ½çš„åç»­å¼€å‘ï¼Œä¹Ÿä¸ä¼šæ”¹å˜å½“å‰å‘å¸ƒç‰ˆæœ¬å†…å®¹ï¼Œè¿™ç§ç‰ˆæœ¬æˆä¸ºå‘å¸ƒç‰ˆæœ¬</li></ol></li></ol><h3 id="11-2ã€å·¥ç¨‹ç‰ˆæœ¬å·çº¦å®š"><a href="#11-2ã€å·¥ç¨‹ç‰ˆæœ¬å·çº¦å®š" class="headerlink" title="11.2ã€å·¥ç¨‹ç‰ˆæœ¬å·çº¦å®š"></a>11.2ã€å·¥ç¨‹ç‰ˆæœ¬å·çº¦å®š</h3><p>çº¦å®šè§„èŒƒï¼š</p><ul><li><p>&lt;ä¸»ç‰ˆæœ¬&gt;.&lt;æ¬¡ç‰ˆæœ¬&gt;.&lt;å¢é‡ç‰ˆæœ¬&gt;.&lt;é‡Œç¨‹ç¢‘ç‰ˆæœ¬&gt;</p></li><li><p>ä¸»ç‰ˆæœ¬ï¼šè¡¨ç¤ºé¡¹ç›®é‡å¤§æ¶æ„çš„å˜æ›´ï¼Œå¦‚Spring5ç›¸è¾ƒäºSpring4çš„è¿­ä»£</p></li><li><p>æ¬¡ç‰ˆæœ¬ï¼šè¡¨ç¤ºæœ‰è¾ƒå¤§çš„åŠŸèƒ½å¢åŠ å’Œå˜åŒ–ï¼Œæˆ–è€…å…¨é¢ç³»ç»Ÿçš„ä¿®å¤æ¼æ´</p></li><li><p>å¢é‡ç‰ˆæœ¬ï¼šè¡¨ç¤ºæœ‰é‡å¤§æ¼æ´çš„ä¿®å¤</p></li><li><p>é‡Œç¨‹ç¢‘ç‰ˆæœ¬ï¼šè¡¨æ˜ä¸€ä¸ªç‰ˆæœ¬çš„é‡Œç¨‹ç¢‘ï¼ˆç‰ˆæœ¬å†…éƒ¨ï¼‰ã€‚è¿™æ ·çš„ç‰ˆæœ¬åŒä¸‹ä¸€ä¸ªæ­£å¼ç‰ˆæœ¬ç›¸æ¯”ï¼Œç›¸å¯¹æ¥è¯´ä¸æ˜¯å¾ˆç¨³å®šï¼Œæœ‰å¾…æ›´å¤šçš„æµ‹è¯•</p></li></ul><h2 id="12ã€èµ„æºé…ç½®"><a href="#12ã€èµ„æºé…ç½®" class="headerlink" title="12ã€èµ„æºé…ç½®"></a>12ã€èµ„æºé…ç½®</h2><ol><li><p>ä½œç”¨ï¼šåœ¨ä»»æ„é…ç½®æ–‡ä»¶å¼•ç”¨pomæ–‡ä»¶ä¸­å®šä¹‰çš„å±æ€§ã€‚</p></li><li><p>è°ƒç”¨æ ¼å¼ï¼š<code>$&#123;å±æ€§å&#125;</code></p></li><li><p>å¦‚ä½•å¼€å¯é…ç½®æ–‡ä»¶å¯ä»¥åŠ è½½pomæ–‡ä»¶ä¸­å®šä¹‰çš„å±æ€§ï¼š</p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--é…ç½®èµ„æºæ–‡ä»¶å¯¹åº”çš„ä¿¡æ¯--&gt;</span><br><span class="line">&lt;resources&gt;</span><br><span class="line">  &lt;resource&gt;</span><br><span class="line">    &lt;!--è®¾å®šé…ç½®æ–‡ä»¶å¯¹åº”çš„ä½ç½®ç›®å½•ï¼Œæ”¯æŒä½¿ç”¨å±æ€§åŠ¨æ€è®¾å®šè·¯å¾„--&gt;</span><br><span class="line">    &lt;directory&gt;$&#123;project.basedir&#125;/src/main/resources&lt;/directory&gt;</span><br><span class="line">    &lt;!--å¼€å¯å¯¹é…ç½®æ–‡ä»¶çš„èµ„æºåŠ è½½è¿‡æ»¤--&gt;</span><br><span class="line">    &lt;filtering&gt;true&lt;/filtering&gt;</span><br><span class="line">  &lt;/resource&gt;</span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure><h2 id="13ã€å¤šç¯å¢ƒå¼€å‘é…ç½®"><a href="#13ã€å¤šç¯å¢ƒå¼€å‘é…ç½®" class="headerlink" title="13ã€å¤šç¯å¢ƒå¼€å‘é…ç½®"></a>13ã€å¤šç¯å¢ƒå¼€å‘é…ç½®</h2><h3 id="13-1ã€å¤šç¯å¢ƒé…ç½®"><a href="#13-1ã€å¤šç¯å¢ƒé…ç½®" class="headerlink" title="13.1ã€å¤šç¯å¢ƒé…ç½®"></a>13.1ã€å¤šç¯å¢ƒé…ç½®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--åˆ›å»ºå¤šç¯å¢ƒ--&gt;</span><br><span class="line">&lt;profiles&gt;</span><br><span class="line">  &lt;!--å®šä¹‰å…·ä½“çš„ç¯å¢ƒï¼šç”Ÿäº§ç¯å¢ƒ--&gt;</span><br><span class="line">  &lt;profile&gt;</span><br><span class="line">    &lt;!--å®šä¹‰ç¯å¢ƒå¯¹åº”çš„å”¯ä¸€åç§°--&gt;</span><br><span class="line">    &lt;id&gt;pro&lt;/id&gt;</span><br><span class="line">    &lt;!--å®šä¹‰ç¯å¢ƒä¸­çš„ä¸“ç”¨çš„å±æ€§å€¼--&gt;</span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">      &lt;jdbc.url&gt;jdbc:mysql://127.1.1.1:3306/test&lt;/jdbc.url&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line">    &lt;!--è®¾ç½®é»˜è®¤å¯åŠ¨--&gt;</span><br><span class="line">    &lt;activation&gt;</span><br><span class="line">      &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;</span><br><span class="line">    &lt;/activation&gt;</span><br><span class="line">  &lt;/profile&gt;</span><br><span class="line">  &lt;!--å®šä¹‰å…·ä½“çš„ç¯å¢ƒï¼šå¼€å‘ç¯å¢ƒ--&gt;</span><br><span class="line">  &lt;!--æ ¼å¼åŒä¸Š--&gt;</span><br><span class="line">&lt;/profiles&gt;</span><br></pre></td></tr></table></figure><h3 id="13-2ã€åŠ è½½æŒ‡å®šç¯å¢ƒ"><a href="#13-2ã€åŠ è½½æŒ‡å®šç¯å¢ƒ" class="headerlink" title="13.2ã€åŠ è½½æŒ‡å®šç¯å¢ƒ"></a>13.2ã€åŠ è½½æŒ‡å®šç¯å¢ƒ</h3><ol><li><p>ä½œç”¨ï¼šåŠ è½½æŒ‡å®šç¯å¢ƒé…ç½®</p></li><li><p>è°ƒç”¨æ ¼å¼ï¼š<code>mvn æŒ‡ä»¤ -p ç¯å¢ƒå®šä¹‰id</code></p></li><li><p>èŒƒä¾‹ï¼š<code>mvn install -p pro</code></p></li></ol><h2 id="14ã€è·³è¿‡æµ‹è¯•"><a href="#14ã€è·³è¿‡æµ‹è¯•" class="headerlink" title="14ã€è·³è¿‡æµ‹è¯•"></a>14ã€è·³è¿‡æµ‹è¯•</h2><h3 id="14-1ã€å¿…è¦æ€§"><a href="#14-1ã€å¿…è¦æ€§" class="headerlink" title="14.1ã€å¿…è¦æ€§"></a>14.1ã€å¿…è¦æ€§</h3><p>å¦‚æ‰§è¡Œmavenæ‰“åŒ…å‘å¸ƒé¡¹ç›®æ—¶ï¼Œå¦‚æœæµ‹è¯•ç±»ä¸­æœ‰æµ‹è¯•ç”¨ä¾‹ä»£ç ï¼Œæ‰“åŒ…mavené»˜è®¤ä¼šå°†æµ‹è¯•ç”¨ä¾‹ä¸€èµ·ç¼–è¯‘å¹¶æ‰§è¡Œï¼Œç¼–è¯‘æ‰§è¡Œä¸é€šè¿‡åˆ™ä¼šæŠ¥é”™ã€‚</p><h3 id="14-2ã€æ–¹æ³•"><a href="#14-2ã€æ–¹æ³•" class="headerlink" title="14.2ã€æ–¹æ³•"></a>14.2ã€æ–¹æ³•</h3><h4 id="14-2-1ã€ä½¿ç”¨mvnå‘½ä»¤"><a href="#14-2-1ã€ä½¿ç”¨mvnå‘½ä»¤" class="headerlink" title="14.2.1ã€ä½¿ç”¨mvnå‘½ä»¤"></a>14.2.1ã€ä½¿ç”¨mvnå‘½ä»¤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ä¸æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä½†ç¼–è¯‘æµ‹è¯•ç”¨ä¾‹ç±»ç”Ÿæˆç›¸åº”çš„classæ–‡ä»¶è‡³target/test-classesä¸‹</span><br><span class="line">mvn clean install -DskipTests</span><br><span class="line"># ä¸æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œä¹Ÿä¸ç¼–è¯‘æµ‹è¯•ç”¨ä¾‹ç±»</span><br><span class="line">mvn clean install -Dmaven.test.skip=true</span><br></pre></td></tr></table></figure><h4 id="14-2-2ã€ä½¿ç”¨ideaçš„mavenç•Œé¢"><a href="#14-2-2ã€ä½¿ç”¨ideaçš„mavenç•Œé¢" class="headerlink" title="14.2.2ã€ä½¿ç”¨ideaçš„mavenç•Œé¢"></a>14.2.2ã€ä½¿ç”¨ideaçš„mavenç•Œé¢</h4><p>æ²¡æœ‰è·³è¿‡æµ‹è¯•æ—¶ï¼ŒåŒå‡»æ‰§è¡Œæ‰“åŒ…ï¼Œæ§åˆ¶å°è¾“å‡ºæ²¡æœ‰æµ‹è¯•ç”¨ä¾‹éœ€è¦æ‰§è¡Œã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019866.png" alt="img"></p><p>ç‚¹å‡»è·³è¿‡æµ‹è¯•åï¼Œtestç”Ÿå‘½å‘¨æœŸå›¾æ ‡å˜ç°ï¼ŒåŒå‡»æ‰§è¡Œæ‰“åŒ…æ—¶ï¼Œæ§åˆ¶å°è¾“å‡ºæµ‹è¯•ç”¨ä¾‹å·²è·³è¿‡ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081023285.png" alt="img"></p><h4 id="14-2-3ã€ä½¿ç”¨é…ç½®æ–‡ä»¶"><a href="#14-2-3ã€ä½¿ç”¨é…ç½®æ–‡ä»¶" class="headerlink" title="14.2.3ã€ä½¿ç”¨é…ç½®æ–‡ä»¶"></a>14.2.3ã€ä½¿ç”¨é…ç½®æ–‡ä»¶</h4><p>æ·»åŠ  <code>maven-surefire-plugin</code> æ’ä»¶ï¼Œè®¾ç½®è·³è¿‡æµ‹è¯•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.22.2&lt;/version&gt;</span><br><span class="line">  &lt;configuration&gt;</span><br><span class="line">    &lt;skipTests&gt;true&lt;/skipTests&gt;&lt;!--è®¾ç½®è·³è¿‡æµ‹è¯•--&gt;</span><br><span class="line">  &lt;/configuration&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å³ä½¿æ²¡æœ‰ç‚¹å‡»è·³è¿‡æµ‹è¯•æŒ‰é’®ï¼ŒåŒå‡»æ‰§è¡Œæ‰“åŒ…æ—¶ï¼Œæ§åˆ¶å°è¾“å‡ºçš„ä¾ç„¶æ˜¯æµ‹è¯•ç”¨ä¾‹å·²è·³è¿‡ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019418.png" alt="img"></p><p><strong>è¯¦ç»†æŒ‡å®š</strong>ï¼š</p><ol><li><p>åŒ…åè·¯å¾„ï¼Œæ–‡ä»¶åå¸¦åç¼€</p></li><li><p>æ”¯æŒé€šé…ç¬¦*ï¼Œå…¶ä¸­<code>**</code>è¡¨ç¤ºä»»ä½•åŒ…ï¼Œ<code>*</code>è¡¨ç¤ºä»»ä½•å­—ç¬¦</p></li><li><p><code>excludes</code>ä¼˜å…ˆçº§é«˜äº<code>includes</code></p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.22.2&lt;/version&gt;</span><br><span class="line">  &lt;configuration&gt;</span><br><span class="line">    &lt;!--è¯¦ç»†æŒ‡å®šè¦è·‘çš„æµ‹è¯•--&gt;</span><br><span class="line">    &lt;includes&gt;</span><br><span class="line">      &lt;include&gt;com/jerry/AppTest*.java&lt;/include&gt;</span><br><span class="line">    &lt;/includes&gt;</span><br><span class="line">    &lt;!--è¯¦ç»†æŒ‡å®šæ’é™¤çš„æµ‹è¯•--&gt;</span><br><span class="line">    &lt;excludes&gt;</span><br><span class="line">      &lt;exclude&gt;com/jerry/AppTest.java&lt;/exclude&gt;</span><br><span class="line">      &lt;exclude&gt;com/jerry/AppTest1.java&lt;/exclude&gt;</span><br><span class="line">    &lt;/excludes&gt;</span><br><span class="line">  &lt;/configuration&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure><h2 id="15ã€è‡ªå®šä¹‰éª¨æ¶"><a href="#15ã€è‡ªå®šä¹‰éª¨æ¶" class="headerlink" title="15ã€è‡ªå®šä¹‰éª¨æ¶"></a>15ã€è‡ªå®šä¹‰éª¨æ¶</h2><p>mavenå®˜æ–¹é€šè¿‡æ’ä»¶ç»™æˆ‘ä»¬æä¾›äº†å¤§é‡çš„æ¨¡æ¿ï¼Œä½†æ˜¯è¿™äº›æ¨¡æ¿æˆ–å¤šæˆ–å°‘çš„éƒ½å­˜åœ¨ä¸€å®šçš„é—®é¢˜ï¼Œæ— æ³•æ»¡è¶³æˆ‘ä»¬å®é™…çš„éœ€æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ ¹æ®è‡ªå·±çš„éœ€æ±‚è‡ªå®šä¹‰æ¨¡æ¿å‡ºæ¥ã€‚</p><h3 id="15-1ã€ç”Ÿæˆæ¨¡æ¿"><a href="#15-1ã€ç”Ÿæˆæ¨¡æ¿" class="headerlink" title="15.1ã€ç”Ÿæˆæ¨¡æ¿"></a>15.1ã€ç”Ÿæˆæ¨¡æ¿</h3><p>æ ¹æ®å·²ç»å­˜åœ¨çš„é¡¹ç›®åˆ›å»ºéª¨æ¶ï¼Œåœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ éª¨æ¶æ’ä»¶ <code>maven-archetype-plugin</code>ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;maven-archetype-plugin&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.2&lt;/version&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure><p>åœ¨ideaçš„mavenç•Œé¢ä¸­å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ’ä»¶</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019249.png" alt="img"></p><p>ä½¿ç”¨mvnå‘½ä»¤å°†è¯¥é¡¹ç›®åšæˆéª¨æ¶æˆ–è€…ä½¿ç”¨ideaç•Œé¢çš„æ’ä»¶æŒ‰é’®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn archetype:create-from-project</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081023193.png" alt="img"></p><p>ç”Ÿæˆéª¨æ¶çš„æ—¶å€™å¦‚æœå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼Œéœ€è¦åœ¨mavenå®‰è£…ç›®å½•å°†mvn.cmdå¤åˆ¶æ‹·è´ä¸€ä»½ï¼Œåå­—æ”¹æˆmvn.batã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081023635.png" alt="img"></p><p>éª¨æ¶ç”ŸæˆæˆåŠŸ</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019145.png" alt="img"></p><p>åˆ‡æ¢åˆ°ç”Ÿæˆçš„éª¨æ¶é¡¹ç›®ç›®å½•</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd target\generated-sources\archetype</span><br></pre></td></tr></table></figure><p>å‘æœ¬åœ°ä»“åº“ä¸­å‘å¸ƒ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn install</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081023088.png" alt="img"></p><p>æœ€åæ‰§è¡Œ<code>mvn archetype:crawl</code>å‘½ä»¤ æˆ–è€…ä½¿ç”¨ideaçš„mavenç•Œé¢ä¸­çš„æ’ä»¶æŒ‰é’®</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081024606.png" alt="img"></p><p>æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œåœ¨mavençš„æœ¬åœ°ä»“åº“ç›®å½•ä¸­ç”Ÿæˆä¸€ä¸ªarchetype-catalog.xmlæ–‡ä»¶ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019591.png" alt="img"></p><h3 id="15-2ã€ä½¿ç”¨æ¨¡æ¿"><a href="#15-2ã€ä½¿ç”¨æ¨¡æ¿" class="headerlink" title="15.2ã€ä½¿ç”¨æ¨¡æ¿"></a>15.2ã€ä½¿ç”¨æ¨¡æ¿</h3><p>ideaå®‰è£… <code>maven archetype catalogs</code> æ’ä»¶</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019643.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019648.png" alt="img"></p><p>æ·»åŠ æˆåŠŸä¹‹åï¼Œåœ¨æ–°å»ºmavené¡¹ç›®çš„æ—¶å€™å°±å¯ä»¥é€‰åˆ°åˆšæ‰åˆ›å»ºçš„éª¨æ¶ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019495.png" alt="img"></p><h2 id="16ã€ç§æœ"><a href="#16ã€ç§æœ" class="headerlink" title="16ã€ç§æœ"></a>16ã€ç§æœ</h2><h3 id="16-1ã€ç®€ä»‹"><a href="#16-1ã€ç®€ä»‹" class="headerlink" title="16.1ã€ç®€ä»‹"></a>16.1ã€ç®€ä»‹</h3><p>ç§æœæ˜¯æ¶è®¾åœ¨å±€åŸŸç½‘çš„ä¸€ç§ç‰¹æ®Šçš„è¿œç¨‹ä»“åº“ï¼Œç›®çš„æ˜¯ä»£ç†è¿œç¨‹ä»“åº“åŠéƒ¨ç½²ç¬¬ä¸‰æ–¹æ„ä»¶ã€‚æœ‰äº†ç§æœä¹‹åï¼Œå½“mavenéœ€è¦ä¸‹è½½æ„ä»¶æ—¶ï¼Œç›´æ¥è¯·æ±‚ç§æœï¼Œç§æœä¸Šå­˜åœ¨åˆ™ä¸‹è½½åˆ°æœ¬åœ°ä»“åº“ï¼›å¦åˆ™ï¼Œç§æœè¯·æ±‚å¤–éƒ¨çš„è¿œç¨‹ä»“åº“ï¼Œå°†æ„ä»¶ä¸‹è½½åˆ°ç§æœï¼Œå†æä¾›ç»™æœ¬åœ°ä»“åº“ä¸‹è½½ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081024124.png" alt="img"></p><h3 id="16-2ã€å¿…è¦æ€§-ä¼˜ç‚¹"><a href="#16-2ã€å¿…è¦æ€§-ä¼˜ç‚¹" class="headerlink" title="16.2ã€å¿…è¦æ€§(ä¼˜ç‚¹)"></a>16.2ã€å¿…è¦æ€§(ä¼˜ç‚¹)</h3><ol><li><p><strong>å‡å°‘ç½‘ç»œå¸¦å®½æµé‡</strong>ã€‚å¦‚æœæ²¡æœ‰ç§æœï¼Œæˆ‘ä»¬æ‰€éœ€çš„æ‰€æœ‰æ„ä»¶éƒ½éœ€è¦é€šè¿‡mavençš„ä¸­å¤®ä»“åº“æˆ–è€…ç¬¬ä¸‰æ–¹çš„mavenä»“åº“ä¸‹è½½åˆ°æœ¬åœ°ï¼Œè€Œä¸€ä¸ªå›¢é˜Ÿä¸­çš„æ‰€æœ‰äººéƒ½é‡å¤çš„ä»mavenä»“åº“ä¸‹è½½æ„ä»¶æ— ç–‘åŠ å¤§äº†ä»“åº“çš„è´Ÿè½½å’Œæµªè´¹äº†å¤–ç½‘å¸¦å®½ï¼Œå¦‚æœç½‘é€Ÿæ…¢çš„è¯ï¼Œè¿˜ä¼šå½±å“é¡¹ç›®çš„è¿›ç¨‹ã€‚</p></li><li><p><strong>ä¸€å®šèŒƒå›´å†…å…±äº«èµ„æºï¼Œä»…å¯¹å†…éƒ¨å¼€æ”¾ï¼Œä¸å¯¹å¤–å…±äº«</strong>ã€‚å¾ˆå¤šæƒ…å†µä¸‹é¡¹ç›®çš„å¼€å‘éƒ½æ˜¯å†å†…ç½‘è¿›è¡Œçš„ï¼Œå¯èƒ½æ ¹æœ¬è¿æ¥ä¸äº†mavençš„ä¸­å¤®ä»“åº“å’Œç¬¬ä¸‰æ–¹çš„mavenä»“åº“ã€‚</p></li><li><p><strong>åŠ é€Ÿmavenæ„å»º</strong></p></li><li><p><strong>éƒ¨ç½²ç¬¬ä¸‰æ–¹æ„ä»¶</strong></p></li><li><p><strong>æé«˜ç¨³å®šæ€§ã€å¢å¼ºæ§åˆ¶</strong></p></li><li><p><strong>é™ä½ä¸­å¤®ä»“åº“çš„è´Ÿè½½</strong></p></li></ol><h3 id="16-3ã€Nexus"><a href="#16-3ã€Nexus" class="headerlink" title="16.3ã€Nexus"></a>16.3ã€Nexus</h3><h4 id="16-3-1ã€ç®€ä»‹"><a href="#16-3-1ã€ç®€ä»‹" class="headerlink" title="16.3.1ã€ç®€ä»‹"></a>16.3.1ã€ç®€ä»‹</h4><p>Nexus æ˜¯ä¸€ä¸ªä¸“é—¨çš„ maven ä»“åº“ç®¡ç†è½¯ä»¶ï¼Œå®ƒä¸ä»…èƒ½å¤Ÿæ­å»º maven ç§æœï¼Œè¿˜å…·æœ‰å¦‚ä¸‹ä¸€äº›ä¼˜ç‚¹ä½¿å…¶æ—¥è¶‹æˆä¸ºæœ€æµè¡Œçš„ maven ä»“åº“ç®¡ç†å™¨ã€‚</p><ul><li><p>æä¾›äº†å¼ºå¤§çš„ä»“åº“ç®¡ç†åŠŸèƒ½ï¼Œæ„ä»¶æœç´¢åŠŸèƒ½</p></li><li><p>å®ƒåŸºäº RESTï¼Œå‹å¥½çš„ UI æ˜¯ä¸€ä¸ª ext.js çš„ REST å®¢æˆ·ç«¯</p></li><li><p>å®ƒå ç”¨è¾ƒå°‘çš„å†…å­˜</p></li><li><p>åŸºäºç®€å•æ–‡ä»¶ç³»ç»Ÿè€Œéæ•°æ®åº“</p></li></ul><h4 id="16-3-2ã€ä¸‹è½½å®‰è£…è¿è¡Œ"><a href="#16-3-2ã€ä¸‹è½½å®‰è£…è¿è¡Œ" class="headerlink" title="16.3.2ã€ä¸‹è½½å®‰è£…è¿è¡Œ"></a>16.3.2ã€ä¸‹è½½å®‰è£…è¿è¡Œ</h4><ol><li>ä½¿ç”¨dockerå®‰è£…nexus3ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker search nexus</span><br><span class="line">docker pull sonatype/nexus3</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019064.png" alt="img"></p><ol><li>åˆ›å»ºdocker-compose.ymlæ–‡ä»¶</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat /usr/local/docker/nexus/docker-compose.yml</span><br><span class="line">version: &#x27;3&#x27;</span><br><span class="line">services:</span><br><span class="line">  nexus:</span><br><span class="line">    restart: always</span><br><span class="line">    image: sonatype/nexus3</span><br><span class="line">    container_name: nexus3</span><br><span class="line">    ports:</span><br><span class="line">      - 8081:8081</span><br><span class="line">    volumes:</span><br><span class="line">      - /usr/local/docker/nexus/nexus-data:/nexus-data</span><br></pre></td></tr></table></figure><p>:wqä¿å­˜é€€å‡ºã€‚</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1554080/1629987224232-c921f1bd-cced-4bf5-b713-1b95c3ea3f56.png" alt="img"></p><ol><li>è¿è¡Œnexus3ï¼Œå¦‚æœè®¿é—®ä¸æˆåŠŸï¼Œåˆ™éœ€è¦ç»™nexus-dataæ–‡ä»¶å¤¹èµ‹æƒé™<code>chmod 777 nexus-data/</code>ã€‚</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ä½¿ç”¨docker-composeå¯åŠ¨</span><br><span class="line">docker-compose up -d </span><br><span class="line"># ä½¿ç”¨docker-composeåœæ­¢</span><br><span class="line">docker-compose down</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081024515.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019622.png" alt="img"></p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019306.png" alt="img"></p><p>éœ€è¦æŸ¥çœ‹nexus-dataæ–‡ä»¶å¤¹ä¸‹çš„admin.passwordæ–‡ä»¶ï¼Œé‡Œé¢è®°å½•äº†å¯†ç ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat admin.password</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019492.png" alt="img"></p><p>ç™»å½•ä¹‹åä¼šå‡ºç°å¼¹çª—ç•Œé¢éœ€è¦ä½ ä¿®æ”¹å¯†ç ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019536.png" alt="img"></p><h4 id="16-3-3ã€é…ç½®æœ¬åœ°ä»“åº“è®¿é—®ç§æœçš„æƒé™"><a href="#16-3-3ã€é…ç½®æœ¬åœ°ä»“åº“è®¿é—®ç§æœçš„æƒé™" class="headerlink" title="16.3.3ã€é…ç½®æœ¬åœ°ä»“åº“è®¿é—®ç§æœçš„æƒé™"></a>16.3.3ã€é…ç½®æœ¬åœ°ä»“åº“è®¿é—®ç§æœçš„æƒé™</h4><p>åœ¨mavenå®‰è£…ç›®å½•ä¸‹çš„settings.xmlé…ç½®æ–‡ä»¶ä¸­çš„serversä¸­æ·»åŠ serveèŠ‚ç‚¹ï¼Œå› ä¸ºç§æœä¸æ˜¯è°éƒ½å¯ä»¥ä½¿ç”¨ï¼Œæ‰€ä»¥éœ€è¦é…ç½®ç”¨æˆ·åå’Œå¯†ç ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;servers&gt;</span><br><span class="line">  &lt;server&gt;</span><br><span class="line">    &lt;id&gt;nexus-releases&lt;/id&gt;</span><br><span class="line">    &lt;username&gt;admin&lt;/username&gt;</span><br><span class="line">    &lt;password&gt;admin123&lt;/password&gt;</span><br><span class="line">  &lt;/server&gt;</span><br><span class="line">  &lt;server&gt;</span><br><span class="line">    &lt;id&gt;nexus-snapshots&lt;/id&gt;</span><br><span class="line">    &lt;username&gt;admin&lt;/username&gt;</span><br><span class="line">    &lt;password&gt;admin123&lt;/password&gt;</span><br><span class="line">  &lt;/server&gt;</span><br><span class="line"> &lt;/servers&gt;</span><br></pre></td></tr></table></figure><h4 id="16-3-4ã€é…ç½®å½“å‰é¡¹ç›®è®¿é—®ç§æœä¸Šä¼ èµ„æºçš„ä¿å­˜ä½ç½®"><a href="#16-3-4ã€é…ç½®å½“å‰é¡¹ç›®è®¿é—®ç§æœä¸Šä¼ èµ„æºçš„ä¿å­˜ä½ç½®" class="headerlink" title="16.3.4ã€é…ç½®å½“å‰é¡¹ç›®è®¿é—®ç§æœä¸Šä¼ èµ„æºçš„ä¿å­˜ä½ç½®"></a>16.3.4ã€é…ç½®å½“å‰é¡¹ç›®è®¿é—®ç§æœä¸Šä¼ èµ„æºçš„ä¿å­˜ä½ç½®</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;distributionManagement&gt;</span><br><span class="line">  &lt;repository&gt;</span><br><span class="line">    &lt;id&gt;nexus-releases&lt;/id&gt;</span><br><span class="line">    &lt;name&gt;Nexus Release Repository&lt;/name&gt;</span><br><span class="line">    &lt;url&gt;http://120.78.177.161:8081/repository/maven-releases/&lt;/url&gt;</span><br><span class="line">  &lt;/repository&gt;</span><br><span class="line">  &lt;snapshotRepository&gt;</span><br><span class="line">    &lt;id&gt;nexus-snapshots&lt;/id&gt;</span><br><span class="line">    &lt;name&gt;Nexus Snapshot Repository&lt;/name&gt;</span><br><span class="line">    &lt;url&gt;http://120.78.177.161:8081/repository/maven-snapshots/&lt;/url&gt;</span><br><span class="line">  &lt;/snapshotRepository&gt;</span><br><span class="line">&lt;/distributionManagement&gt;</span><br></pre></td></tr></table></figure><p>å‘å¸ƒèµ„æºåˆ°ç§æœå‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn deploy</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šidåç§°éœ€è¦ä¸settings.xmlé…ç½®æ–‡ä»¶ä¸­serverèŠ‚ç‚¹é…ç½®çš„idä¿æŒä¸€è‡´ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019573.png" alt="img"></p><p>å¯ä»¥çœ‹åˆ°é¡¹ç›®å¿«ç…§ç‰ˆæœ¬å·²ç»ä¸Šä¼ åˆ°ç§æœã€‚</p><h4 id="16-3-5ã€è®¾ç½®ä»£ç†ä»“åº“-ç”¨äºä¸‹è½½èµ„æº"><a href="#16-3-5ã€è®¾ç½®ä»£ç†ä»“åº“-ç”¨äºä¸‹è½½èµ„æº" class="headerlink" title="16.3.5ã€è®¾ç½®ä»£ç†ä»“åº“(ç”¨äºä¸‹è½½èµ„æº)"></a>16.3.5ã€è®¾ç½®ä»£ç†ä»“åº“(ç”¨äºä¸‹è½½èµ„æº)</h4><p>åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œå…ˆå°†æœ¬åœ°ä»“åº“çš„ä¾èµ–å…ˆåˆ é™¤æ‰ï¼Œè¿«ä½¿é¡¹ç›®å»ç§æœä¸­ä¸‹è½½ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç§æœä»“åº“é…ç½®:ä»ç§æœä¸‹è½½--&gt;</span><br><span class="line">&lt;repositories&gt;</span><br><span class="line">  &lt;repository&gt;</span><br><span class="line">    &lt;id&gt;nexus&lt;/id&gt;</span><br><span class="line">    &lt;name&gt;Nexus Repository&lt;/name&gt;</span><br><span class="line">    &lt;url&gt;http://120.78.177.161:8081/repository/maven-public/&lt;/url&gt;</span><br><span class="line">    &lt;releases&gt;</span><br><span class="line">      &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">    &lt;/releases&gt;</span><br><span class="line">    &lt;snapshots&gt;</span><br><span class="line">      &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">    &lt;/snapshots&gt;</span><br><span class="line">  &lt;/repository&gt;</span><br><span class="line">&lt;/repositories&gt;</span><br><span class="line">&lt;pluginRepositories&gt;</span><br><span class="line">  &lt;pluginRepository&gt;</span><br><span class="line">    &lt;id&gt;nexus&lt;/id&gt;</span><br><span class="line">    &lt;name&gt;Nexus Plugin Repository&lt;/name&gt;</span><br><span class="line">    &lt;url&gt;http://120.78.177.161:8081/repository/maven-public/&lt;/url&gt;</span><br><span class="line">    &lt;releases&gt;</span><br><span class="line">      &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">    &lt;/releases&gt;</span><br><span class="line">    &lt;snapshots&gt;</span><br><span class="line">      &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">    &lt;/snapshots&gt;</span><br><span class="line">  &lt;/pluginRepository&gt;</span><br><span class="line">&lt;/pluginRepositories&gt;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰å¼€å¯åŒ¿åè®¿é—®ï¼Œåœ¨ä¸‹è½½èµ„æºçš„æ—¶å€™ä¼šæŠ¥æ²¡æœ‰æƒé™ä¸‹è½½ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081024328.png" alt="img"></p><p>å¼€å¯åŒ¿åè®¿é—®</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019972.png" alt="img"></p><p>ideaé…ç½®mavenæ€»æ˜¯æ›´æ–°å¿«ç…§ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019438.png" alt="img"></p><p>ä¾èµ–ä¸‹è½½æˆåŠŸ</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081019721.png" alt="img"></p><h4 id="16-3-6ã€ä¸Šä¼ ç¬¬ä¸‰æ–¹jaråŒ…"><a href="#16-3-6ã€ä¸Šä¼ ç¬¬ä¸‰æ–¹jaråŒ…" class="headerlink" title="16.3.6ã€ä¸Šä¼ ç¬¬ä¸‰æ–¹jaråŒ…"></a>16.3.6ã€ä¸Šä¼ ç¬¬ä¸‰æ–¹jaråŒ…</h4><p>æ‰“å¼€cmdï¼Œå…ˆè·³è½¬åˆ°ç¬¬ä¸‰æ–¹jaråŒ…èµ„æºç›®å½•ï¼Œç„¶åæ‰§è¡Œå¦‚ä¸‹mvnå‘½ä»¤å³å¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn deploy:deploy-file -DgroupId=com.alibaba -DartifactId=fastjson -Dversion=1.2.28 -Dpackaging=jar -Dfile=fastjson-1.2.28.jar -Durl=http://120.78.177.161:8081/repository/maven-releases/ -DrepositoryId=nexus-releases</span><br></pre></td></tr></table></figure><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081024604.png" alt="img"></p><p>æŸ¥çœ‹nexus-releasesä»“åº“ï¼Œå‘ç°æœ‰æˆ‘ä»¬ä¸Šä¼ çš„ç¬¬ä¸‰æ–¹jaråŒ…ã€‚</p><p><img src="https://raw.githubusercontent.com/xihuanxiaorang/images/main/202109081025836.png" alt="img"></p><p>è‡³æ­¤ï¼Œå¤§åŠŸå‘Šæˆï¼ï¼ï¼å…ˆå‘Šä¸€æ®µè½ï¼ŒğŸ¤—ğŸ¤—ğŸ¤—</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javaå¼€å‘ </tag>
            
            <tag> å·¥å…· </tag>
            
            <tag> å¼€å‘å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
